!function(e){function t(t){for(var n,r,c=t[0],i=t[1],o=t[2],d=0,m=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(u&&u(t);m.length;)m.shift()();return l.push.apply(l,o||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a,r=l[t],c=!0,i=1;i<r.length;i++)a=r[i],0!==s[a]&&(c=!1);c&&(l.splice(t--,1),e=n(n.s=r[0]))}return e}function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var r={},s={2:0},l=[];n.m=e,n.c=r,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var o=0;o<c.length;o++)t(c[o]);var u=i;l.push([216,0,1]),a()}({14:function(e,t,a){"use strict";function n(e){return s.a.createElement("button",{className:"finder__clear",type:"button",onClick:()=>{e.clear()}},s.a.createElement("span",{className:"far fa-fw fa-times icon"}),s.a.createElement("span",{className:"finder__clear__text"},"Reset"))}var r=a(0),s=a.n(r),l=a(1),c=a.n(l);n.propTypes={clear:c.a.func},t.a=n},2:function(e,t,a){"use strict";function n(e){return!("true"!==e)}function r(e,t,a){const n=a?w(t):O(t);e.className=e.className.split(/\s+/).filter(e=>n(e)).join(" ")}function s(){return!!window.matchMedia("(prefers-reduced-motion: reduce)").matches}function l(e){return!(0===e.offsetHeight||0===e.offsetWidth)}function c(e){return!!(0<=e.getBoundingClientRect().top&&e.getBoundingClientRect().top<=window.innerHeight)}function i(e){const t={};return e.substr(1).split("&").forEach(e=>{const[a,n]=e.split("=");t[a]=n}),t}function o(e){if(0<Object.keys(e).length){let t="?";for(const a in e)1!==t.length&&(t+="&"),t+=a+"="+e[a];return t}return""}function u(e,t,a,n,r,s){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:e,eventCategory:t,eventAction:a,eventLabel:n,eventValue:r,nonInteractionHit:s})}function d(e,t){t.forEach(t=>e.appendChild(t))}function m(e){return e.replace(/\D/g,"")}function p(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:432;const t=window.innerWidth;if(t<e)return!0}function f(e){let t=[];for(let a=e.length>>>0;a--;)t[a]=e[a];return t}function _(){let e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){let t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}let a=e.indexOf("Edge/");return!!(0<a)&&parseInt(e.substring(a+5,e.indexOf(".",a)),10)}function g(){return!!("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)}function y(e,t){let a=document.createElement(e);return t.map((function(e){"content"===e.label?a.appendChild(document.createTextNode(e.val)):a.setAttribute(e.label,e.val)})),a}function b(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function E(e){return D()(e).then(e=>{if(200===e.status)return e.data;throw"Bad response: ".concat(e.status)}).catch(e=>{D.a.isCancel(e)||u("jsError","JavaScript error","Line ".concat(e.lineNumber," – ").concat(e.message),"axiosRequest ".concat(e.fileName," (").concat(window.location,")"),!0)})}a.d(t,"o",(function(){return n})),a.d(t,"m",(function(){return r})),a.d(t,"l",(function(){return s})),a.d(t,"h",(function(){return l})),a.d(t,"q",(function(){return c})),a.d(t,"k",(function(){return i})),a.d(t,"j",(function(){return o})),a.d(t,"f",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"i",(function(){return m})),a.d(t,"g",(function(){return p})),a.d(t,"n",(function(){return f})),a.d(t,"e",(function(){return _})),a.d(t,"c",(function(){return g})),a.d(t,"d",(function(){return y})),a.d(t,"p",(function(){return b})),a.d(t,"b",(function(){return E}));var h=a(4),N=(a.n(h),a(19)),q=(a.n(N),a(13)),v=(a.n(q),a(3)),j=(a.n(v),a(5)),k=(a.n(j),a(8)),D=a.n(k);const w=e=>t=>0>t.indexOf(e),O=e=>t=>t!==e},216:function(e,t,a){e.exports=a(217)},217:function(e,t,a){"use strict";a.r(t);var n=a(3),r=(a.n(n),a(0)),s=a.n(r),l=a(41),c=(a.n(l),a(51)),i=a(6);document.addEventListener("DOMContentLoaded",()=>{if(!/(Trident|MSIE)/.test(navigator.userAgent)){const e=document.querySelectorAll(".wrapper--finder");e&&Array.from(e).forEach(e=>{Object(i.b)(e.dataset.config).then(t=>{Object(l.render)(s.a.createElement(c.a,{config:t,element:e}),e)})})}})},51:function(e,t,a){"use strict";function n(e){function t(){p.focus()}const[a,n]=Object(N.useState)(e.query.query),[r,s]=Object(N.useState)([]),[l,c]=Object(N.useState)({cancel:()=>{}}),[i]=Object(N.useState)("finder--"+e.query.collection+"--"+Math.random().toString(16).slice(-4)),[o,u]=Object(N.useState)(!1),[d,m]=Object(N.useState)("");Object(N.useEffect)(()=>{n(e.query.query)},[e.updating]);let p=null;const f=()=>{l.cancel(),n(""),s([]),t();const a=e.query;a.misspelling=null,a.query="",a.sortBy=e.config.sort,a.startRank=1,a.interacted=!0,e.update.query(a),e.update.results(!e.update.updateState)},_=t=>{l.cancel(),s([]);const n=e.query;n.misspelling=null,n.query=t||(a||""),n.sortBy=a?null:e.config.sort,n.startRank=1,n.interacted=!0,e.update.query(n),e.update.results(!e.update.updateState)},g=a&&q.a.createElement(D.a,{clear:()=>{f()}}),y=e=>{u(!1),s([]),t(),_(e)},b=r&&0<r.length&&q.a.createElement("ul",{role:"listbox","aria-label":"Search suggestions","aria-activedescendant":d,className:o?"finder__query__suggestions show":"finder__query__suggestions hide"},[...new Set(r)].slice(0,w).map((e,t)=>q.a.createElement("li",{key:e,role:"option",id:i+"--"+t},q.a.createElement("button",{type:"button",onBlur:()=>{m(""),u(!1)},onFocus:()=>u(!0),onMouseDown:()=>y(e),onClick:()=>y(e),onKeyDown:e=>{switch(e.keyCode){case O:e.target.parentNode.parentNode.parentNode.querySelector("input").focus(),s([]),m("");break;case S:e.target.parentNode.previousElementSibling&&e.target.parentNode.previousElementSibling.querySelector("button")?(e.preventDefault(),e.target.parentNode.previousElementSibling.querySelector("button").focus(),m(e.target.parentNode.previousElementSibling.id)):(e.preventDefault(),e.target.parentNode.parentNode.parentNode.querySelector("input").focus(),m(""));break;case x:e.preventDefault(),e.target.parentNode.nextElementSibling&&e.target.parentNode.nextElementSibling.querySelector("button")&&(e.preventDefault(),e.target.parentNode.nextElementSibling.querySelector("button").focus(),m(e.target.parentNode.nextElementSibling.id));break;case R:e.preventDefault(),e.target.parentNode.parentNode.firstChild&&e.target.parentNode.parentNode.firstChild.querySelector("button")&&(e.preventDefault(),e.target.parentNode.parentNode.firstChild.querySelector("button").focus(),m(e.target.parentNode.firstChild.id));break;case C:e.preventDefault(),e.target.parentNode.parentNode.lastChild&&e.target.parentNode.parentNode.lastChild.querySelector("button")&&(e.preventDefault(),e.target.parentNode.parentNode.lastChild.querySelector("button").focus(),m(e.target.parentNode.lastChild.id))}}},function(e,t){return q.a.createElement(q.a.Fragment,null,q.a.createElement("span",null,q.a.createElement("span",{className:"sr-only"},e),q.a.createElement("span",{"aria-hidden":"true"},q.a.createElement("span",{className:"finder__suggestion"},e.slice(e.indexOf(t.toLowerCase()),t.length)),e.slice(e.indexOf(t.toLowerCase())+t.length))))}(e,a))))),E=q.a.createElement("div",{className:"finder__query__input"},q.a.createElement("div",{className:"finder__query__icon--wrapper"},q.a.createElement("span",{className:"finder__icon fal fa-search icon","aria-hidden":"true"})),q.a.createElement("label",{className:"sr-only",htmlFor:i},"Search ".concat(e.config.summariseAs.plural)),q.a.createElement("input",{autoComplete:"off",id:i,name:"query",placeholder:e.config.placeholder,ref:e=>{p=e},type:"text",value:a,onKeyDown:e=>{switch(e.keyCode){case O:f();break;case x:r&&0<r.length&&(e.preventDefault(),e.target.parentNode.querySelector(".finder__query__suggestions button").focus(),m(e.target.parentNode.querySelector(".finder__query__suggestions li").id))}},onFocus:()=>u(!0),onBlur:()=>u(!1),onChange:t=>{if(s([]),n(t.target.value),l.cancel(),t.target.value){const[a,n]=Object(k.c)(e.query.collection,t.target.value);c({cancel:()=>{n.cancel()}}),a.then(e=>s(e)).catch(()=>s([]))}else s([])}}),b,g);return q.a.createElement("fieldset",{className:"finder__query"},q.a.createElement("div",null,E,q.a.createElement("button",{type:"submit",className:"finder__query__submit",onClick:()=>_()},q.a.createElement("span",{className:"fal fa-search finder__query__submit__icon","aria-hidden":"true"})," ",q.a.createElement("span",{className:"finder__query__submit__text"},"Find"))))}function r(e){const t=Math.random().toString(16).slice(-4),a=e.query.facets[e.facet.meta]||"",n=e.facet.values.reduce((e,t)=>[...e,t],[]),r=e.responseFacet[0]&&e.responseFacet[0].categories[0]&&e.responseFacet[0].categories[0].values?e.responseFacet[0].categories[0].values.reduce((e,t)=>[...e,t.data],[]):[],s=n.map(e=>e.data).filter(e=>0>r.indexOf(e.toLowerCase())).length;return e.facet.values.length>s?q.a.createElement("div",{className:"finder__filter finder__select ".concat(a&&"finder__select--selected")},q.a.createElement("label",{className:"finder__select__overline",htmlFor:"meta_".concat(e.facet.meta,"_sand--").concat(t)},e.facet.name),q.a.createElement("select",{name:e.facet.name,id:"meta_".concat(e.facet.meta,"_sand--").concat(t),onChange:t=>(t=>{const a=e.query,n=t;e.dependencies.map(e=>{delete a.facets[e.meta]}),n?a.facets[e.facet.meta]=n:delete a.facets[e.facet.meta],a.startRank=1,a.misspelling=null,a.interacted=!0,e.update.query(a),e.update.results(!e.update.updateState)})(t.target.value),value:a},q.a.createElement("option",{value:"",id:"meta".concat(e.facet.meta,"all"),name:"meta_".concat(e.facet.meta,"_sand--").concat(t)},e.facet.noSelection),e.facet.values.map((n,r)=>{const s=e.responseFacet[0]&&e.responseFacet[0].categories[0]&&e.responseFacet[0].categories[0].values.filter(e=>e.data.toLowerCase()===n.data.toLowerCase());return a.toLowerCase()===n.data.toLowerCase()||s&&s[0]?q.a.createElement("option",{key:r,value:n.data,id:"meta".concat(e.facet.meta).concat(r),name:"meta_".concat(e.facet.meta,"_sand--").concat(t)},n.label,a===n.data?"":0<s[0].count&&" (".concat(s[0].count,")")):null}))):null}function s(e){const t=Math.random().toString(16).slice(-4),a=t=>{const a=e.query,n=t.target.value;t.target.checked?a.facets[e.facet.meta]=n:delete a.facets[e.facet.meta],a.startRank=1,a.misspelling=null,a.interacted=!0,e.update.query(a),e.update.results(!e.update.updateState)},n="".concat(e.facet.name,"-").concat(t);return q.a.createElement("fieldset",{className:"finder__filter finder__togglebox"},q.a.createElement("div",{className:"finder__toggle"},q.a.createElement("label",{htmlFor:n},e.facet.values[0].label,q.a.createElement("input",{type:"checkbox",id:n,name:e.facet.name,value:e.facet.values[0].data,onChange:e=>a(e),checked:!!e.query.facets[e.facet.meta]}),q.a.createElement("span",{className:"toggle ".concat(e.query.facets[e.facet.meta]?"toggle--open":"toggle--close")}))))}function l(e){const t=0<Object.keys(e.query.facets).length&&q.a.createElement("div",{className:"finder__filters__clear--desktop"},q.a.createElement(D.a,{clear:e.clear,query:e.query}));return q.a.createElement("div",{className:"finder__filters"},q.a.createElement("h2",{className:"finder__filters__heading"},q.a.createElement("span",{className:"finder__filters__heading__text"},q.a.createElement("span",{className:"far fa-sliders-h icon","aria-hidden":"true"})," ","Filter ".concat(e.config.summariseAs.plural)),q.a.createElement(D.a,{clear:e.clear,query:e.query})),q.a.createElement("fieldset",null,q.a.createElement("div",{className:"finder__filters__wrapper--filters"},e.config.facetLabels.map(t=>{if(!function(e,t){const a=Object.keys(t);return!e.dependency||!!(0<=a.indexOf(e.dependency)&&""!==t[e.dependency])}(t,e.query.facets))return null;switch(t.type){case"select":return q.a.createElement(A,{key:t.meta,facet:t,query:e.query,responseFacet:e.response&&e.response.facets?e.response.facets.filter(e=>e.name===t.funnelbackName):[],update:e.update,dependencies:e.config.facetLabels.filter(e=>e.dependency===t.meta)});case"toggle":return q.a.createElement(F,{key:t.meta,facet:t,query:e.query,responseFacet:e.response&&e.response.facets?e.response.facets.filter(e=>e.name===t.funnelbackName):[],update:e.update})}}),t,q.a.createElement("p",{className:"finder__filters__nofilters"},"No filters are valid for the current query."))))}function c(e){const[t,a]=Object(N.useState)(!1),[n,r]=Object(N.useState)({});let s=null;const l=()=>s;Object(N.useEffect)(()=>{n.activate||r(P()(l(),{initialFocus:l().querySelector(".finder__filters--mobile__apply"),onDeactivate:()=>a(!1),clickOutsideDeactivates:!0})),t?(n.activate&&n.activate(),Object(B.disableBodyScroll)(l().querySelector(".finder__filters--mobile__filters"))):(n.deactivate&&n.deactivate(),Object(B.enableBodyScroll)(l().querySelector(".finder__filters--mobile__filters")))},[t]);const c=e.response&&e.response.summary&&e.response.summary.totalMatching,i=1===c?e.summariseAs.singular:e.summariseAs.plural,o=c?"Show ".concat(c," ").concat(i):"Close",u=0<Object.keys(e.query.facets).length?q.a.createElement("span",null,"Filters"," ",q.a.createElement("span",{className:"finder__mobilefilters__toggle__filterNo"},"(",Object.keys(e.query.facets).length,")")):q.a.createElement("span",null,"Filter");return q.a.createElement("div",{className:"finder__filters--mobile","data-open":t,ref:e=>s=e},q.a.createElement("button",{type:"button",className:"finder__filters--mobile__toggle","aria-haspopup":!0,"aria-expanded":t,onClick:()=>a(!t),"data-filters-applied":0!==Object.keys(e.query.facets).length},q.a.createElement("span",null,q.a.createElement("span",{className:"far fa-sliders-h icon","aria-hidden":"true"})," ",u)),q.a.createElement("div",{className:"finder__filters--mobile__filters"},q.a.createElement("div",{className:"finder__filters--mobile__filters__content"},q.a.createElement(M,{config:e.config,query:e.query,response:e.response,update:e.update,clear:e.clear}))),q.a.createElement("div",{className:"wrapper--finder__filters--mobile__apply"},q.a.createElement("button",{type:"button",className:"finder__filters--mobile__apply","aria-expanded":t,onClick:()=>a(!t),disabled:e.updating},0===Object.keys(e.query.facets).length?null:q.a.createElement("span",{className:"far fa-chevron-left"}),q.a.createElement("span",{"aria-live":"polite"},e.updating?q.a.createElement(q.a.Fragment,null,q.a.createElement("span",{className:"fas fa-spinner fa-pulse icon","aria-hidden":"true"})," ",q.a.createElement("span",{className:"finder__filters--mobile__apply__text"},"Updating ",e.summariseAs.plural,"…")):q.a.createElement(q.a.Fragment,null,q.a.createElement("span",{className:"finder__filters--mobile__apply__text"},0===Object.keys(e.query.facets).length?"Close":o))))))}function i(e){const t=e.details.metaData.school&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-university icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"School:")," ",q.a.createElement("span",null,2<e.details.metaData.school.split("|").length?e.details.metaData.school.split("|").slice(0,-1).join(", ")+", and "+e.details.metaData.school.split("|").slice(-1):e.details.metaData.school.split("|").join(", and "))),a=e.details.metaData.department&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-building icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"Department:")," ",q.a.createElement("span",null,2<e.details.metaData.department.split("|").length?e.details.metaData.department.split("|").slice(0,-1).join(", ")+", and "+e.details.metaData.department.split("|").slice(-1):e.details.metaData.department.split("|").join(", and "))),n=e.details.metaData.related&&q.a.createElement("p",{className:"finder__results__card__description"},2<e.details.metaData.related.split("|").length?Object(I.p)(e.details.metaData.related).split("|").slice(0,-1).join(", ")+" and "+Object(I.p)(e.details.metaData.related).split("|").slice(-1):Object(I.p)(e.details.metaData.related).split("|").join(" and "));return q.a.createElement("li",{className:"finder__results__card finder__results__centre"},q.a.createElement("a",{href:e.details.clickTrackingUrl},q.a.createElement("div",{className:"finder__results__card__details"},q.a.createElement("h3",{className:"finder__results__card__heading underline-transition__title"},e.details.title),n,q.a.createElement("p",null,e.details.metaData.c&&e.details.metaData.c),t,a)))}function o(e){const t=e.details.metaData.department&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-building icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"Department:")," ",e.details.metaData.department),a=e.details.metaData.jobtitle&&q.a.createElement("p",{className:"finder__results__card__description"},e.details.metaData.jobtitle),n=e.details.metaData.email&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-envelope icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"Email:")," ",q.a.createElement("a",{href:"mailto:"+e.details.metaData.email},e.details.metaData.email)),r=e.details.metaData.telephone&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-phone fa-rotate-90 icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"Telephone:")," ",q.a.createElement("a",{href:"tel:"+e.details.metaData.telephone},e.details.metaData.friendlytelephone)),s=e.details.metaData.room&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-door-open icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"Room:")," ",e.details.metaData.room);return q.a.createElement("li",{className:"finder__results__card finder__results__contact"},q.a.createElement("div",{className:"finder__results__card__details"},q.a.createElement("h3",{className:"finder__results__card__heading"},q.a.createElement("span",null,e.details.title)),a,t,s,n,r))}function u(e){const t=e.details.metaData.type||e.details.metaData.level||null,a=e.details.metaData.code&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-graduation-cap icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"Course code:")," ",q.a.createElement("span",null,e.details.metaData.code)),n=e.details.metaData.qualification&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-award icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"Award:")," ",q.a.createElement("span",null,2<e.details.metaData.qualification.split("|").length?e.details.metaData.qualification.split("|").slice(0,-1).join(", ")+" or "+e.details.metaData.qualification.split("|").slice(-1):e.details.metaData.qualification.split("|").join(" or "))),r=e.details.metaData.duration&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fal fa-fw fa-clock icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"Duration:")," ",q.a.createElement("span",null,e.details.metaData.duration)),s=e.details.metaData.method&&e.query.facets.method&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-book-reader icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"Method of study:")," ",q.a.createElement("span",null,2<e.details.metaData.method.split("|").length?Object(I.p)(e.details.metaData.method).split("|").slice(0,-1).join(", ")+" or "+Object(I.p)(e.details.metaData.method).split("|").slice(-1):Object(I.p)(e.details.metaData.method).split("|").join(" or "))),l=e.details.metaData.location&&e.query.facets.location&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-map-marker-alt icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"Location:")," ",q.a.createElement("span",null,e.details.metaData.location)),c=e.details.metaData.school&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-university icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"School:")," ",q.a.createElement("span",null,e.details.metaData.school)),i="1"===e.details.metaData.clearing&&q.a.createElement("div",{className:"clearing_label"},q.a.createElement("p",null,"Available in clearing"));return q.a.createElement("li",{className:"finder__results__card finder__results__course"},q.a.createElement("a",{href:e.details.clickTrackingUrl},i,q.a.createElement("div",{className:"finder__results__card__details"},q.a.createElement("h3",{className:"finder__results__card__heading underline-transition__title"},e.query.query?K(e.details.title,e.query.query):e.details.title),q.a.createElement("p",{className:"finder__results__card__description"},e.query.query?K(t,e.query.query):t&&t),q.a.createElement("p",null,e.query.query?K(e.details.metaData.c,e.query.query):e.details.metaData.c&&e.details.metaData.c),c,n,r,a,s,l)))}function d(e){const t=e.details.metaData.school&&e.query.facets.school&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-university icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"School:")," ",q.a.createElement("span",null,2<e.details.metaData.school.split("|").length?e.details.metaData.school.split("|").slice(0,-1).join(", ")+", or "+e.details.metaData.school.split("|").slice(-1):e.details.metaData.school.split("|").join(", or "))),a="1"===e.details.metaData.hardship&&q.a.createElement("div",{className:"hardship-label"},q.a.createElement("p",null,"Hardship funding")),n=e.details.metaData.level&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-graduation-cap icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"Funding for:")," ",q.a.createElement("span",null,2<e.details.metaData.level.split("|").length?Object(I.p)(e.details.metaData.level).split("|").slice(0,-1).join(", ")+" or "+Object(I.p)(e.details.metaData.level).split("|").slice(-1):Object(I.p)(e.details.metaData.level).split("|").join(" or "))),r=e.details.metaData.feestatus&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"far fa-fw fa-globe-europe icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"Fee status:")," ",q.a.createElement("span",null,2<e.details.metaData.feestatus.split("|").length?e.details.metaData.feestatus.split("|").slice(0,-1).join(", ")+" or "+e.details.metaData.feestatus.split("|").slice(-1):e.details.metaData.feestatus.split("|").join(" or ")));return q.a.createElement("li",{className:"finder__results__card finder__results__funding"},q.a.createElement("a",{href:e.details.clickTrackingUrl},a,q.a.createElement("div",{className:"finder__results__card__details"},q.a.createElement("h3",{className:"finder__results__card__heading underline-transition__title"},e.details.title),q.a.createElement("p",{className:"finder__results__card__description"},e.details.metaData.type),q.a.createElement("p",null,e.details.metaData.c&&e.details.metaData.c),n,r,t)))}function m(e){const t=e.details.metaData.school&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-university icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"School:")," ",e.details.metaData.school),a=e.details.metaData.department&&q.a.createElement("p",{className:"finder__results__card__tag"},q.a.createElement("span",{className:"fas fa-fw fa-building icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"Department:")," ",e.details.metaData.department),n=e.details.metaData.thumbnail&&q.a.createElement("div",{className:"thumbnail__image-container"},q.a.createElement("img",{src:e.details.metaData.thumbnail,alt:"Photo of "+e.details.metaData.title}));return q.a.createElement("li",{className:"finder__results__card finder__results__profile"},q.a.createElement("a",{href:e.details.clickTrackingUrl},n,q.a.createElement("div",{className:"finder__results__card__details"},q.a.createElement("h3",{className:"finder__results__card__heading underline-transition__title"},q.a.createElement("span",null,e.details.title)),q.a.createElement("p",{className:"finder__results__card__description"},e.details.metaData.jobtitle),t,a)))}function p(e){switch(e.type){case"centre":return q.a.createElement(H,{details:e.details,query:e.query});case"contact":return q.a.createElement(J,{details:e.details,query:e.query});case"course":return q.a.createElement(W,{details:e.details,query:e.query});case"funding":return q.a.createElement(V,{details:e.details,query:e.query});case"profile":return q.a.createElement(Y,{details:e.details})}}function f(e){return q.a.createElement("li",{className:"finder__results__card finder__results__bestbet"},q.a.createElement("a",{href:e.details.clickTrackingUrl},q.a.createElement("div",{className:"finder__results__card__details"},q.a.createElement("h3",{className:"finder__results__card__heading underline-transition__title"},e.details.title),q.a.createElement("p",{className:"finder__results__card__description"},e.details.description))))}function _(e){return e.query.misspelling?q.a.createElement("p",{className:"finder__results__didyoumean"},"No ",e.summariseAs.plural," found for “",e.query.misspelling,"”. Searching instead for “",e.query.query,"”."):q.a.createElement("p",{className:"finder__results__didyoumean"},"Did you mean"," ",q.a.createElement("button",{type:"button",className:"finder__didyoumean__button",onClick:()=>{const t=e.query;t.query=e.response.spell.text.split(/\|/)[0].trim(),t.startRank=1,t.misspelling=null,t.interacted=!0,t.facets={},e.update.query(t),e.update.results(!e.update.updateState)}},"“",e.response.spell.text.split(/\|/)[0].trim(),"”"),"?")}function g(e){const t=1===e.totalMatching?e.summariseAs.singular:e.summariseAs.plural;return 0==e.totalMatching?q.a.createElement("div",{className:"finder__results__summary"},q.a.createElement("h2",{className:"finder__results__summary__heading"},"Your search did not match any ",e.summariseAs.plural,"."),q.a.createElement("p",null,"Suggestions:"),q.a.createElement("ul",null,q.a.createElement("li",null,"Make sure that all words are spelled correctly"),q.a.createElement("li",null,"Try different keywords"),q.a.createElement("li",null,"Try more general keywords"),q.a.createElement("li",null,"Try fewer keywords"),q.a.createElement("li",null,"Try fewer filters"),0<Object.keys(e.query.facets).length&&q.a.createElement("li",null,q.a.createElement("button",{type:"button",onClick:()=>{e.clear()}},"Reset filters")),e.query.query&&q.a.createElement("li",null,q.a.createElement("button",{type:"button",onClick:()=>{const t=e.query;t.query="",t.sortBy=e.config.sort,t.misspelling=null,t.startRank=1,t.interacted=!0,e.update.query(t),e.update.results(!e.update.updateState)}},"Reset query")))):q.a.createElement("div",{className:"finder__results__summary"},q.a.createElement("h2",{"aria-live":"polite",className:"finder__results__summary__heading"},e.query.query||0<Object.keys(e.query.facets).length?"Matching":"All"," ",t," ",q.a.createElement("span",null,"(showing"," ",e.totalMatching>e.numRanks&&q.a.createElement(q.a.Fragment,null,q.a.createElement("span",null,e.currStart),"–",q.a.createElement("span",null,e.currEnd)," of"," "),q.a.createElement("span",null,e.totalMatching)," ",t,e.query.query&&" for “".concat(e.query.query,"”"),")")))}function y(e){var t=Math.ceil;const a=t(e.totalMatching/e.numRanks),n=t(e.currStart/e.numRanks),r=[],s=t=>{const a=1+(t-1)*e.numRanks,n=e.query;n.startRank=a,n.misspelling=null,n.interacted=!0,e.update.query(n),e.update.results(!e.update.updateState)};r.push(q.a.createElement("button",{className:"pagination__controls__button--prev",key:"prev",type:"button",disabled:1===n,onClick:()=>{s(n-1)}},q.a.createElement("span",null,"Previous page")));for(let e=1;e<=a;e++){let t;switch(e-a){case 0:t="pagination__controls__element pagination__controls__button pagination__controls__button--last";break;case-1:t="pagination__controls__element pagination__controls__button pagination__controls__button--penultimate";break;default:t="pagination__controls__element pagination__controls__button"}r.push(q.a.createElement("button",{"aria-current":e===n?"page":null,"aria-expanded":e===n,"aria-label":"Open page ".concat(e),className:t,"data-page":e,"data-proximity":Math.abs(e-n),disabled:e===n,key:e,type:"button",onClick:()=>{s(e)}},q.a.createElement("span",null,e))),1===e?r.push(q.a.createElement("span",{key:"firstEllipsis",className:"pagination__controls__element pagination__controls__ellipsis pagination__controls__ellipsis--first"},q.a.createElement("span",null,"…"))):e===a-1&&r.push(q.a.createElement("span",{key:"lastEllipsis",className:"pagination__controls__element pagination__controls__ellipsis pagination__controls__ellipsis--last"},q.a.createElement("span",null,"…")))}return r.push(q.a.createElement("button",{className:"pagination__controls__button--next",key:"next",type:"button",disabled:n===a,onClick:()=>{s(n+1)}},q.a.createElement("span",null,"Next page"))),q.a.createElement("div",{className:"pagination__wrapper"},q.a.createElement("nav",{className:"pagination__controls","data-pagecount":a},r))}function b(e){const t=q.a.createElement("p",{className:"finder__results__updating","aria-live":"polite"},q.a.createElement("span",{className:"fas fa-spinner fa-pulse icon","aria-hidden":"true"})," ",q.a.createElement("span",null,"Updating ",e.summariseAs.plural,"…"));if(e.response){const a=q.a.createElement(X,{clear:e.clear,config:e.config,currEnd:e.response.summary.currEnd,currStart:e.response.summary.currStart,numRanks:e.response.summary.numRanks,query:e.query,summariseAs:e.summariseAs,totalMatching:e.response.summary.totalMatching,update:e.update}),n=(e.query.misspelling||e.response.spell)&&q.a.createElement(Q,{query:e.query,summariseAs:e.summariseAs,response:e.response,update:e.update}),r=e.response.summary.totalMatching>e.response.summary.numRanks&&q.a.createElement(Z,{currStart:e.response.summary.currStart,numRanks:e.response.summary.numRanks,query:e.query,totalMatching:e.response.summary.totalMatching,update:e.update}),s=e.updating?q.a.createElement(q.a.Fragment,null,t):q.a.createElement(q.a.Fragment,null,n,a,q.a.createElement("ol",{start:e.response.summary.currStart,className:"finder__results__list"},e.response.bestBets.map(e=>q.a.createElement(G,{details:e,key:e.docNum})),e.response.results.map(t=>q.a.createElement(z,{bestBet:!1,details:t,key:t.docNum,type:e.type,query:e.query}))),r);return q.a.createElement("div",{className:"finder__results"},s)}return q.a.createElement("div",{className:"finder__results"},t)}function E(e,t){return e&&0<e?e.map(e=>{const a={};return t.get("meta_".concat(e.meta,"_sand"))&&(a[e.meta]=t.get("meta_".concat(e.meta,"_sand"))),a}).reduce((e,t)=>Object.assign(e,t)):[]}function h(e){const t=new URLSearchParams(window.location.search),a={collection:e.config.collection,facets:E(e.config.facetLabels,t),fixedFacets:e.config.fixedFacets,interacted:!1,misspelling:null,numRanks:t.get("num_ranks")||e.config.numRanks,query:t.get("query")||"",sortBy:t.get("query")?null:t.get("sort")||e.config.sort,sortDirection:t.get("sortdirection")||e.config.sortDirection,startRank:t.get("start_rank")||1},n={bestBets:[],facets:[],results:[],spell:null,summary:{currEnd:0,currStart:0,numRanks:0,totalMatching:0}},[r,s]=Object(N.useState)(a),[l,c]=Object(N.useState)(n),[i,o]=Object(N.useState)(!0),[u,d]=Object(N.useState)({cancel:()=>{}}),[m,p]=Object(N.useState)(!1);Object(N.useEffect)(()=>{(function(e,t,a,n){if(window){const r=new URLSearchParams(window.location.search);""===e?r.delete("query"):r.set("query",e),1===t?r.delete("start_rank"):r.set("start_rank",t),n.forEach(e=>{a[e.meta]?r.set("meta_".concat(e.meta,"_sand"),a[e.meta]):r.delete("meta_".concat(e.meta,"_sand"))});const s=r.toString().length?"?":"";window.history.replaceState({},"","".concat(window.location.pathname).concat(s).concat(r.toString()))}})(r.query,r.startRank,r.facets,e.config.facetLabels),o(!0),r.interacted&&te.a.center(e.element.querySelector(".finder__results"),ae,-window.innerHeight/10),u.cancel();const[t,a]=Object(k.a)(r.collection,r.fixedFacets,r.query,r.sortBy,r.sortDirection,r.startRank,r.numRanks,r.facets);d({cancel:()=>{a.cancel()}}),t.then(e=>{if(c(e),o(!1),e.spell&&0===e.summary.totalMatching){const t=e.spell.text.split(/\|/)[0].trim(),a=r;a.misspelling=r.query,a.query=t,a.startRank=1,s(a),p(!m)}}).then(()=>{r.interacted&&te.a.center(e.element.querySelector(".finder__results h2"),ae)}).catch(()=>{c(n),o(!1)})},[m]);const f={query:e=>s(e),results:e=>p(e),updateState:m},_=()=>{const e=r;u.cancel(),e.facets={},e.startRank=1,e.misspelling=null,e.interacted=!0,s(e),p(!m)};return q.a.createElement("form",{className:0<e.config.facetLabels.length?"finder":"finder finder--nofilters",onSubmit:e=>{e.preventDefault()}},q.a.createElement(T,{config:e.config,query:r,update:f,updating:i}),0<e.config.facetLabels.length&&q.a.createElement(q.a.Fragment,null,q.a.createElement(U,{config:e.config,query:r,response:l,update:f,updating:i,summariseAs:e.config.summariseAs,clear:_}),q.a.createElement("div",{className:"finder__filters--desktop"},q.a.createElement(M,{config:e.config,query:r,response:l,update:f,clear:_}))),q.a.createElement($,{clear:_,config:e.config,query:r,response:l,summariseAs:e.config.summariseAs,type:e.config.resultCard,update:f,updating:i}))}a(4),a(21),a(58),a(16),a(31),a(13),a(30),a(3),a(5),a(59);var N=a(0),q=a.n(N),v=a(1),j=a.n(v),k=a(6),D=a(14);const w=5,[O,S,x,C,R]=[27,38,40,35,36];n.propTypes={config:j.a.object,query:j.a.object,update:j.a.object,updating:j.a.bool};var T=n;r.propTypes={facet:j.a.object,query:j.a.object,responseFacet:j.a.arrayOf(j.a.object),update:j.a.object,dependencies:j.a.arrayOf(j.a.object)};var A=r;s.propTypes={facet:j.a.object,query:j.a.object,responseFacet:j.a.arrayOf(j.a.object),update:j.a.object};var F=s;l.propTypes={config:j.a.object,query:j.a.object,response:j.a.object,update:j.a.object,clear:j.a.func};var M=l,L=a(22),P=a.n(L),B=a(23);c.propTypes={config:j.a.object,query:j.a.object,response:j.a.object,update:j.a.object,clear:j.a.func,updating:j.a.bool,summariseAs:j.a.object};var U=c,I=a(2);i.propTypes={details:j.a.object,query:j.a.object};var H=i;o.propTypes={details:j.a.object};var J=o,K=(e,t)=>t?e:q.a.createElement(q.a.Fragment,null,e.split(t).reduce((e,a,n)=>n?e.concat(q.a.createElement("span",{className:"highlightText",key:t+a},t),a):[a],[]));u.propTypes={details:j.a.object,query:j.a.object};var W=u;d.propTypes={details:j.a.object,query:j.a.object};var V=d;m.propTypes={details:j.a.object};var Y=m;p.propTypes={details:j.a.object,query:j.a.object,type:j.a.string};var z=p;f.propTypes={details:j.a.object};var G=f;_.propTypes={query:j.a.object,response:j.a.object,summariseAs:j.a.object,update:j.a.object};var Q=_;g.propTypes={clear:j.a.func,config:j.a.object,currEnd:j.a.number,currStart:j.a.number,numRanks:j.a.number,query:j.a.object,summariseAs:j.a.object,totalMatching:j.a.number,update:j.a.object};var X=g;y.propTypes={currStart:j.a.number,query:j.a.object,numRanks:j.a.number,totalMatching:j.a.number,update:j.a.object};var Z=y;b.propTypes={clear:j.a.func,query:j.a.object,response:j.a.object,summariseAs:j.a.object,type:j.a.string,update:j.a.object,updating:j.a.bool};var $=b,ee=a(7),te=a.n(ee);const ae=Object(I.l)()?0:999;h.propTypes={config:j.a.object,element:j.a.object},t.a=h},6:function(e,t,a){"use strict";function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t,a=1;a<arguments.length;a++)t=null==arguments[a]?{}:arguments[a],a%2?n(Object(t),!0).forEach((function(a){s(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}));return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t,a,n,s,l,c,i){const o={};t.forEach(e=>{o["meta_".concat(e.meta,"_sand")]=e.value});const u={};Object.keys(i).forEach(e=>u["meta_".concat(e,"_sand")]=i[e]);const m=d.a.CancelToken.source(),y={baseURL:_,cancelToken:m.token,httpsAgent:new p.a.Agent({keepAlive:!0}),url:g,timeout:b,params:r({},o,{},u,{collection:e,num_ranks:c,query:a,sort:n?"".concat("desc"===s?"d":"").concat(n):null,start_rank:l})};return[Object(f.b)(y),m]}function c(e,t){const a=d.a.CancelToken.source(),n={baseURL:_,cancelToken:a.token,url:y,timeout:b,params:{collection:e,partial_query:t}};return[Object(f.b)(n),a]}function i(e){return Object(f.b)({timeout:b,url:e})}a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return i}));var o=a(3),u=(a.n(o),a(8)),d=a.n(u),m=a(40),p=a.n(m),f=a(2);const _="https://web2020.city.ac.uk/web-services",g="/funnelback-find",y="/funnelback-suggest",b=3e4},76:function(){},77:function(){}});