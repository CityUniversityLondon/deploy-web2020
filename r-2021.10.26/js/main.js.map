{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/util.js","webpack:///./src/patterns/accordion/accordion.js","webpack:///./src/patterns/dropdown-filter/dropdown-filter.js","webpack:///./src/patterns/event-form/event-form.js","webpack:///./src/patterns/feedback/feedback.js","webpack:///./src/patterns/key-information/key-information--lifelong-learning.js","webpack:///./src/patterns/link-finder/link-finder.js","webpack:///./src/patterns/menu/menu-formatters.js","webpack:///./src/patterns/menu/menu.js","webpack:///./src/patterns/modal/modal.js","webpack:///./src/patterns/animation/number-animation/number-animation.js","webpack:///./src/patterns/pagination/pagination.js","webpack:///./src/patterns/navigation/navigation-primary.js","webpack:///./src/patterns/show-more/show-more.js","webpack:///./src/patterns/slider/slider.js","webpack:///./src/patterns/tabs/tabs.js","webpack:///./src/patterns/tooltip/image-credit/image-credit.js","webpack:///./src/patterns/video/video.js","webpack:///./src/patterns/devcorate/devcorate.js","webpack:///./src/main.js","webpack:///./src/patterns/charts/charts.js","webpack:///./src/patterns/image-carousel/carousel-constructor.js","webpack:///./src/aria-attributes.js","webpack:///./src/patterns/back-to-top/back-to-top.js","webpack:///./src/patterns/image-carousel/image-carousel.js","webpack:///./src/patterns/cms-editor-warning/cms-editor-warning.js","webpack:///./src/patterns/animation/content-fade-in/content-fade-in.js","webpack:///./src/patterns/animation/content-separator/content-separator.js","webpack:///./src/patterns/animation/content-slide-up/content-slide-up.js","webpack:///./src/patterns/find-us/find-us.js","webpack:///./src/patterns/image-carousel/default-carousel/default-carousel-constructor.js","webpack:///./src/patterns/image-carousel/default-carousel/default-carousel.js","webpack:///./src/patterns/animation/image-expand/image-expand.js","webpack:///./src/action-on-scroll.js","webpack:///./src/patterns/paginated-list/paginated-list.js","webpack:///./src/patterns/animation/particle/particle.js","webpack:///./src/how-to-apply--research.js","webpack:///./src/patterns/navigation/navigation-secondary.js","webpack:///./src/patterns/animation/svg-path-animation/svg-path-animation.js","webpack:///./src/patterns.js","webpack:///./src/patterns/tooltip/social-share/social-share.js","webpack:///./src/patterns/tabs/prepareAccordionTabs.js"],"names":["s","r","matchFn","removePartials","elem","window","i","parameters","parameterString","parameter","Object","key","nonInteractionHit","children","screen","array","obj","ua","msie","parseInt","rv","edge","el","document","attributes","att","response","axios","gaEvent","e","dateTime","date","lastDigit","day","daySuffix","partialMatchFn","fullMatchFn","heading","aria","element","button","accordionSection","open","toBool","section","once","setupTransition","setTimeout","setSection","sectionHeight","height","sections","Array","headings","verticallyInWindow","scroll","firstItemVisible","showAll","itemsArray","items","item","dataGroup","dropdownFilter","listItems","listItem","targetListItem","otherListItems","o","opening","form","doneTarget","formHeight","nextButton","keyInformation","prevButton","loadMoreButton","startDates","current","currentPage","direction","next","updateButtonState","previous","node","anchor","navigationItem","sectionText","textSpan","rootClass","text","navigation","link","subNavigation","linkText","textWrapper","controlsWrapper","navigationItemBtn","iconSpan","buttonClassName","appendAll","setNavigationItemButtonDetails","expanded","trap","veil","setMenu","slider","parent","type","closeBtn","createHTMLElement","label","val","dialog","bodyWrapper","wrapperWrapper","dialogStrapline","dialogTitle","dialogBody","dialogArray","main","closeDialog","modalInner","modal","createFocusTrap","clickOutsideDeactivates","trapFocus","position","buttonWrapper","buttonPrev","controlButton","buttonNext","pos","addDialogEvent","dialogContent","createControl","nextState","buttonLabel","buttonIcon","buttonLabelWrapper","nested","widget","t","numberContainer","isFloat","value","format","startTime","startValue","lastValue","f","first","finish","v","Math","k","selected","pagesArray","pages","controlsArray","controls","page","toggleButton","closeAll","buttonNumber","Number","setProximity","toggleNextPrev","focus","scrollTo","class","newPageFn","pageNumber","btn","btnSpan","openPage","createNextPrevOpenPage","buttonSpan","totalPages","wrapper","prev","pageButtons","summary","pageCount","createToggleNextPrev","ellipsisFirst","ellipsisFirstInner","ellipsisLast","ellipsisLastInner","removeClass","prepareNextPrev","pageButton","createPageButton","summaryText","itemCount","setSummaryText","showMoreButtonDiv","showMoreButtonSpan","showMoreButton","icon","showMoreText","dataTitle","showMoreElement","srTextElement","firstHeadingElement","showMore","contentElement","showMoreAnchorLinkText","lock","move","slides","liElement","ulElement","d","currentSlide","prepareSlides","responsive","optimised","screenSize","adjustment","slidesChildren","reverseOptimisation","responsiveOptimisation","slide","nextButtonSpan","prevButtonSpan","indicator","divider","dividerVisible","dividerScreenReader","className","handleNextPrevClick","dotButtons","dot","updateDotButtonState","x0","unify","locked","sliderType","dx","tx","getComputedStyle","handleDotClick","getElementIndex","tabs","newTab","linkItems","panels","linkItem","panel","selectTab","controllerBtn","video","videoEl","parametersToObject","objectToParameters","tryCatch","pattern","launchQuery","activeDescendant","atomic","autoComplete","busy","checked","colCount","colIndex","colSpan","describedBy","details","disabled","dropEffect","errorMessage","flowTo","grabbed","hasPopup","hidden","invalid","keyShortcuts","labelledBy","level","live","multiLine","multiSelectable","orientation","owns","placeholder","posInset","pressed","readOnly","relevant","required","roleDescription","rowCount","rowIndex","rowSpan","setSize","sort","valueMax","valueMin","valueNow","valueText","headingClassName","headingTextClassName","headingIconClassName","bodyClassName","tenthOfASecond","scrollDuration","reduceMotion","toggleOpen","accordion","defaultOpen","allowSingle","content","viewPortHeight","scrollPos","backToTopAnchor","backToTop","progressPath","pathLength","updateProgress","positionOnScreen","showAnchor","ie","detectIE","constructor","this","config","options","sliderTranslateCoOr","numIndicator","index","activeSlider","a","toArray","sliders","toogleNextBtn","nextBtn","tooglePrevBtn","prevBtn","moveSlide","sl","checkEventType","sliderWidthIndex","totalSliderWidth","sliderWidth","defaultCarousel","activeThumbnail","drag","p","animateSlider","stopDrag","totalWidth","style","lr","init","lazyImages","slice","call","querySelectorAll","lazyImageObserver","IntersectionObserver","entries","entry","lazyImage","sourceSet","_C","querySelector","numInd","numIndActiveSl","numIndSeparator","numbIndSlLength","buttonsWrap","prevBtnWrap","nextBtnWrap","bind","appendChild","sliderLength","c","charts","chartCollection","singleBarTotals","singleBarTotal","chart","collectionMaxValue","setCollectionMaxValue","segmentWidths","chartCollectionUnits","singleBarTotalEls","singleBarSegmentEls","singleBarSegment","barWidth","segmentWidth","relativeWidth","segments","segmentRelativeWidths","segment","largestSegmentWidth","widestSegment","widestSegmentLabel","buildBars","warningClass","buttonClass","warnings","w","isMobile","contentFadein","elemOffset","screenPos","contentSeparatorContainer","contentSlideup","elemOffsetTop","parentElemHeight","dataGroupElement","parentElement","selectBox","selectWrapper","labelFor","labelValue","labelEl","noSelection","b","itemsLength","showAllOption","defaultItemOverridePosition","lastPositionOriginal","dataValue","dataName","option","select","eventInfo","formActual","buttonText","closeButtonText","closeButton","closeButtonSpan","closeButtonIcon","closeButtonEnd","closeButtonEndSpan","closeButtonEndIcon","wrapperHeading","feedbackPage","questionText","directFeedbackWrapper","directFeedbackForm","directFeedbackFieldset","questionLegend","yesButton","noButton","sendFeedback","message","messageText","container","messagePrefix","messageSuffix","markersArray","id","initialMapOverlay","cityLayers","found","marker","clearOverlays","infoWindow","map","callerId","caller","location","hashChange","l","xml","markerConfig","searchTags","searchIds","$self","google","parseFloat","listId","html","daySlot","timeSlot","string","hours","match","animation","DROP","updateHash","toggleLocationPanel","closeAccordions","clearSearchString","name","clearsSearchSuggestions","searchString","searchBox","createListWrapper","createList","list","clearSearchButton","counter","tag","textContent","searchQueryIdFind","searchItemFocus","collectionNum","keyCode","focusState","searchSuggestions","mapContainer","status","clearSearch","listWrapper","dataSrc","mapOptions","zoom","mapTypeId","mapTypeControlOptions","DROPDOWN_MENU","navigationControl","maxWidth","bigMarkersArray","bigBuildingsArray","buildingsObj","buildings","toggler","zoomLevel","libraries","accommodation","lectureTheatres","studentCentre","sports","computerLabs","getAttribute","from","mapControls","targetElement","evt","lat","lng","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","geodesic","xhttp","parseXml","loadXml","super","inital","self","thumbnails","edgeThumbnailsObserver","rootMargin","threshold","thumbnailsObserver","checkIntersectionObserver","onClickThunbnail","thumbindex","thumbnail","currentThumbnailSpan","listThumbnail","li","translateThumbnails","thumbnailLi","thumbnailLength","translate","galleria","width","hidNumInd","dc","image","loadMoreBatch","startDateList","loadMoreButtonSpan","hiddenDates","firstElement","startDate","prepareStartDates","anchors","fileTypes","pdf","docx","doc","xlsx","xls","prependIcon","anchorText","findDocumentLinks","findExternalLink","hierarchyClassName","currentClassName","contentHeaderClassName","controlsClassName","level1ClassName","buttonTextClassName","menu","initialFocus","isVisible","onDeactivate","createMenuToggle","prepareNavigation","listenForNavigationToggles","escapeKey","dialogTopic","listButton","listButtonSpan","listBody","listHeader","customHeader","header","keepFormat","shortName","title","createDialog","body","shortname","DURATION","lazyNumbers","elm","startStr","start","numberStr","initNumberAnimation","observer","actionOnScrollAction","action","n","actionOnScroll","pageClassName","wrapperClassName","controlsElementClassName","ellipsisClassName","summaryClassName","nextPrevRegEx","maximumButtonsToDisplay","minimumPagesRequiringEllipsis","minimumPage","maximumPage","pageSizeSetting","pageSize","reversed","pageItems","newList","addPagination","particlesJS","particles","number","color","shape","stroke","polygon","nb_sides","src","opacity","anim","speed","opacity_min","sync","size","size_min","line_linked","distance","out_mode","attract","rotateX","rotateY","interactivity","detect_on","events","onhover","mode","onclick","resize","modes","grab","bubble","duration","repulse","push","particles_nb","remove","retina_detect","classNameSpecific","topLevelClassName","openCloseTextClassName","navigationTextClassName","headerClassName","openText","closeText","navigationText","tabKey","buttons","topLevels","buttonDiv","srOpenCloseSpan","srNavigationSpan","toggleSection","prepareTopLevel","prepareLowerLevels","currentPageWrapper","prepareHeaders","closeButtonWrapper","closeButtonDiv","firstButton","restButtons","previousSection","thisSectionButton","previousSectionButton","lastNavigationAnchor","togglePreviousSection","setupTabPrevious","restSectionsCloseButtons","nextSectionButton","toggleNextSection","applyAnchor","cta","applyAnchorHref","applyCta","showMoreTextElements","createShowMoreButton","arrowLeft","arrowRight","launchArrow","launchDot","paths","animateSvg","length","path","panelClassName","contentClassName","linksClassName","endKey","homeKey","arrowUp","arrowDown","panelElements","preparePanels","prepareLinks","currentTab","currentTabLI","display","picture","authorText","authorUrl","sourceText","sourceUrl","licenceText","licenceUrl","spanIcon","spanText","author","source","licence","copy","url","textlink","textnode","range","msg","playInstance","toggleController","loopVideo","controllerIcon","promise","createController","prepareAccordionTabs","numberOfTabs","accordionHeading","accordionWrapper","test","navigator","root","potential","accordionizeTabs","patterns","devcorate"],"mappings":"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","file":"main.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t9: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([139,1,0,4,3,2]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","/**\n * Useful utility functions\n *\n * @module util\n * @author Web Development\n * @copyright City, University of London 2018-2020\n */\n\nimport axios from 'axios';\nimport React from 'react';\n\n/**\n * Turns string boolean into real boolean.\n *\n * @param {string} s - A string that may be 'true'.\n * @returns {boolean} True if 'true'.\n */\nexport function toBool(s) {\n    return s === 'true' ? true : false;\n}\n\nconst partialMatchFn = (m) => (s) => s.indexOf(m) < 0,\n    fullMatchFn = (m) => (s) => s !== m;\n\n/**\n * Remove a class name from an HTML element.\n *\n * @param {HTMLElement} elem - An HTML element.\n * @param {string} className - A string representing the class to remove.\n * @param {boolean} [removePartials] - If true, remove partially matching classes.\n */\nexport function removeClass(elem, className, removePartials) {\n    const matchFn = removePartials\n        ? partialMatchFn(className)\n        : fullMatchFn(className);\n    elem.className = elem.className\n        .split(/\\s+/)\n        .filter((s) => matchFn(s))\n        .join(' ');\n}\n\n/**\n * Detect whether reduced motion is enabled.\n *\n * If it is, you should shortcut animations, disable autoplay elements, avoid\n * smooth scrolling in favour of jump scrolling, etc.\n *\n * Currently unsupported by Chrome, but works in Safari and Firefox.\n *\n * @returns {boolean} Boolean indicating that the reduce motion media query matches.\n */\nexport function reduceMotion() {\n    const reducedMotionQuery = window.matchMedia(\n        '(prefers-reduced-motion: reduce)'\n    );\n    return reducedMotionQuery.matches ? true : false;\n}\n\n/**\n * Predicate testing whether an element is currently visible, as opposed to\n * displayed: none; or similar. Doesn't necessarily mean it's visible in the\n * window.\n *\n * @param {HTMLElement} elem - An HTML element.\n * @returns {boolean} - Is it visible?\n */\nexport function isVisible(elem) {\n    return elem.offsetHeight !== 0 && elem.offsetWidth !== 0 ? true : false;\n}\n\n/**\n * Predicate testing whether an element is positioned in the window.\n *\n *\n * @param {HTMLElement} elem - An HTML element.\n * @returns {boolean} - Is it onscreen?\n */\nexport function verticallyInWindow(elem) {\n    return elem.getBoundingClientRect().top >= 0 &&\n        elem.getBoundingClientRect().top <= window.innerHeight\n        ? true\n        : false;\n}\n\n/**\n * Turn a query string into an object.\n *\n * @param {string} parameterString - An HTML query string.\n * @returns {object} An object containing the parameters.\n */\nexport function parametersToObject(parameterString) {\n    const parameters = {};\n    parameterString\n        .substr(1)\n        .split('&')\n        .forEach((parameter) => {\n            const [k, v] = parameter.split('=');\n            parameters[k] = v;\n        });\n    return parameters;\n}\n\n/**\n * Turn an object into a query string.\n *\n * @param {object} parameterObj - An object containing the parameters and their values.\n * @returns {string} A string of the parameters.\n */\nexport function objectToParameters(parameterObj) {\n    if (Object.keys(parameterObj).length > 0) {\n        let parameters = '?';\n        for (const key in parameterObj) {\n            parameters.length !== 1 && (parameters += '&');\n            parameters += key + '=' + parameterObj[key];\n        }\n        return parameters;\n    } else {\n        return '';\n    }\n}\n\n/**\n * Track a Google Analytics event.\n *\n * @param {string} event - The event key for Tag Manager.\n * @param {string} eventCategory - The event category.\n * @param {string} eventAction - The event action.\n * @param {string} [eventLabel] - The event label.\n * @param {number} [eventValue] - The event value.\n * @param {boolean} [nonInteractionHit] - Does this count as interacting with the page?\n */\nexport function gaEvent(\n    event,\n    eventCategory,\n    eventAction,\n    eventLabel,\n    eventValue,\n    nonInteractionHit\n) {\n    window.dataLayer = window.dataLayer || [];\n    window.dataLayer.push({\n        event: event,\n        eventCategory: eventCategory,\n        eventAction: eventAction,\n        eventLabel: eventLabel,\n        eventValue: eventValue,\n        nonInteractionHit: nonInteractionHit,\n    });\n}\n\n/**\n * Append an array of elements to an element.\n *\n * @param {HTMLElement} elem - The parent element.\n * @param {HTMLElement[]} children - An array of elements to append to it.\n */\nexport function appendAll(elem, children) {\n    children.forEach((child) => elem.appendChild(child));\n}\n\n/**\n * Extract number from string, e.g. return '123' from string 'a1b2c3'.\n *\n * @param {string} string - String\n */\nexport function numberFromString(string) {\n    let number = string.replace(/\\D/g, '');\n    return number;\n}\n\n/**\n * Calculates viewport width to determinte if using mobile\n * @param {number} number - width of screen, with default value = 432.\n *\n */\nexport function isMobile(screen = 432) {\n    const viewPortWidth = window.innerWidth;\n    const mobileScreen = screen;\n\n    if (viewPortWidth < mobileScreen) {\n        return true;\n    }\n}\n\n/**\n *\n * Turn DOM elements to array e.g return [li, li, li] from DOM element selecting 'li' <ul><li></li><li></li><li></li></ul>\n *\n * @param {object} object - Object\n */\n\nexport function toArray(obj) {\n    let array = [];\n    // iterate backwards ensuring that length is an UInt32\n    for (let i = obj.length >>> 0; i--; ) {\n        array[i] = obj[i];\n    }\n    return array;\n}\n\n/**\n * Check browser user agent is IE or edge and return version number\n */\nexport function detectIE() {\n    const ua = window.navigator.userAgent,\n        versionLength = 10,\n        msie = ua.indexOf('MSIE '),\n        msieVersionOffset = 5;\n\n    if (msie > 0) {\n        // IE 10 or older => return version number\n        return parseInt(\n            ua.substring(msie + msieVersionOffset, ua.indexOf('.', msie)),\n            versionLength\n        );\n    }\n\n    const trident = ua.indexOf('Trident/'),\n        tridentVersionOffset = 3;\n\n    if (trident > 0) {\n        // IE 11 => return version number\n        let rv = ua.indexOf('rv:');\n        return parseInt(\n            ua.substring(rv + tridentVersionOffset, ua.indexOf('.', rv)),\n            versionLength\n        );\n    }\n\n    const edge = ua.indexOf('Edge/'),\n        edgeVersionOffset = 5;\n\n    if (edge > 0) {\n        // Edge (IE 12+) => return version number\n        return parseInt(\n            ua.substring(edge + edgeVersionOffset, ua.indexOf('.', edge)),\n            versionLength\n        );\n    }\n\n    // other browser\n    return false;\n}\n\n/**\n * Check if browser supports IntersectionObserver API\n *\n * @returns {Boolean} -\n */\nexport function checkIntersectionObserver() {\n    if (\n        'IntersectionObserver' in window &&\n        'IntersectionObserverEntry' in window &&\n        'intersectionRatio' in window.IntersectionObserverEntry.prototype\n    ) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n/**\n * Create elements containing classes, content and any other attributes\n *\n * @param {string} type - Type of element to create, e.g. \"div\", \"button\".\n * @param {array} attributes - Array of objects specifying which attributes to assign to the element i.e. {label : \"class\", val : \"container\"}\n */\nexport function createHTMLElement(type, attributes) {\n    let el = document.createElement(type);\n    attributes.map(function (att) {\n        att.label === 'content'\n            ? el.appendChild(document.createTextNode(att.val))\n            : att.label === 'html'\n            ? (el.innerHTML = att.val)\n            : el.setAttribute(att.label, att.val);\n    });\n    return el;\n}\n\nexport function uppercaseFirstLetterLowercaseRest(s) {\n    return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();\n}\n\n/**\n * Asynchronous request to Funnelback web service.\n *\n * @param {object} config An axios configuration object.\n * @return {Promise} - A promise of a Funnelback response.\n */\nexport function axiosRequest(config) {\n    const httpOK = 200;\n\n    return axios(config)\n        .then((response) => {\n            if (httpOK === response.status) {\n                return response.data;\n            } else {\n                throw `Bad response: ${response.status}`;\n            }\n        })\n        .catch((e) => {\n            if (!axios.isCancel(e)) {\n                gaEvent(\n                    'jsError',\n                    'JavaScript error',\n                    `Line ${e.lineNumber}  ${e.message}`,\n                    `axiosRequest ${e.fileName} (${window.location})`,\n                    true\n                );\n            }\n        });\n}\n\n/**\n * Returns the correct English suffix for a number.\n *\n * @param  {number} day - The day of the month.\n * @returns {string} The correct suffix.\n */\nfunction daySuffix(day) {\n    const eleventh = 11,\n        thirteenth = 13,\n        lastDigit = day.toString().slice(-1);\n\n    return day >= eleventh || day <= thirteenth\n        ? 'th'\n        : lastDigit === '1'\n        ? 'st'\n        : lastDigit === '2'\n        ? 'nd'\n        : lastDigit === '3'\n        ? 'rd'\n        : 'th';\n}\n\n/**\n * Format a date for React.\n *\n * @param {Date} date - A date object.\n * @returns {ReactFragment} The formatted date.\n */\nexport function formatReactDate(date) {\n    const months = [\n            'January',\n            'February',\n            'March',\n            'April',\n            'May',\n            'June',\n            'July',\n            'August',\n            'September',\n            'October',\n            'November',\n            'December',\n        ],\n        days = [\n            'Sunday',\n            'Monday',\n            'Tuesday',\n            'Wednesday',\n            'Thursday',\n            'Friday',\n            'Saturday',\n        ];\n\n    return (\n        <time dateTime={date.toISOString().split('T')[0]}>\n            {days[date.getUTCDay()]}, {date.getUTCDate()}\n            <sup>{daySuffix(date.getUTCDate())}</sup>{' '}\n            {months[date.getUTCMonth()]} {date.getUTCFullYear()}\n        </time>\n    );\n}\n\n/**\n * Array slicer\n *\n * @param {array} arr - array to be split up into subarrays\n * @param {number} len - max number items that goes into each subarray\n */\nexport function arraySlicer(arr, len) {\n    let newArray = [],\n        i = 0,\n        n = arr.length;\n\n    while (i < n) {\n        newArray.push(arr.slice(i, (i += len)));\n    }\n    return newArray;\n}\n","import {\n    appendAll,\n    reduceMotion,\n    removeClass,\n    toBool,\n    verticallyInWindow,\n} from '../../util';\n\nimport aria from '../../aria-attributes';\n/**\n * Accordion\n *\n * @module patterns/accordion/accordion\n * @author Web Development\n * @copyright City, University of London 2018-2019\n */\nimport scroll from 'zenscroll';\n\nconst className = 'accordion',\n    headingClassName = className + '__heading',\n    headingTextClassName = headingClassName + '__text',\n    headingIconClassName = headingClassName + '__indicator fal',\n    bodyClassName = className + '__body',\n    oneSecond = 1000,\n    tenthOfASecond = 100,\n    scrollDuration = reduceMotion() ? 0 : oneSecond,\n    scrollTo = true;\n\n/**\n * Sets a heading and the button nested within to be open or closed.\n *\n * @param {HTMLHeadingElement} heading - An accordion heading.\n * @param {boolean} open - Set this section to be open?\n */\nfunction setSection(heading, open) {\n    heading.dataset.open = open;\n    heading.firstElementChild.setAttribute(aria.expanded, open);\n}\n\n/**\n * Open a section, calculate its height, then close it again.\n *\n * With no transition, this is essentially invisible to the user.\n *\n * @param {HTMLHeadingElement} heading - An accordion heading.\n * @return {string} The pixel height of the section when open.\n */\nfunction calculateAccordionBodyHeight(heading) {\n    const section = heading.nextElementSibling;\n\n    setSection(heading, true);\n    section.dataset.closed = 'false';\n    const height = section.offsetHeight + 'px';\n\n    setSection(heading, false);\n    section.dataset.closed = 'true';\n\n    return height;\n}\n\n/**\n * Set style properties for transition.\n *\n * @param {HTMLElement} element - The section to transition.\n * @param {string} initialHeight - The initial height from which to transition.\n */\nfunction setupTransition(element, initialHeight) {\n    element.style.height = initialHeight;\n    element.dataset.closed = 'false';\n    return true;\n}\n\n/**\n * Cleanup after transition.\n *\n * @param {HTMLElement} accordionSection - The section that transitioned.\n */\nfunction cleanupTransition(section) {\n    const open = toBool(section.previousElementSibling.dataset.open);\n    section.style.height = null;\n    section.dataset.closed = open ? 'false' : 'true';\n}\n\n/**\n * Respond to button clicks - open if closed, close if open.\n *\n * If opening, will also push the heading ID into the history, so C+Ping the URL\n * will open the most recently viewed section. Closing a section removes any\n * hash.\n *\n * @param {HTMLButtonElement} button - The button that was clicked.\n * @param {HTMLElement[]} headings - All headings in this accordion.\n * @param {boolean} [toggleOpen] - Should other accordion sections close? Default to false.\n */\nfunction buttonClick(button, headings, toggleOpen) {\n    const heading = button.parentNode,\n        accordionSection = heading.nextElementSibling;\n\n    /**\n     * After we've transitioned the opening/closing, we want to revert to\n     * letting the CSS size the element. Add a listener to do this that will\n     * self-destruct after running.\n     */\n    accordionSection.addEventListener(\n        'transitionend',\n        () => cleanupTransition(accordionSection),\n        { capture: true, once: true }\n    );\n\n    if (toBool(button.getAttribute(aria.expanded))) {\n        // Starting height is the current height\n        setupTransition(accordionSection, accordionSection.offsetHeight + 'px');\n        // setTimeout lets the DOM recalculate before we continue, so the transition will fire\n        setTimeout(() => {\n            accordionSection.style.height = '0px';\n        }, tenthOfASecond);\n\n        setSection(heading, false);\n    } else {\n        // Calclulate and save how big we're transitioning to\n        const sectionHeight = calculateAccordionBodyHeight(heading);\n        // Starting height is 0\n        setupTransition(accordionSection, '0px');\n        // setTimeout lets the DOM recalculate before we continue, so the transition will fire\n        setTimeout(() => {\n            accordionSection.style.height = sectionHeight;\n        }, tenthOfASecond);\n\n        if (toggleOpen) {\n            const sections = Array.from(\n                heading.parentNode.parentNode.querySelectorAll(\n                    `#${heading.parentElement.id} > .${bodyClassName}`\n                )\n            );\n            headings.forEach((heading) => setSection(heading, false));\n            sections\n                .filter((section) => section.id !== accordionSection.id)\n                .forEach((section) => {\n                    section.dataset.closed = 'true';\n                });\n        }\n        setSection(heading, true);\n\n        if (\n            scrollTo &&\n            !(\n                verticallyInWindow(heading) &&\n                verticallyInWindow(accordionSection)\n            )\n        ) {\n            scroll.to(heading, scrollDuration);\n        }\n    }\n}\n\n/**\n * Create a button from the text content of a heading.\n *\n * @param {HTMLElement} heading - An accordion heading.\n * @returns {HTMLButtonElement} An accordion section button.\n */\nfunction buttonFromHeading(heading) {\n    const button = document.createElement('button'),\n        // Chrome can't apply grid layout to buttons, need to wrap contents\n        wrapper = document.createElement('div'),\n        textSpan = document.createElement('span'),\n        iconSpan = document.createElement('span');\n\n    textSpan.className = headingTextClassName;\n    iconSpan.className = headingIconClassName;\n    iconSpan.setAttribute(aria.hidden, true);\n    button.setAttribute('type', 'button');\n\n    textSpan.appendChild(document.createTextNode(heading.textContent));\n    appendAll(wrapper, [textSpan, iconSpan]);\n    button.appendChild(wrapper);\n\n    return button;\n}\n\n/**\n * Transform an element with the accordion class into an accordion.\n *\n * accordions should contain an even number of children, alternating headings\n * and content elements. The element type is unimportant - headings should have\n * the headingClassName - but headings should contain only text, no other\n * children.\n *\n * e.g.\n *\n * <div class=\"accordion\">\n * <h2 class=\"accordion__heading\">Heading 1</h2>\n * <div>Content 1</div>\n * <h2 class=\"accordion__heading\">Heading 2</h2>\n * <div>Content 2</div>\n * </div>\n *\n * @param {HTMLElement} accordion - An HTML element with the accordion class.\n */\nfunction launchAccordion(accordion) {\n    const toggleOpen = toBool(accordion.dataset.toggleopen),\n        defaultOpen = toBool(accordion.dataset.defaultopen),\n        allowSingle = toBool(accordion.dataset.allowsingle),\n        headings = Array.from(\n            accordion.parentNode.querySelectorAll(\n                `#${accordion.id} > .${headingClassName}`\n            )\n        );\n\n    let idLinked = false;\n\n    if (!(allowSingle || headings.length > 1)) {\n        /**\n         * not enough content to accordion\n         */\n        removeClass(accordion, className, false);\n        return;\n    }\n\n    headings.forEach((heading) => {\n        const content = heading.nextElementSibling,\n            button = buttonFromHeading(heading);\n\n        content.setAttribute(aria.labelledBy, heading.id);\n        content.setAttribute('role', 'region');\n        heading.replaceChild(button, heading.firstChild);\n\n        setSection(heading, false);\n        heading.nextElementSibling.dataset.closed = 'true';\n\n        button.addEventListener(\n            'click',\n            () => buttonClick(button, headings, toggleOpen),\n            true\n        );\n    });\n\n    /* Show first item of accordion, if accordion is set to default open,\n           and we haven't linked to a specific section */\n    if (defaultOpen && !idLinked) {\n        setSection(headings[0], true);\n        headings[0].nextElementSibling.dataset.closed = 'false';\n    }\n}\n\nexport default {\n    launchFn: launchAccordion,\n    launchQuery: `.${className}`,\n};\n","/**\n * Dropdown filter\n *\n * @module patterns/dropdown-filter/dropdown-filter\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nconst className = 'dropdown-filter';\nlet dataGroupElement = '';\nlet showAll = '';\n\n/**\n * Entry function: loops through and hides list items, sets up event listener on\n * child select box\n *\n * @param {HTMLElement} element: the dropdown div containing all elements\n */\nfunction prepareDropdown(element) {\n    // Only get direct children\n    const listItems = element.querySelectorAll('ul.data-group > li'),\n        firstItemVisible = element.dataset.firstItemShow;\n\n    // Check if all items should be displayed on load\n    showAll = element.dataset.displayAll;\n\n    // Hide list items\n    hideListItems(listItems, firstItemVisible, showAll);\n\n    // Insert the select box to toggle items\n    insertSelect(listItems, element, firstItemVisible, showAll);\n\n    // Display list items on select change\n    const select = element.querySelector('.dropdown-filter__select');\n    select.addEventListener('change', selectChange);\n}\n\n/**\n * Hide list items: both functions require all list items to be hidden.\n * Ths function takes care of this\n *\n * @param {HTMLElements} items - The list of items to hide.\n * @param {boolean} firstItemVisible - Whether first item should be visible on load.\n * @param {boolean} showAll - Option to display all items.\n */\nfunction hideListItems(items, firstItemVisible, showAll) {\n    // Check if dropdown should show first item\n    if (firstItemVisible === 'true' && showAll === 'false') {\n        let itemsArray = Array.from(items);\n        itemsArray[0].setAttribute('data-hidden', 'false');\n        for (var i = 1; i < itemsArray.length; i++) {\n            itemsArray[i].setAttribute('data-hidden', 'true');\n        }\n    } else if (firstItemVisible === 'false' && showAll === 'false') {\n        items.forEach(function (item) {\n            item.setAttribute('data-hidden', 'true');\n        });\n    } else if (showAll === 'true') {\n        items.forEach(function (item) {\n            item.setAttribute('data-hidden', 'false');\n        });\n    }\n    // First item automatically visible is only relevant to component load. Other behaviour is applied when interacting with component.\n    firstItemVisible = 'false';\n}\n\n/**\n * Insert select: build and add the select box to source\n *\n * @param {HTMLElements} items - The list of content for the select options.\n * @param {HTMLElement} parentElement - The element where we need to insert the select.\n * @param {boolean} firstItemVisible - Whether first item should be visible on load.\n */\nfunction insertSelect(items, parentElement, firstItemVisible) {\n    dataGroupElement = parentElement.querySelector('ul.data-group');\n\n    const selectBox = document.createElement('select'),\n        selectWrapper = parentElement.querySelector(\n            '.wrapper--dropdown-filter__select'\n        ),\n        labelFor = parentElement.dataset.labelFor,\n        labelValue = parentElement.dataset.labelValue,\n        labelEl = document.createElement('label');\n\n    labelEl.textContent = labelValue;\n    labelEl.setAttribute('for', labelFor);\n    parentElement.dataset.labelShow === 'false'\n        ? (labelEl.className = 'sr-only')\n        : null;\n\n    selectBox.className = 'dropdown-filter__select';\n    selectBox.setAttribute('id', labelFor);\n    selectBox.setAttribute('name', labelFor);\n\n    selectWrapper.append(labelEl, selectBox);\n\n    // Add default select text if filter doesn't have show all enabled\n    if (parentElement.dataset.displayAll === 'false') {\n        let noSelection = document.createElement('option');\n        noSelection.text = parentElement.getAttribute('data-text');\n        noSelection.setAttribute('value', 'no-selection');\n        selectBox.appendChild(noSelection);\n    }\n\n    let defaultItemOverride, lastItemOverride;\n\n    // Sort by dataset.value to display list alphabetically\n    if (parentElement.dataset.alphabetical === 'true') {\n        items = Array.from(items).sort((a, b) =>\n            a.dataset.value < b.dataset.value\n                ? -1\n                : a.dataset.value > b.dataset.value\n                ? 1\n                : 0\n        );\n    } else {\n        items = [...items];\n    }\n\n    // Update output list items to correct order\n    for (const item of items) {\n        dataGroupElement.append(item);\n    }\n\n    // Find items with first/last position overrides\n    for (const item of items) {\n        item.dataset.first === 'true' ? (defaultItemOverride = item) : null;\n        item.dataset.last === 'true' ? (lastItemOverride = item) : null;\n    }\n\n    const itemsLength = items.length;\n\n    // Display show all option at top of dropdown if pattern has this configuration option set as true\n    if (parentElement.dataset.displayAll === 'true') {\n        let showAllOption = document.createElement('li');\n        showAllOption.dataset.name = `All ${parentElement.dataset.units}`;\n        showAllOption.dataset.value = 'show-all';\n        items.splice(0, 0, showAllOption);\n    }\n\n    // Remove item with dataset.first='true' from original position in array\n    let defaultItemOverridePosition = items.indexOf(defaultItemOverride);\n\n    // Remove item with dataset.last='true' from original position in array\n    if (lastItemOverride) {\n        let lastPositionOriginal = items.indexOf(lastItemOverride);\n        items.splice(lastPositionOriginal, 1);\n        // If custom last option exists, place as last selectable option\n        items.splice(itemsLength, 0, lastItemOverride);\n    }\n\n    // Iterate over each item and create/append select option\n    Array.from(items).forEach((item) => {\n        const dataValue = item.dataset.value,\n            dataName = item.dataset.name,\n            option = document.createElement('option');\n\n        option.value = dataValue;\n        option.text = dataName;\n\n        selectBox.appendChild(option);\n    });\n\n    // Set first item in list as selected\n    if (firstItemVisible === 'true' && showAll === 'false') {\n        const options = parentElement.querySelectorAll('option');\n        if (defaultItemOverride) {\n            if (lastItemOverride) {\n                // Last item override exists\n                if (parentElement.dataset.alphabetical === 'true') {\n                    options[defaultItemOverridePosition].setAttribute(\n                        'selected',\n                        'selected'\n                    );\n                } else {\n                    options[defaultItemOverridePosition + 1].setAttribute(\n                        'selected',\n                        'selected'\n                    );\n                }\n            } else {\n                // Default show & no last item override\n                options[defaultItemOverridePosition + 1].setAttribute(\n                    'selected',\n                    'selected'\n                );\n            }\n        }\n    }\n}\n\n/**\n * Select change: respond to select change event\n *\n * @param {event} e: The select change event.\n */\nfunction selectChange(e) {\n    // Get list items grouping\n    const dropdownFilter = e.target.closest('.dropdown-filter'),\n        dataGroup = dropdownFilter.querySelector('.data-group');\n\n    // Get direct children list items\n    const listItems = dataGroup.querySelectorAll('ul.data-group > li');\n    for (const listItem of listItems) {\n        listItem.removeAttribute('data-hidden');\n    }\n\n    // Hide all items before displaying chosen item\n    showAll = 'false';\n    hideListItems(listItems, showAll);\n\n    // Get the list item corresponding to the select value chosen\n    const targetListItem = dataGroup.querySelector(\n        'li.data-group__item[data-value=' + e.target.value + ']'\n    );\n\n    // Get not selected list items\n    const otherListItems = dataGroup.querySelectorAll(\n        'li.data-group__item:not([data-value=' + e.target.value + '])'\n    );\n\n    // Show/hide content based on pattern's configuration options\n    if (e.target.value !== 'show-all' && e.srcElement.selectedIndex !== 0) {\n        targetListItem.removeAttribute('data-hidden');\n        for (const o of otherListItems) {\n            o.setAttribute('data-hidden', 'true');\n        }\n    } else if (\n        e.target.value !== 'show-all' &&\n        e.srcElement.selectedIndex === 0\n    ) {\n        for (const o of otherListItems) {\n            o.setAttribute('data-hidden', 'true');\n        }\n        return;\n    }\n}\n\nexport default {\n    launchFn: prepareDropdown,\n    launchQuery: `.${className}`,\n};\n","/**\n * @module patterns/event-form/event-form\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport scroll from 'zenscroll';\nimport { toBool, reduceMotion, verticallyInWindow } from '../../util';\nimport aria from '../../aria-attributes';\n\nconst oneSecond = 1000,\n    tenthOfASecond = 100,\n    scrollDuration = reduceMotion() ? 0 : oneSecond,\n    scrollTo = true;\n\nconst className = 'wrapper--event__info--formassembly';\n\nfunction calculateFormBodyHeight(form) {\n    form.dataset.open = true;\n    const height = form.offsetHeight + 'px';\n    form.dataset.open = false;\n\n    return height;\n}\n\nfunction toggleForm(form, button, buttonText, closeButtonText) {\n    const opening = !toBool(form.dataset.open),\n        doneTarget = opening\n            ? form.querySelector('.event__formassembly__form__heading')\n            : button;\n\n    if (opening) {\n        // Calclulate and save how big we're transitioning to\n        const formHeight = calculateFormBodyHeight(form);\n\n        form.addEventListener(\n            'transitionend',\n            function openForm() {\n                form.removeEventListener('transitionend', openForm, true);\n                form.style = null;\n\n                if (scrollTo && !verticallyInWindow(doneTarget)) {\n                    scroll.to(doneTarget, scrollDuration);\n                }\n            },\n            true\n        );\n\n        // Starting height is 0\n        form.style.height = '0px';\n        form.dataset.open = true;\n\n        // setTimeout lets the DOM recalculate before we continue, so the transition will fire\n        setTimeout(() => {\n            form.style.height = formHeight;\n        }, tenthOfASecond);\n\n        button.querySelector('span').innerText = closeButtonText;\n        button.setAttribute(aria.expanded, true);\n        form.focus();\n    } else {\n        // Starting height is the current height\n        form.style.height = form.offsetHeight + 'px';\n\n        form.addEventListener(\n            'transitionend',\n            function closeForm() {\n                form.removeEventListener('transitionend', closeForm, true);\n                form.style = null;\n                form.dataset.open = false;\n\n                if (scrollTo && !verticallyInWindow(doneTarget)) {\n                    scroll.to(doneTarget, scrollDuration);\n                }\n            },\n            true\n        );\n\n        // setTimeout lets the DOM recalculate before we continue, so the transition will fire\n        setTimeout(() => {\n            form.style.height = '0px';\n        }, tenthOfASecond);\n\n        button.querySelector('span').innerText = buttonText;\n        button.setAttribute(aria.expanded, false);\n        button.focus();\n    }\n}\n\nfunction launchFormAssemblyForm(eventInfo) {\n    const link = eventInfo.querySelector('.event__formassembly__button'),\n        form = eventInfo.querySelector('.event__formassembly__form'),\n        formActual = eventInfo.querySelector(\n            '.event__formassembly__form > .formassembly-form'\n        ),\n        buttonText = link.innerText,\n        button = document.createElement('button'),\n        buttonSpan = document.createElement('span'),\n        closeButtonText = 'Close registration form',\n        closeButton = document.createElement('button'),\n        closeButtonSpan = document.createElement('span'),\n        closeButtonIcon = document.createElement('span'),\n        closeButtonEnd = document.createElement('button'),\n        closeButtonEndSpan = document.createElement('span'),\n        closeButtonEndIcon = document.createElement('span'),\n        heading = eventInfo.querySelector(\n            '.event__formassembly__form__heading'\n        ),\n        wrapperHeading = document.createElement('div');\n\n    buttonSpan.appendChild(document.createTextNode(buttonText));\n    button.setAttribute('type', 'button');\n    button.className = 'event__formassembly__button';\n    button.appendChild(buttonSpan);\n    button.setAttribute(aria.expanded, false);\n    button.setAttribute(aria.owns, 'event__formassembly__form');\n\n    closeButtonSpan.appendChild(document.createTextNode(closeButtonText));\n    closeButtonSpan.className = 'event__formassembly__form__close-button__text';\n    closeButtonIcon.className = 'fa fas fa-fw fa-times';\n    closeButton.setAttribute('type', 'button');\n    closeButton.className = 'event__formassembly__form__close-button';\n    closeButton.appendChild(closeButtonIcon);\n    closeButton.appendChild(closeButtonSpan);\n\n    closeButtonEndSpan.appendChild(document.createTextNode(closeButtonText));\n    closeButtonEndSpan.className =\n        'event__formassembly__form__close-button__text';\n    closeButtonEndIcon.className = 'fa fas fa-fw fa-times';\n    closeButtonEnd.setAttribute('type', 'button');\n    closeButtonEnd.className = 'event__formassembly__form__close-button';\n    closeButtonEnd.appendChild(closeButtonEndIcon);\n    closeButtonEnd.appendChild(closeButtonEndSpan);\n\n    button.addEventListener(\n        'click',\n        () => toggleForm(form, button, buttonText, closeButtonText),\n        true\n    );\n    closeButton.addEventListener(\n        'click',\n        () => toggleForm(form, button, buttonText, closeButtonText),\n        true\n    );\n    closeButtonEnd.addEventListener(\n        'click',\n        () => toggleForm(form, button, buttonText, closeButtonText),\n        true\n    );\n\n    form.setAttribute('tabindex', -1);\n    form.dataset.open = false;\n\n    wrapperHeading.className = 'wrapper--event__formassembly__form__heading';\n    wrapperHeading.appendChild(heading);\n    wrapperHeading.appendChild(closeButton);\n\n    form.insertBefore(wrapperHeading, formActual);\n    form.appendChild(closeButtonEnd);\n    link.parentNode.replaceChild(button, link);\n}\n\nexport default {\n    launchFn: launchFormAssemblyForm,\n    launchQuery: `.${className}`,\n};\n","/**\n * Feedback\n *\n * @module patterns/feedback/feedback\n * @author Web Development\n * @copyright City, University of London 2018\n */\nimport aria from '../../aria-attributes';\nimport { gaEvent, appendAll } from '../../util';\n\nconst className = 'feedback',\n    feedbackPage = '/feedback';\n\n/**\n * Push a Google Analytics page feedback event into the data layer queue.\n *\n * @param {string} action - The event action.\n * @param {number} value - The event value\n */\nfunction sendFeedback(action, value) {\n    gaEvent(\n        'pageFeedback',\n        'Page feedback',\n        action,\n        window.location.toString(),\n        value,\n        true\n    );\n}\n\n/**\n * Handle a click on the \"no, it's not useful\" button.\n *\n * @param {HTMLParagraphElement} container - The button container.\n */\nfunction handleNo(container) {\n    sendFeedback('Not useful', 0);\n\n    const message = document.createElement('p'),\n        messagePrefix = document.createTextNode(\n            'Were sorry to hear that, please consider '\n        ),\n        linkText = document.createTextNode('sending us some feedback'),\n        link = document.createElement('a'),\n        messageSuffix = document.createTextNode(' so we can make it better.');\n    container.childNodes.forEach((elem) => container.removeChild(elem));\n    link.href = feedbackPage;\n    link.appendChild(linkText);\n    appendAll(message, [messagePrefix, link, messageSuffix]);\n    message.setAttribute(aria.live, 'polite');\n    container.appendChild(message);\n}\n\n/**\n * Handle a click on the \"yes, it's useful\" button.\n *\n * @param {HTMLParagraphElement} container - The button container.\n */\nfunction handleYes(container) {\n    sendFeedback('Useful', 1);\n\n    const message = document.createElement('p'),\n        messageText = document.createTextNode(\n            'Thanks! Your feedback will be used to improve our website.'\n        );\n    container.childNodes.forEach((elem) => container.removeChild(elem));\n    message.appendChild(messageText);\n    message.setAttribute(aria.live, 'polite');\n    container.appendChild(message);\n}\n\n/**\n * By default, the Feedback widget contains a link to the feedback form.\n *\n * With JavaScript, we add is it useful? buttons to track events to GA.\n *\n * @param {HTMLElement} elem - The feedback widget.\n */\nfunction launchFeedback(elem) {\n    const questionText = document.createTextNode('Is this page useful?'),\n        directFeedbackWrapper = document.createElement('div'),\n        directFeedbackForm = document.createElement('form'),\n        directFeedbackFieldset = document.createElement('fieldset'),\n        questionLegend = document.createElement('legend'),\n        buttonWrapper = document.createElement('div'),\n        yesButton = document.createElement('button'),\n        noButton = document.createElement('button');\n\n    yesButton.setAttribute('type', 'button');\n    yesButton.appendChild(document.createTextNode('Yes'));\n    yesButton.addEventListener(\n        'click',\n        () => handleYes(directFeedbackWrapper),\n        true\n    );\n\n    noButton.setAttribute('type', 'button');\n    noButton.appendChild(document.createTextNode('No'));\n    noButton.addEventListener(\n        'click',\n        () => handleNo(directFeedbackWrapper),\n        true\n    );\n\n    buttonWrapper.className = 'feedback__direct__buttons';\n\n    questionLegend.appendChild(questionText);\n    appendAll(buttonWrapper, [yesButton, noButton]);\n    appendAll(directFeedbackFieldset, [questionLegend, buttonWrapper]);\n    directFeedbackForm.appendChild(directFeedbackFieldset);\n    directFeedbackWrapper.appendChild(directFeedbackForm);\n    directFeedbackWrapper.className = className + '__direct';\n\n    elem.insertBefore(directFeedbackWrapper, elem.firstElementChild);\n}\n\nexport default {\n    launchFn: launchFeedback,\n    launchQuery: `.${className}`,\n};\n","/**\n * Short courses/CPD key information\n *\n * @module patterns/key-information/key-information--lifelong-learning\n * @author Web Development\n * @copyright City, University of London 2020\n */\nimport scroll from 'zenscroll';\nimport { reduceMotion, verticallyInWindow } from '../../util';\nimport aria from '../../aria-attributes';\n\nconst className = 'key-information--lifelong-learning',\n    loadMoreBatch = 3,\n    arrowLeft = 'ArrowLeft',\n    arrowRight = 'ArrowRight',\n    oneSecond = 1000,\n    scrollDuration = reduceMotion() ? 0 : oneSecond,\n    scrollTo = true;\n\n/**\n * Initialise data atributes on the start dates.\n *\n * @param  {HTMLLIElement[]} startDates - The start dates.\n */\nfunction prepareStartDates(startDates) {\n    startDates.forEach((startDate, i) => {\n        startDate.setAttribute('tabindex', -1);\n        startDate.setAttribute(\n            aria.label,\n            `Start date ${i + 1} of ${startDates.length}`\n        );\n\n        if (i < 1) {\n            startDate.dataset.sliderposition = 0;\n            startDate.dataset.loadmorevisible = true;\n            startDate.dataset.hidden = false;\n        } else if (i < loadMoreBatch) {\n            startDate.dataset.sliderposition = 1;\n            startDate.dataset.loadmorevisible = true;\n            startDate.dataset.hidden = true;\n        } else {\n            startDate.dataset.sliderposition = 1;\n            startDate.dataset.loadmorevisible = false;\n            startDate.dataset.hidden = true;\n        }\n    });\n}\n\n/**\n * @param  {HTMLElement} keyInformation - The key information element.\n */\nfunction updateButtonState(keyInformation) {\n    const nextButton = keyInformation.querySelector(\n            `.${className}__controls__next`\n        ),\n        prevButton = keyInformation.querySelector(\n            `.${className}__controls__prev`\n        ),\n        loadMoreButton = keyInformation.querySelector(\n            `.${className}__controls__loadmore`\n        );\n\n    keyInformation.querySelector('[data-sliderposition=\"-1\"]')\n        ? prevButton.removeAttribute('disabled')\n        : prevButton.setAttribute('disabled', true);\n\n    keyInformation.querySelector('[data-sliderposition=\"1\"]')\n        ? nextButton.removeAttribute('disabled')\n        : nextButton.setAttribute('disabled', true);\n\n    if (\n        loadMoreButton &&\n        !keyInformation.querySelector('[data-loadmorevisible=\"false\"]')\n    ) {\n        loadMoreButton.parentNode.removeChild(loadMoreButton);\n    }\n}\n\n/**\n * Handle clicks on the next/previous buttons.\n *\n * @param  {HTMLElement} keyInformation - The keyInformation element.\n * @param  {Number} direction - The scroll direction, 1 = next, -1 = previous.\n */\nfunction handleNextPrevClick(keyInformation, direction) {\n    const startDates = Array.from(\n            keyInformation.querySelectorAll(`.${className}__dates > li`)\n        ),\n        current = keyInformation.querySelector('[data-sliderposition=\"0\"]'),\n        currentPage = keyInformation.querySelector(\n            `.${className}__indicator__current`\n        ),\n        nextButton = keyInformation.querySelector(\n            `.${className}__controls__next`\n        ),\n        prevButton = keyInformation.querySelector(\n            `.${className}__controls__prev`\n        );\n\n    if (direction === 1) {\n        const next = current.nextElementSibling;\n\n        if (next) {\n            nextButton.setAttribute('disabled', true);\n            prevButton.setAttribute('disabled', true);\n\n            next.addEventListener(\n                'transitionend',\n                function focusNext() {\n                    next.removeEventListener('transitionend', focusNext, true);\n                    next.focus();\n                    updateButtonState(keyInformation);\n                },\n                true\n            );\n\n            current.addEventListener(\n                'transitionend',\n                function hideCurrent() {\n                    current.removeEventListener(\n                        'transitionend',\n                        hideCurrent,\n                        true\n                    );\n                    current.dataset.hidden = true;\n                },\n                true\n            );\n\n            current.dataset.sliderposition = -1;\n            next.dataset.hidden = false;\n            next.dataset.sliderposition = 0;\n            next.dataset.loadmorevisible = true;\n            currentPage.innerText = startDates.indexOf(next) + 1;\n        }\n    } else {\n        const previous = current.previousElementSibling;\n\n        if (previous) {\n            nextButton.setAttribute('disabled', true);\n            prevButton.setAttribute('disabled', true);\n\n            previous.addEventListener(\n                'transitionend',\n                function focusPrevious() {\n                    previous.removeEventListener(\n                        'transitionend',\n                        focusPrevious,\n                        true\n                    );\n                    previous.focus();\n                    updateButtonState(keyInformation);\n                },\n                true\n            );\n\n            current.addEventListener(\n                'transitionend',\n                function hideCurrent() {\n                    current.removeEventListener(\n                        'transitionend',\n                        hideCurrent,\n                        true\n                    );\n                    current.dataset.hidden = true;\n                },\n                true\n            );\n\n            current.dataset.sliderposition = 1;\n            previous.dataset.hidden = false;\n            previous.dataset.sliderposition = 0;\n            currentPage.innerText = startDates.indexOf(previous) + 1;\n        }\n    }\n}\n\n/**\n * Load another batch of start dates, remove the button if we're done.\n *\n * @param  {HTMLElement} keyInformation - The key information element.\n */\nfunction handleLoadMoreClick(keyInformation) {\n    const hiddenDates = Array.from(\n            keyInformation.querySelectorAll(\n                `.${className}__dates > [data-loadmorevisible=\"false\"]`\n            )\n        ),\n        loadMoreButton = keyInformation.querySelector(\n            `.${className}__controls__loadmore`\n        );\n\n    if (loadMoreBatch >= hiddenDates.length) {\n        loadMoreButton.parentNode.removeChild(loadMoreButton);\n    }\n\n    hiddenDates.slice(0, loadMoreBatch).forEach((date) => {\n        date.dataset.loadmorevisible = true;\n    });\n\n    const firstElement = hiddenDates.shift();\n\n    if (firstElement && scrollTo && !verticallyInWindow(firstElement)) {\n        scroll.to(firstElement, scrollDuration);\n    }\n\n    firstElement && firstElement.focus();\n}\n\n/**\n * Adds a slider and load more functionality to a short course key information section.\n *\n * @param  {HTMLElement} keyInformation - The key information element.\n */\nfunction launchKeyInformation(keyInformation) {\n    const startDates = Array.from(\n            keyInformation.querySelectorAll(`.${className}__dates > li`)\n        ),\n        startDateList = keyInformation.querySelector(`.${className}__dates`);\n\n    if (startDates.length < 2) {\n        return;\n    } else {\n        keyInformation.classList.add(`${className}__dates--controllable`);\n        startDateList.setAttribute('role', 'presentation');\n    }\n\n    const controlsWrapper = document.createElement('nav'),\n        nextButton = document.createElement('button'),\n        nextButtonSpan = document.createElement('span'),\n        prevButton = document.createElement('button'),\n        prevButtonSpan = document.createElement('span'),\n        indicator = document.createElement('div'),\n        currentPage = document.createElement('span'),\n        totalPages = document.createElement('span'),\n        divider = document.createElement('span'),\n        dividerVisible = document.createElement('span'),\n        dividerScreenReader = document.createElement('span'),\n        loadMoreButton = document.createElement('button'),\n        loadMoreButtonSpan = document.createElement('span');\n\n    nextButtonSpan.appendChild(document.createTextNode('Next start date'));\n    nextButton.appendChild(nextButtonSpan);\n    nextButton.setAttribute('type', 'button');\n    nextButton.className = className + '__controls__next';\n    nextButton.addEventListener(\n        'click',\n        () => handleNextPrevClick(keyInformation, 1),\n        true\n    );\n\n    prevButtonSpan.appendChild(document.createTextNode('Previous start date'));\n    prevButton.appendChild(prevButtonSpan);\n    prevButton.setAttribute('type', 'button');\n    prevButton.setAttribute('disabled', 'true');\n    prevButton.className = className + '__controls__prev';\n    prevButton.addEventListener(\n        'click',\n        () => handleNextPrevClick(keyInformation, -1),\n        true\n    );\n\n    keyInformation.addEventListener(\n        'keydown',\n        (e) => {\n            switch (e.key) {\n                case arrowLeft:\n                    prevButton.click();\n                    break;\n                case arrowRight:\n                    nextButton.click();\n                    break;\n                default:\n                    break;\n            }\n        },\n        true\n    );\n\n    if (startDates.length > loadMoreBatch) {\n        loadMoreButtonSpan.appendChild(\n            document.createTextNode('Load more start dates')\n        );\n        loadMoreButton.appendChild(loadMoreButtonSpan);\n        loadMoreButton.setAttribute('type', 'button');\n        loadMoreButton.className = className + '__controls__loadmore';\n        loadMoreButton.addEventListener(\n            'click',\n            () => handleLoadMoreClick(keyInformation),\n            true\n        );\n    }\n\n    currentPage.appendChild(document.createTextNode(1));\n    currentPage.className = className + '__indicator__current';\n\n    dividerVisible.appendChild(document.createTextNode('/'));\n    dividerVisible.className = className + '__indicator__divider--visible';\n    dividerVisible.setAttribute(aria.hidden, 'true');\n    dividerScreenReader.appendChild(document.createTextNode(' of '));\n    dividerScreenReader.className = className + '__indicator__divider--sr';\n    divider.appendChild(dividerVisible);\n    divider.appendChild(dividerScreenReader);\n    divider.className = className + '__indicator__divider';\n\n    totalPages.appendChild(document.createTextNode(startDates.length));\n    totalPages.className = className + '__indicator__total';\n\n    indicator.appendChild(currentPage);\n    indicator.appendChild(divider);\n    indicator.appendChild(totalPages);\n    indicator.className = className + '__indicator';\n\n    controlsWrapper.appendChild(indicator);\n    controlsWrapper.appendChild(prevButton);\n    controlsWrapper.appendChild(nextButton);\n\n    if (startDates.length > loadMoreBatch) {\n        controlsWrapper.appendChild(loadMoreButton);\n    }\n\n    controlsWrapper.className = className + '__controls';\n    controlsWrapper.setAttribute(aria.label, 'Course start dates navigation');\n\n    prepareStartDates(startDates);\n\n    keyInformation.appendChild(controlsWrapper);\n}\n\nexport default {\n    launchFn: launchKeyInformation,\n    launchQuery: `.${className}`,\n};\n","/**\n * Link Finder\n *\n * @module patterns/link-finder/link-finder\n * @author Web Development\n * @copyright City, University of London 2019\n */\n\nimport aria from '../../aria-attributes';\n\nconst className = 'link-finder';\n\n/**\n * Function that prepends icon to anchor paramater\n *\n * @param {HTMLElement} anchor - HTML element to prepend icon to\n * @param {string} className - class name to specify FA icon\n */\nfunction prependIcon(anchor, className) {\n    let node = document.createElement('span');\n    node.className = 'fas ' + className + '  link-decorator';\n    node.setAttribute(aria.hidden, true);\n    anchor.parentNode.insertBefore(node, anchor);\n}\n\n/**\n * Checks if anchor has to have external URL icon\n *\n * @param {HTMLElement} anchor - an anchor HTML element\n */\nfunction findExternalLink(anchor) {\n    if (\n        anchor.origin !== window.location.origin &&\n        anchor.querySelectorAll('img').length < 1 &&\n        anchor.querySelectorAll('.fa-external-link').length < 1 &&\n        !anchor.parentElement.className.includes('cta-like-anchor') &&\n        anchor.className !== 'social-icon' &&\n        !anchor.className.includes('cta') &&\n        !anchor.parentElement.className.includes('cta-block') &&\n        !anchor.parentElement.className.includes('card') &&\n        anchor.href.indexOf('mailto:') !== 0 &&\n        anchor.href.indexOf('tel:') !== 0 &&\n        anchor.href.indexOf('javascript:') !== 0 &&\n        anchor.origin\n    ) {\n        let node = document.createElement('span');\n        node.className = 'far fa-external-link inline-external-link';\n        node.setAttribute(aria.label, '(external link)');\n        anchor.appendChild(node);\n    }\n}\n\n/**\n * This function checks if the anchor has any of the extensions from the 'fileTypes' object\n * if yes it calls prependIcon() to add the appropriate FA icon\n *\n * @param {HTMLElement} anchor - an anchor HTML element\n */\nfunction findDocumentLinks(anchor) {\n    const fileTypes = {\n        pdf: 'pdf',\n        docx: 'word',\n        doc: 'word',\n        xlsx: 'excel',\n        xls: 'excel',\n    };\n\n    for (let key in fileTypes) {\n        if (anchor.href.indexOf('.' + key) !== -1) {\n            prependIcon(anchor, 'fa-file-' + fileTypes[key]);\n\n            let anchorText = anchor.textContent;\n            anchorText += ' [' + key.toUpperCase() + ']';\n            anchor.textContent = null;\n            anchor.textContent = anchorText;\n            break;\n        }\n    }\n}\n\n/**\n * Every anchor on the webpage has to have appropriate icons prepended or appended depending on predefined requirements\n * This function will iterate through every anchor of the HTML element and calls the appropriate function to add the right icon\n * if required\n *\n * @param {HTMLElement} e - an HTML element with 'link-finder' class name\n */\nfunction findLinks(e) {\n    const anchors = e.querySelectorAll('a');\n\n    anchors.forEach(function (anchor) {\n        findDocumentLinks(anchor);\n        findExternalLink(anchor);\n    });\n}\n\nexport default {\n    launchFn: findLinks,\n    launchQuery: `.${className}`,\n};\n","/**\n * Generic navigation functions for menu and secondary navigation.\n *\n * @module menu-formatters\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport scroll from 'zenscroll';\nimport { toBool, appendAll, reduceMotion } from '../../util';\nimport aria from '../../aria-attributes';\n\nconst oneSecond = 1000,\n    scrollDuration = reduceMotion() ? 0 : oneSecond;\n\n/**\n * Set sub-menu button attributes for the open/closed state.\n *\n * @param {HTMLButtonElement} button - The button to decorate.\n * @param {boolean} open - Should it be open?\n * @param {string} buttonTextClassName - The class of the text span.\n */\nfunction setNavigationItemButtonDetails(button, open, rootClass) {\n    const navigationItem = button.closest('li'),\n        sectionText = navigationItem.dataset.title + ' section',\n        buttonClassName = rootClass + '__button',\n        buttonTextClassName = buttonClassName + '__text',\n        textSpan = button.querySelector(`.${buttonTextClassName}`),\n        text = open ? 'Close ' : 'Open ';\n\n    open &&\n        Array.from(\n            button.closest('ul').querySelectorAll('button')\n        ).forEach((button) =>\n            setNavigationItemButtonDetails(button, false, rootClass)\n        );\n\n    navigationItem.dataset.open = open;\n    button.setAttribute(aria.expanded, open);\n    button.title = text + sectionText;\n    textSpan.innerText = text + sectionText;\n}\n\n/**\n * Toggle a sub-navigation open or closed.\n */\nfunction toggleSubNavigation(button, rootClass) {\n    const expanded = button.getAttribute(aria.expanded);\n\n    toBool(expanded)\n        ? setNavigationItemButtonDetails(button, false, rootClass)\n        : setNavigationItemButtonDetails(button, true, rootClass);\n\n    scroll.intoView(button.closest('li'), scrollDuration);\n}\n\n/**\n * Decorate sub-navigation element with the appropriate attributes.\n *\n * @param {HTMLLIElement} navigationItem - The list item representing button navigation item.\n * @param {string} rootClass - The class of the navigation element.\n */\nfunction prepareSubNavigation(navigationItem, rootClass) {\n    const navigationItemBtn = document.createElement('button'),\n        iconSpan = document.createElement('span'),\n        textSpan = document.createElement('span'),\n        controlsClassName = rootClass + '__controls',\n        buttonClassName = rootClass + '__button',\n        buttonTextClassName = buttonClassName + '__text',\n        buttonIconClassName = buttonClassName + '__icon',\n        currentClassName = rootClass + '__current',\n        hierarchyClassName = rootClass + '__hierarchy',\n        controlsWrapper = navigationItem.querySelector(`.${controlsClassName}`);\n\n    navigationItemBtn.setAttribute('type', 'button');\n    iconSpan.setAttribute(aria.hidden, 'true');\n    iconSpan.className = `${buttonIconClassName} fal fa-fw`;\n    textSpan.className = `${buttonTextClassName}`;\n    appendAll(navigationItemBtn, [iconSpan, textSpan]);\n    controlsWrapper.appendChild(navigationItemBtn);\n\n    if (\n        navigationItem.className.indexOf(currentClassName) >= 0 ||\n        navigationItem.className.indexOf(hierarchyClassName) >= 0\n    ) {\n        setNavigationItemButtonDetails(navigationItemBtn, true, rootClass);\n    } else {\n        setNavigationItemButtonDetails(navigationItemBtn, false, rootClass);\n    }\n}\n\n/**\n * Iterate over the navigation lists, transforming them into the initial\n * navigation with the current asset lineage open.\n *\n * @param {HTMLElement} navigation - The navigation container.\n * @param {string} rootClass - The class of the navigation element.\n */\nexport function prepareNavigation(navigation, rootClass) {\n    const controlsClassName = rootClass + '__controls';\n\n    Array.from(navigation.querySelectorAll('li')).forEach((navigationItem) => {\n        const link = navigationItem.querySelector('a'),\n            subNavigation = navigationItem.querySelector('ul'),\n            linkText = 'Visit ' + navigationItem.dataset.title,\n            textWrapper = document.createElement('span'),\n            controlsWrapper = document.createElement('div');\n\n        controlsWrapper.className = controlsClassName;\n        textWrapper.appendChild(link.firstChild.cloneNode(true));\n        link.replaceChild(textWrapper, link.firstChild);\n        link.title = linkText;\n        navigationItem.replaceChild(controlsWrapper, link);\n        controlsWrapper.appendChild(link);\n\n        subNavigation &&\n            subNavigation.firstElementChild &&\n            prepareSubNavigation(navigationItem, rootClass);\n    });\n}\n\n/**\n * Open/close the sub-menu when its button is clicked.\n *\n * @param {HTMLUListElement} subNavigation - Toggle the sub-navigation when its button is clicked.\n * @param {string} rootClass - The class of the navigation element.\n */\nexport function listenForNavigationToggles(subNavigation, rootClass) {\n    Array.from(subNavigation.querySelectorAll('button')).forEach((button) =>\n        button.addEventListener(\n            'click',\n            () => toggleSubNavigation(button, rootClass),\n            true\n        )\n    );\n}\n","/**\n * Global menu\n *\n * @module patterns/menu/menu\n * @author Web Development\n * @copyright City, University of London 2018-2020\n */\nimport createFocusTrap from 'focus-trap';\nimport { toBool, isVisible } from '../../util';\nimport aria from '../../aria-attributes';\nimport {\n    prepareNavigation,\n    listenForNavigationToggles,\n} from './menu-formatters';\n\nconst className = 'menu',\n    hierarchyClassName = className + '__hierarchy',\n    currentClassName = className + '__current',\n    veilClassName = className + '__veil',\n    contentClassName = className + '__content',\n    contentHeaderClassName = contentClassName + '__header',\n    currentPage = contentHeaderClassName + '--current',\n    controlsClassName = className + '__controls',\n    buttonDisplayClassName = className + '__display__button',\n    buttonClassName = className + '__button',\n    level1ClassName = className + '__level1',\n    buttonTextClassName = buttonClassName + '__text';\n\n/**\n * Creates a function for setting a menu to be open or closed.\n *\n * @param {HTMLElement} menu - The menu container.\n * @param {HTMLButtonElement} button - The button that toggles the menu.\n * @returns {Function} A function that will set the menu to be open/closed.\n */\nfunction menuSetter(menu, button) {\n    /**\n     * @param {boolean} open - Set the menu to be open?\n     */\n    const setMenu = (open) => {\n        const buttonText = button.querySelector(`.${buttonTextClassName}`);\n\n        menu.dataset.open = open;\n        buttonText.innerText = open ? 'Close' : 'Menu';\n        button.setAttribute(aria.expanded, open);\n    };\n\n    return setMenu;\n}\n\n/**\n * Opens or closes the menu, (de)activates the focus trap if provided, and\n * scrolls the sub-menus so that the current page lineage or open menus are in\n * view.\n *\n * @param {HTMLButtonElement} button - The button for toggling the menu.\n * @param {Function} setMenu - A function for setting menu attributes to be open/closed.\n * @param {object} trap - The focus trap object.\n * @param {HTMLElement} veil - The veiling element.\n */\nfunction toggleMenu(button, setMenu, trap, veil) {\n    const expanded = button.getAttribute(aria.expanded);\n    if (toBool(expanded)) {\n        trap.deactivate();\n        veil.dataset.on = 'false';\n        setMenu(false);\n    } else {\n        setMenu(true);\n        veil.dataset.on = 'true';\n        trap.activate();\n    }\n}\n\n/**\n * Turn the menu label into a button to toggle the menu open and closed.\n *\n * While the menu is open, a focus trap should limit tab indexing to the menu\n * and its button.\n *\n * @param {HTMLElement} label - The menu label.\n * @param {HTMLButtonElement} button - A button element.\n * @param {Function} setMenu - A function to open/close the menu.\n * @param {HTMLElement} veil - The veiling element.\n */\nfunction createMenuToggle(label, button, setMenu, veil) {\n    const buttonWrapper = document.createElement('div'),\n        menu = label.closest(`.${className}`);\n\n    button.className = 'menu__display__button__button';\n    buttonWrapper.className = 'menu__display__button__button__wrapper';\n    button.setAttribute('type', 'button');\n    button.setAttribute(aria.hasPopup, 'menu');\n    Array.from(label.childNodes).forEach((child) =>\n        buttonWrapper.appendChild(child)\n    );\n    button.appendChild(buttonWrapper);\n\n    const trap = createFocusTrap(menu, {\n        /**\n         * Initial focus should be whichever of: the current page; a menu item\n         * in the asset lineage or; the first item in the last column appears\n         * last in the DOM and is visible.\n         */\n        initialFocus: () => {\n            const open = Array.from(\n                menu.querySelectorAll(\n                    [\n                        `.${contentHeaderClassName} > span`,\n                        `.${currentClassName} > .${controlsClassName} > a`,\n                        `.${hierarchyClassName} > .${controlsClassName} > a`,\n                        `.${level1ClassName} > ul > li:first-of-type > .${controlsClassName} > a`,\n                        `.${currentPage} > a`,\n                    ].join(',')\n                )\n            ).filter((elem) => isVisible(elem));\n\n            return open[open.length - 1];\n        },\n        onDeactivate: () => toggleMenu(button, setMenu, trap, veil),\n        clickOutsideDeactivates: true,\n    });\n\n    button.addEventListener(\n        'click',\n        () => toggleMenu(button, setMenu, trap, veil),\n        true\n    );\n}\n\n/**\n * Transform the Matrix-generated menu lists into an interactive menu.\n *\n * @param {HTMLElement} menu - The menu element.\n */\nfunction launchMenu(menu) {\n    // During testing only: remove 'under construction' indicators globally\n//     menu.innerHTML = menu.innerHTML.replace(/\\(\\( /g, '').replace(/ \\)\\)/g, '');\n\n    const label = menu.querySelector(`.${buttonDisplayClassName}`),\n        button = document.createElement('button'),\n        veil = document.createElement('div'),\n        setMenu = menuSetter(menu, button);\n\n    veil.className = veilClassName;\n    veil.setAttribute(aria.hidden, 'true');\n    document\n        .querySelector('body')\n        .insertBefore(veil, document.querySelector('main'));\n\n    createMenuToggle(label, button, setMenu, veil);\n    label.appendChild(button);\n    setMenu(false);\n\n    prepareNavigation(menu.querySelector(`.${level1ClassName}`), className);\n    listenForNavigationToggles(\n        menu.querySelector(`.${level1ClassName}`),\n        className\n    );\n}\n\nexport default {\n    launchFn: launchMenu,\n    launchQuery: `.${className}`,\n};\n","/**\n * modal\n *\n * @module patterns/pagination/pagination\n * @author Web Development\n * @copyright City, University of London 2018\n *\n */\n\nimport {\n    appendAll,\n    createHTMLElement,\n    reduceMotion,\n    toBool,\n    verticallyInWindow,\n} from '../../util';\n\nimport aria from '../../aria-attributes';\nimport createFocusTrap from 'focus-trap';\nimport scroll from 'zenscroll';\n\nconst className = 'modal',\n    bodyClassName = className + '__body',\n    escapeKey = 'Escape',\n    oneSecond = 1000,\n    scrollDuration = reduceMotion() ? 0 : oneSecond,\n    scrollTo = true;\n\nlet trap;\n\n/**\n * launch function\n *\n * @param {HTMLElement} modal - an HTML element with the modal class.\n */\nfunction launchModal(modal) {\n    let dialogArray = [];\n    const dialogTopic = modal.getAttribute('data-topic');\n\n    Array.from(modal.getElementsByTagName('li')).forEach((list, i) => {\n        if (\n            !list.dataset.modalcontent ||\n            list.dataset.modalcontent === 'true'\n        ) {\n            const wrapper = document.createElement('div'),\n                listButton = document.createElement('button'),\n                listButtonSpan = document.createElement('span'),\n                listBody = Array.from(list.childNodes),\n                listHeader = list.firstElementChild,\n                customHeader = list.getAttribute('data-header'),\n                format = list.getAttribute('data-keepformat'),\n                header = document.createElement('div');\n\n            let title,\n                keepFormat = toBool(format),\n                shortName = list.getAttribute('data-shortname');\n\n            listButton.classList.add('modal__button');\n            listButton.setAttribute('type', 'button');\n            listButton.setAttribute(aria.label, 'Open dialog');\n\n            listButtonSpan.classList.add('inline-text');\n            listButton.appendChild(listButtonSpan);\n\n            list.appendChild(wrapper);\n            appendAll(wrapper, listBody);\n\n            wrapper.classList.add(`${bodyClassName}`);\n\n            if (customHeader) {\n                title = customHeader;\n            } else {\n                title = listHeader.innerText;\n            }\n\n            if (shortName === null) {\n                shortName = listHeader.innerText;\n            }\n\n            if (keepFormat) {\n                list.insertBefore(listHeader, wrapper);\n\n                listHeader.addEventListener('click', function () {\n                    createDialog(modal, `${i}`, dialogArray);\n                });\n            } else {\n                listButtonSpan.textContent = listHeader.textContent;\n                header.appendChild(listHeader);\n                list.insertBefore(listButton, wrapper);\n\n                listButton.addEventListener('click', function () {\n                    createDialog(modal, `${i}`, dialogArray);\n                });\n            }\n\n            dialogArray.push({\n                title: title,\n                body: wrapper.innerHTML,\n                topic: dialogTopic,\n                shortname: shortName,\n            });\n        }\n    });\n}\n\n/**\n * function that creates a pop-up dialog, linked to click event in launchModal(modal)\n *\n * @param {HTMLElement} parent - an HTML element with the modal class.\n * @param {number} position - position of the <li> in the <ul>\n * @param {array} dialogArray - array of objects contaning title and body {title:title, body:body} to build dialog pager\n *\n */\nfunction createDialog(parent, position, dialogArray) {\n    const slider = toBool(parent.getAttribute('data-slider')),\n        type = parent.dataset.type;\n\n    const closeBtn = createHTMLElement('button', [\n        { label: 'class', val: 'dialog__close fas fa-times' },\n        { label: 'aria-label', val: 'Close modal' },\n    ]);\n\n    const dialog = createHTMLElement('div', [\n        { label: 'class', val: 'dialog' },\n        { label: 'data-position', val: `${position}` },\n        { label: 'data-type', val: `${type}` },\n    ]);\n\n    const bodyWrapper = createHTMLElement('div', [\n        { label: 'class', val: 'dialog__content' },\n    ]);\n\n    const wrapperWrapper = createHTMLElement('div', [\n        { label: 'class', val: 'dialog__inner' },\n        { label: 'role', val: 'role' },\n    ]);\n\n    const dialogStrapline = createHTMLElement('p', [\n        { label: 'class', val: 'dialog__strapline' },\n    ]);\n\n    const dialogTitle = createHTMLElement('p', [\n        { label: 'class', val: 'dialog__heading' },\n    ]);\n\n    const dialogBody = createHTMLElement('div', [\n        { label: 'class', val: 'dialog__body-copy' },\n    ]);\n\n    dialogTitle.innerText = dialogArray[position].title;\n    dialogBody.innerHTML = dialogArray[position].body;\n    dialogStrapline.innerHTML = dialogArray[position].topic;\n\n    bodyWrapper.appendChild(closeBtn);\n    bodyWrapper.appendChild(dialogStrapline);\n    bodyWrapper.appendChild(dialogTitle);\n    bodyWrapper.appendChild(dialogBody);\n    wrapperWrapper.appendChild(bodyWrapper);\n    dialog.appendChild(wrapperWrapper);\n\n    const main = document.querySelector('main');\n    main.appendChild(dialog);\n\n    dialog.addEventListener('keydown', (e) => {\n        if (e.key === escapeKey) {\n            e.preventDefault();\n            document.body.classList.remove('dialog-in', 'no-scroll');\n            trap.deactivate();\n            closeDialog(dialog, parent);\n        }\n    });\n\n    dialog.addEventListener('click', (e) => {\n        if (e.target.classList.contains('dialog')) {\n            e.preventDefault();\n            e.stopPropagation();\n            document.body.classList.remove('dialog-in', 'no-scroll');\n            trap.deactivate();\n            closeDialog(dialog, parent);\n        }\n    });\n\n    closeBtn.addEventListener('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        closeDialog(dialog, parent);\n        document.body.classList.remove('dialog-in', 'no-scroll');\n        trap.deactivate();\n    });\n\n    trapFocus(dialog);\n    document.body.classList.add('dialog-in', 'no-scroll');\n\n    if (slider && dialogArray.length > 1) {\n        createControl(dialog, dialogArray);\n    }\n}\n\n/**\n * function that creates pager button on dialog box\n * this function is triggered by createDialog() if the HTML element with classname modal has data[slider] set to true\n *\n * @param {HTMLElement} dialog - an HTML element created by createDialog()\n * @param {array} dialogArray - array of objects contaning title and body {title:title, body:body} to build dialog pager\n *\n */\nfunction createControl(dialog, dialogArray) {\n    let position = parseInt(dialog.getAttribute('data-position'));\n\n    const buttonWrapper = createHTMLElement('div', [\n        { label: 'class', val: 'dialog__slider-control' },\n    ]);\n\n    let buttonPrev = controlButton(dialogArray, position, 'left');\n    let buttonNext = controlButton(dialogArray, position, 'right');\n\n    buttonNext.addEventListener('click', (e) => {\n        e.preventDefault();\n        let pos = buttonNext.getAttribute('data-nextState');\n        addDialogEvent(dialog, dialogArray, pos);\n    });\n\n    buttonPrev.addEventListener('click', (e) => {\n        e.preventDefault();\n        let pos = buttonPrev.getAttribute('data-nextState');\n        addDialogEvent(dialog, dialogArray, pos);\n    });\n\n    buttonWrapper.appendChild(buttonPrev);\n    buttonWrapper.appendChild(buttonNext);\n\n    const dialogContent = dialog.querySelector('.dialog__content');\n    dialogContent.appendChild(buttonWrapper);\n}\n\n/**\n * function attached to control button (created by function 'createControl()') click event\n * it rerenders title, body, button labels of dialog\n *\n * @param {HTMLElement} dialog - an HTML element created by createDialog()\n * @param {array} dialogArray - array of objects contaning title and body {title:title, body:body} to build dialog pager\n * @param {number} nextState - position of object in dialogArray that will be used to update dialog title, body, and button labels\n *\n */\nfunction addDialogEvent(dialog, dialogArray, nextState) {\n    nextState = parseInt(nextState);\n    dialog.querySelector('.dialog__heading').innerText =\n        dialogArray[nextState].title;\n    dialog.querySelector('.dialog__body-copy').innerHTML =\n        dialogArray[nextState].body;\n\n    if (nextState === 0) {\n        dialog\n            .querySelectorAll('button')[1]\n            .setAttribute('data-nextstate', `${dialogArray.length - 1}`);\n        dialog.querySelectorAll('.dialog__underline-transition')[0].innerText =\n            dialogArray[dialogArray.length - 1].shortname;\n\n        dialog.querySelectorAll('.dialog__underline-transition')[1].innerText =\n            dialogArray[nextState + 1].shortname;\n        dialog\n            .querySelectorAll('button')[2]\n            .setAttribute('data-nextstate', `${nextState + 1}`);\n    } else if (nextState === dialogArray.length - 1) {\n        dialog.querySelectorAll('.dialog__underline-transition')[0].innerText =\n            dialogArray[nextState - 1].shortname;\n        dialog\n            .querySelectorAll('button')[1]\n            .setAttribute('data-nextstate', `${nextState - 1}`);\n\n        dialog.querySelectorAll('.dialog__underline-transition')[1].innerText =\n            dialogArray[0].shortname;\n        dialog\n            .querySelectorAll('button')[2]\n            .setAttribute('data-nextstate', '0');\n    } else {\n        dialog.querySelectorAll('.dialog__underline-transition')[0].innerText =\n            dialogArray[nextState - 1].shortname;\n        dialog\n            .querySelectorAll('button')[1]\n            .setAttribute('data-nextstate', `${nextState - 1}`);\n\n        dialog.querySelectorAll('.dialog__underline-transition')[1].innerText =\n            dialogArray[nextState + 1].shortname;\n        dialog\n            .querySelectorAll('button')[2]\n            .setAttribute('data-nextstate', `${nextState + 1}`);\n    }\n}\n\n/**\n * function that creates HTML structure of dialog control buttons\n *\n * @param {array} dialogArray - array of objects contaning title and body {title:title, body:body} to build dialog pager\n * @param {number} position - position of the <li> in the <ul>, used to calculate nextState\n * @param {string} direction - either \"left\" or \"right\", this will determine the type of icon being attached to the button\n *\n */\nfunction controlButton(dialogArray, position, direction) {\n    const button = document.createElement('button');\n    const buttonLabel = document.createElement('span');\n    buttonLabel.classList.add('dialog__underline-transition');\n\n    let nextState = checkNextState(dialogArray, position, direction);\n\n    button.setAttribute('data-nextstate', `${nextState}`);\n\n    if (dialogArray[nextState].shortname) {\n        buttonLabel.innerText = dialogArray[nextState].shortname;\n    } else {\n        buttonLabel.innerText = dialogArray[nextState].title;\n    }\n\n    const buttonIcon = createHTMLElement('span', [\n        {\n            label: 'class',\n            val: `icon far fa-long-arrow-${direction}`,\n        },\n    ]);\n\n    if (direction === 'left') {\n        buttonIcon.setAttribute(aria.label, 'previous item');\n    } else {\n        buttonIcon.setAttribute(aria.label, 'next item');\n    }\n\n    const buttonLabelWrapper = document.createElement('div');\n    buttonLabelWrapper.appendChild(buttonLabel);\n\n    button.appendChild(buttonIcon);\n    button.appendChild(buttonLabelWrapper);\n\n    return button;\n}\n\n/**\n * function calculates and returns nextState\n * it will be used to create click event of control button\n *\n * @param {array} dialogArray - array of objects contaning title and body {title:title, body:body} to build dialog pager\n * @param {number} position - position of the <li> in the <ul>, used to calculate nextState\n * @param {string} direction - either \"left\" or \"right\"\n *\n */\nfunction checkNextState(dialogArray, position, direction) {\n    const pos = parseInt(`${position}`);\n    let nextState;\n\n    if (pos === 0) {\n        if (direction === 'left') {\n            nextState = dialogArray.length - 1;\n        } else {\n            nextState = pos + 1;\n        }\n    } else if (pos === dialogArray.length - 1) {\n        if (direction === 'left') {\n            nextState = pos - 1;\n        } else {\n            nextState = 0;\n        }\n    } else {\n        if (direction === 'left') {\n            nextState = pos - 1;\n        } else {\n            nextState = pos + 1;\n        }\n    }\n\n    return nextState;\n}\n\n/**\n * removes dialog from document\n *\n * @param {HTMLElement} dialog - HTML element created by created by function createDialog()\n * @param {HTMLElement} background - background of dialog\n *\n */\nfunction closeDialog(dialog, modal) {\n    const parent = dialog.parentNode;\n    parent.removeChild(dialog);\n\n    if (scrollTo && !verticallyInWindow(modal)) {\n        scroll.to(modal, scrollDuration);\n    }\n}\n\nfunction trapFocus(modal) {\n    let modalInner = modal.querySelector('.dialog__inner');\n\n    trap = createFocusTrap(modalInner, {\n        clickOutsideDeactivates: true,\n    });\n\n    trap.activate();\n}\n\nexport default {\n    launchFn: launchModal,\n    launchQuery: `.${className}`,\n};\n","import { actionOnScroll } from '../../../action-on-scroll';\nimport { checkIntersectionObserver } from '../../../util';\n\nconst className = 'animate-number',\n    DURATION = 1500; // set duration variable 1500 ms increase if want longer animation\n\n/**\n *\n * find container containing the number\n *\n * @param {HTMLElement} element - html element to be animated\n * @return {HTMLElement} element - if element to be animated is found return it else return original element\n */\n\nfunction findNumberContainer(widget) {\n    const nested = widget.querySelector('.animate--number__number');\n    return typeof nested !== 'undefined' && nested !== null ? nested : widget;\n}\n\n/**\n *\n * Intial setup\n * add data attr : data-animation-number-value - number to animate\n * add data attr : data-animation-number-float - boolean value if number is float\n * add data attr : data-animation-numner-start - number value of where to start animation from\n * add class name - animate--number--init\n *\n * @param {HTMLElement} element - The section that need to be animated\n * @return {boolean} - if number animation is setup?\n */\n\nfunction initNumberAnimation(widget) {\n    const startStr = widget.dataset.animationNumberStart || '0';\n    const start = parseFloat(startStr);\n    const numberContainer = findNumberContainer(widget);\n    const numberStr = numberContainer.innerHTML.trim().replace(/,/g, '');\n    if (numberStr.match(/^-?[0-9,]+(\\.[0-9,]+])?/)) {\n        widget.dataset.animationNumberValue = parseFloat(numberStr);\n        widget.dataset.animationNumberFloat = !!numberStr.match(/\\./);\n        widget.dataset.animationNumberStart = start;\n        numberContainer.innerHTML = startStr;\n        widget.classList.add('animate--number--init');\n        return true;\n    } else {\n        return false;\n    }\n}\n\n/**\n *\n * run animation function\n *\n * @param {HTMLElement} element - element to be animated\n */\n\nfunction runNumberAnimation(widget) {\n    const numberContainer = findNumberContainer(widget);\n\n    const isFloat = widget.dataset.animationNumberFloat;\n    const value = parseInt(widget.dataset.animationNumberValue);\n    const format = widget.dataset.animationNumberFormat;\n\n    if (value !== 0) {\n        let first = true;\n        let startTime = 0;\n        let startValue = parseInt(widget.dataset.animationNumberStart);\n        let lastValue = 0;\n\n        /**\n         * function to run animation\n         *\n         * @param {timestamp} time stamp - time stamp from requestAnimationFrame API\n         */\n\n        const f = (timestamp) => {\n            if (first) {\n                startTime = timestamp;\n                first = false;\n            }\n            const t = (timestamp - startTime) / DURATION;\n            // difference in time between two discrete points in time divied by duration\n\n            const finish = t >= 1;\n\n            let k = finish ? 1 : 1 - Math.pow(1 - t, 4);\n\n            let v = k * (value - startValue) + startValue;\n\n            if (isFloat) {\n                v = Math.round(v);\n            }\n\n            if (lastValue !== v) {\n                lastValue = v;\n                numberContainer.innerHTML =\n                    format === 'true'\n                        ? v.toLocaleString('en-GB') // append and format to GB\n                        : v;\n            }\n\n            if (finish) {\n                //end of animation\n                widget.classList.add('animate--number--complete');\n            } else {\n                //repeat call requestAnimationFrame until finish is true\n                window.requestAnimationFrame(f);\n            }\n        };\n        /**\n         * run requestAnimationFrame to repaint animation to screen\n         */\n\n        window.requestAnimationFrame(f);\n    }\n}\n\n/**\n *\n * Intial setup\n *\n * number animation should contain a wrapper with a class name 'animate-number'\n * there should be at least one child element with a class name 'animate--number__heading'\n * and a span element with a class name 'animate--number__number' containing the number\n *\n * e.g.\n *\n * <div class=\"animate-number\">\n *  <h2 class=\"animate animate--number__heading\">\n *      <span class=\"animate--number__number\">10,000</span>\n *  </h2>\n * </div>\n *\n * @param {HTMLElement} elm - An HTML element with the 'animate-number' class.\n *\n */\n\nfunction init(elm) {\n    const lazyNumbers = [].slice.call(elm.querySelectorAll('.animate--number'));\n    /**\n     * check if browser support IntersectionObserver api\n     */\n\n    if (checkIntersectionObserver()) {\n        lazyNumbers.forEach(function (lazyUnit) {\n            initNumberAnimation(lazyUnit);\n            /**\n             * pass the element and function to actionOnScroll\n             * to animate when element is intersecting\n             */\n            actionOnScroll(lazyUnit, runNumberAnimation);\n        });\n    }\n}\n\nexport default {\n    launchFn: init,\n    launchQuery: `.${className}`,\n};\n","/**\n * Pagination\n *\n * @module patterns/pagination/pagination\n * @author Web Development\n * @copyright City, University of London 2018\n */\nimport scroll from 'zenscroll';\nimport { removeClass, reduceMotion } from '../../util';\nimport aria from '../../aria-attributes';\n\nconst className = 'pagination',\n    pageClassName = 'page',\n    wrapperClassName = className + '__wrapper',\n    controlsClassName = className + '__controls',\n    controlsElementClassName = controlsClassName + '__element',\n    ellipsisClassName = controlsClassName + '__ellipsis',\n    buttonClassName = controlsClassName + '__button',\n    summaryClassName = className + '__summary',\n    nextPrevRegEx = new RegExp(`${buttonClassName}--(next|prev)`),\n    maximumButtonsToDisplay = 6,\n    oneSecond = 1000,\n    scrollDuration = reduceMotion() ? 0 : oneSecond,\n    minimumPagesRequiringEllipsis = 2;\n\n/**\n * Creates a function for enabling/disabling the next/previous page buttons when\n * there's nothing for them to do.\n *\n * @param {HTMLButtonElement} next - The next page button.\n * @param {HTMLButtonElement} prev - The previous page button.\n * @param {number} pageCount - The total number of pages in this paginated element.\n * @returns {Function} A function that will disable the next/previous buttons when there is no next/previous page.\n */\nfunction createToggleNextPrev(next, prev, pageCount) {\n    /***\n     * Disables the next/previous page buttons if there is no next/previous page\n     * relative to this page.\n     *\n     * @param {number} pageNumber - The current page number.\n     */\n    const toggleNextPrev = (pageNumber) => {\n        pageCount === pageNumber\n            ? next.setAttribute('disabled', 'true')\n            : next.removeAttribute('disabled');\n\n        1 === pageNumber\n            ? prev.setAttribute('disabled', 'true')\n            : prev.removeAttribute('disabled');\n    };\n    return toggleNextPrev;\n}\n\n/**\n * Calculate proximity to current page, so we can hide extraneous buttons.\n *\n * @param {number} pageCount - The total number of pages in this paginated element.\n * @param {HTMLButtonElement[]} controls - An array of control buttons.\n * @param {number} pageNumber - The number of the current page.\n */\nfunction setProximity(pageCount, controls, pageNumber) {\n    if (pageCount > maximumButtonsToDisplay) {\n        controls.forEach(function (button) {\n            if (!button.className.match(nextPrevRegEx)) {\n                const buttonNumber = Number.parseInt(button.dataset.page);\n                button.dataset.proximity = buttonNumber - pageNumber;\n            }\n        });\n    }\n}\n\n/**\n * Set the attributes to make a page button (un)selected.\n *\n * @param {HTMLButtonElement} button - The button element.\n * @param {boolean} selected - Should the button indicated selection?\n */\nfunction toggleButton(button, selected) {\n    button.setAttribute(aria.expanded, selected);\n    selected\n        ? button.setAttribute('disabled', 'true')\n        : button.removeAttribute('disabled');\n    selected\n        ? button.setAttribute(aria.current, 'page')\n        : button.removeAttribute(aria.current);\n}\n\n/**\n * 'Close' all pages and mark all buttons as not selected.\n *\n * @param {HTMLElement[]} pages - An array of page elements.\n * @param {HTMLButtonElement[]} controls - An array of control buttons.\n */\nfunction closeAll(pages, controls) {\n    pages.forEach((page) => (page.dataset.open = false));\n    controls.forEach(function (button) {\n        if (!button.className.match(nextPrevRegEx)) {\n            toggleButton(button, false);\n        }\n    });\n}\n\n/**\n * Create a function that, given a page number, sets the page to be open and\n * optionally scrolls it into view.\n *\n * @param {HTMLElement[]} pages - The pages of this paginated element.\n * @param {HTMLElement} controls - The nav element containing the pagination control buttons.\n * @param {Function} toggleNextPrev - A function to enable/disable the next/previous page buttons when appropriate.\n * @returns {Function} A function for opening a given page number and optionally scrolling it into view.\n */\nfunction createOpenPage(pages, controls, toggleNextPrev) {\n    /**\n     * Open a given page number and optionally scroll it into view.\n     *\n     * @param {number} pageNumber - The number of the page to open.\n     * @param {boolean} [focus] - Focus the newly-opened page? Defaults to false.\n     * @param {boolean} [scrollTo] - Scroll to the top of the newly-opened page? Defaults to false.\n     */\n    const openPage = (pageNumber, focus, scrollTo) => {\n        const pagesArray = Array.from(\n                pages.querySelectorAll(`.${pageClassName}`)\n            ),\n            controlsArray = Array.from(controls.querySelectorAll('button'));\n        closeAll(pagesArray, controlsArray);\n        const page = pages.querySelector(\n                `.${pageClassName}:nth-of-type(${pageNumber})`\n            ),\n            button = controls.querySelector(`[data-page=\"${pageNumber}\"]`);\n        setProximity(pagesArray.length, controlsArray, pageNumber);\n        toggleNextPrev(pageNumber);\n        page.dataset.open = true;\n        toggleButton(button, true);\n        focus && page.focus();\n        scrollTo && scroll.to(page, scrollDuration);\n    };\n    return openPage;\n}\n\n/**\n * Create a function that will respond to a next or previous button click.\n *\n * @param {HTMLElement} controls - The controls container.\n * @param {Function} newPageFn - A function that, given the current page number, returns the page number to open.\n * @param {Function} openPage - A function that, given a page number, opens the page and optionally scrolls it into view.\n * @returns {Function} A function to respond to next/previous button clicks.\n */\nfunction createNextPrevOpenPage(controls, newPageFn, openPage) {\n    /**\n     * Returns a function that responds to next/previous button clicks.\n     */\n    const nextPrevOpenPage = () => {\n        const currentPage = Number.parseInt(\n            controls.querySelector(`[${aria.expanded}=\"true\"]`).dataset.page\n        );\n        openPage(newPageFn(currentPage), true, false);\n    };\n    return nextPrevOpenPage;\n}\n\n/**\n * Create and set summary text for a paginated element.\n *\n * @param {HTMLParagraphElement} summary - The element to transform into a summary.\n * @param {number} pageCount - The number of pages in the paginated element.\n * @param {number} [itemCount] - Optionally, the total number of items across all pages.\n */\nfunction setSummaryText(summary, pageCount, itemCount) {\n    let summaryText = `${pageCount} pages)`;\n    if (itemCount && Number.parseInt(itemCount)) {\n        summaryText = `(${itemCount} items on ` + summaryText;\n    } else {\n        summaryText = '(' + summaryText;\n    }\n    summary.appendChild(document.createTextNode(summaryText));\n}\n\n/**\n * Sets attributes and adds listeners to the next/previous page buttons.\n *\n * @param {HTMLButtonElement} next - The next page button element.\n * @param {HTMLButtonElement} prev - The previous page button element.\n * @param {HTMLElement} controls - The controls container element.\n * @param {number} pageCount - The total number of pages in the paginated element.\n * @param {Function} openPage - A function that, given a page number, opens the page and optionally scrolls it into view.\n */\nfunction prepareNextPrev(next, prev, controls, pageCount, openPage) {\n    [\n        {\n            button: next,\n            class: buttonClassName + '--next',\n            text: 'Next page',\n            newPageFn: (pageNumber) => pageNumber < pageCount && pageNumber + 1,\n        },\n        {\n            button: prev,\n            class: buttonClassName + '--prev',\n            text: 'Previous page',\n            newPageFn: (pageNumber) => pageNumber > 1 && pageNumber - 1,\n        },\n    ].forEach((button) => {\n        const btn = button.button,\n            btnSpan = document.createElement('span');\n\n        btn.className = button.class;\n        btn.setAttribute('type', 'button');\n        btnSpan.appendChild(document.createTextNode(button.text));\n        btn.appendChild(btnSpan);\n        btn.addEventListener(\n            'click',\n            createNextPrevOpenPage(controls, button.newPageFn, openPage),\n            true\n        );\n    });\n}\n\n/**\n * Create a new page select button.\n *\n * @param {number} pageNumber - The page that this button is for.\n * @param {number} totalPages - The total number of pages in the paginated element.\n * @returns {HTMLButtonElement} A new button element.\n */\nfunction createPageButton(pageNumber, totalPages) {\n    const button = document.createElement('button'),\n        buttonSpan = document.createElement('span');\n    buttonSpan.appendChild(document.createTextNode(pageNumber));\n    button.dataset.page = pageNumber;\n    button.setAttribute('type', 'button');\n    button.setAttribute(aria.label, `Open page ${pageNumber}`);\n\n    if (totalPages - pageNumber === 1) {\n        button.className = `${controlsElementClassName} ${buttonClassName} ${buttonClassName}--penultimate`;\n    } else if (totalPages === pageNumber) {\n        button.className = `${controlsElementClassName} ${buttonClassName} ${buttonClassName}--last`;\n    } else {\n        button.className = `${controlsElementClassName} ${buttonClassName}`;\n    }\n\n    button.appendChild(buttonSpan);\n    return button;\n}\n\n/**\n * Adds pagination controls to an element containing two or more page elements.\n *\n * e.g.\n *\n * <div class=\"pagination\">\n * <div class=\"page\">Page 1 content</div>\n * <div class=\"page\">Page 2 content</div>\n * </div>\n *\n * @param {HTMLElement} elem - The element to paginate.\n * @param {number} [itemCount] - Optionally, the total number of items on all pages combined.\n */\nfunction addPagination(elem, itemCount) {\n    const wrapper = document.createElement('div'),\n        pages = Array.from(elem.querySelectorAll(`.${pageClassName}`)),\n        controls = document.createElement('nav'),\n        next = document.createElement('button'),\n        prev = document.createElement('button'),\n        pageButtons = [],\n        summary = document.createElement('p'),\n        toggleNextPrev = createToggleNextPrev(next, prev, pages.length),\n        openPage = createOpenPage(elem, controls, toggleNextPrev),\n        ellipsisFirst = document.createElement('span'),\n        ellipsisFirstInner = document.createElement('span'),\n        ellipsisLast = document.createElement('span'),\n        ellipsisLastInner = document.createElement('span');\n\n    if (!pages.length > 1) {\n        /**\n         * too few pages, doesnt need pagination.\n         * remove the classname to avoid conflicting\n         * styles then bail\n         */\n        removeClass(elem, className, false);\n        return;\n    }\n\n    ellipsisFirst.className = `${controlsElementClassName} ${ellipsisClassName} ${ellipsisClassName}--first`;\n    ellipsisFirstInner.innerText = '';\n    ellipsisFirst.appendChild(ellipsisFirstInner);\n    ellipsisLast.className = `${controlsElementClassName} ${ellipsisClassName} ${ellipsisClassName}--last`;\n    ellipsisLastInner.innerText = '';\n    ellipsisLast.appendChild(ellipsisLastInner);\n\n    prepareNextPrev(next, prev, controls, pages.length, openPage);\n\n    pageButtons.push(prev);\n    for (let pageNumber = 1; pageNumber <= pages.length; pageNumber++) {\n        const pageButton = createPageButton(pageNumber, pages.length);\n        pageButton.addEventListener('click', () =>\n            openPage(pageNumber, true, false)\n        );\n\n        if (\n            pages.length > minimumPagesRequiringEllipsis &&\n            pageNumber === pages.length\n        ) {\n            pageButtons.push(ellipsisLast);\n        }\n\n        pageButtons.push(pageButton);\n\n        if (pages.length > minimumPagesRequiringEllipsis && pageNumber === 1) {\n            pageButtons.push(ellipsisFirst);\n        }\n    }\n    pageButtons.push(next);\n\n    wrapper.className = wrapperClassName;\n    controls.className = controlsClassName;\n    controls.dataset.pagecount = pages.length;\n    controls.setAttribute(aria.label, 'Pagination');\n    summary.className = summaryClassName;\n    setSummaryText(summary, pages.length, itemCount);\n\n    elem.parentNode.replaceChild(wrapper, elem);\n    wrapper.appendChild(elem);\n    pageButtons.forEach((pageButton) => controls.appendChild(pageButton));\n    openPage(1, false, false);\n\n    wrapper.appendChild(controls);\n    wrapper.appendChild(summary);\n}\n\nexport { addPagination, pageClassName };\n\nexport default {\n    launchFn: addPagination,\n    launchQuery: `.${className}`,\n};\n","/**\n * Secondary navigation\n *\n * @module patterns/navigation/navigation-primary\n * @author Web Development\n * @copyright City, University of London 2019\n */\nimport { toBool, appendAll } from '../../util';\nimport aria from '../../aria-attributes';\n\nconst className = 'navigation',\n    classNameSpecific = className + '--primary',\n    topLevelClassName = classNameSpecific + '__section-text',\n    buttonClassName = className + '__button',\n    openCloseTextClassName = buttonClassName + '__open-close',\n    navigationTextClassName = buttonClassName + '__navigation',\n    headerClassName = classNameSpecific + '__menu__header',\n    veilClassName = className + '__veil',\n    openText = 'Open',\n    closeText = 'Close',\n    navigationText = 'navigation section',\n    tabKey = 'Tab',\n    escapeKey = 'Escape';\n\n/**\n * Return a function to toggle everything closed.\n *\n * @param {HTMLElement} navigation - The primary navigation element.\n * @param {HTMLElement} veil - The veiling element.\n * @returns {function} - A function for toggling all the menus closed.\n */\nfunction createCloseAll(navigation, veil) {\n    return () => {\n        const buttons = Array.from(\n            navigation.querySelectorAll(\n                '.navigation--primary__level1 > .navigation__button'\n            )\n        );\n\n        buttons.forEach((button) => {\n            button.setAttribute(aria.expanded, 'false');\n            button\n                .querySelector(`.${openCloseTextClassName}`)\n                .replaceChild(\n                    document.createTextNode(openText),\n                    button.querySelector(`.${openCloseTextClassName}`)\n                        .firstChild\n                );\n        });\n        veil.dataset.on = 'false';\n    };\n}\n\n/**\n * Return a function to toggle whether a navigation section is open.\n * @param {HTMLElement} button - The button to toggle.\n * @param {function} closeAll - A function for closing all menus.\n * @param {HTMLElement} veil - The veiling element.\n * @returns {function} - A function for toggling a menu open or closed.\n */\nfunction createSectionToggle(button, closeAll, veil) {\n    return () => {\n        const open = !toBool(button.getAttribute(aria.expanded));\n\n        closeAll();\n\n        if (open) {\n            button.closest(`.${classNameSpecific}`).dataset.open = 'true';\n            veil.dataset.on = 'true';\n            button.setAttribute(aria.expanded, open);\n            button\n                .querySelector(`.${openCloseTextClassName}`)\n                .replaceChild(\n                    document.createTextNode(closeText),\n                    button.querySelector(`.${openCloseTextClassName}`)\n                        .firstChild\n                );\n        }\n    };\n}\n\n/**\n * Create toggle buttons from the top level anchors.\n *\n * @param {HTMLElement} navigation - The primary navigation element.\n * @param {HTMLElement} veil - The veiling element.\n * @param {function} closeAll - A function for closing all menus.\n */\nfunction prepareTopLevel(navigation, veil, closeAll) {\n    const topLevels = Array.from(\n        navigation.querySelectorAll(`.${topLevelClassName}`)\n    );\n\n    topLevels.forEach((el) => {\n        const listItem = el.parentNode,\n            button = document.createElement('button'),\n            buttonDiv = document.createElement('div'),\n            srOpenCloseSpan = document.createElement('span'),\n            srNavigationSpan = document.createElement('span'),\n            toggleSection = createSectionToggle(button, closeAll, veil);\n\n        // LIs have tabindex so they're accessible with no JS, remove it\n        el.removeAttribute('tabindex');\n\n        button.setAttribute(aria.expanded, 'false');\n        button.setAttribute(aria.owns, el.nextElementSibling.id);\n        button.setAttribute('type', 'button');\n        button.id = el.nextElementSibling.id + '-button';\n        button.className = buttonClassName;\n\n        srOpenCloseSpan.className = openCloseTextClassName;\n        srOpenCloseSpan.appendChild(document.createTextNode(openText));\n\n        srNavigationSpan.className = navigationTextClassName;\n        srNavigationSpan.appendChild(document.createTextNode(navigationText));\n\n        button.addEventListener('click', () => toggleSection(), true);\n\n        appendAll(buttonDiv, [\n            srOpenCloseSpan,\n            document.createTextNode(' '),\n            el,\n            document.createTextNode(' '),\n            srNavigationSpan,\n        ]);\n        button.append(buttonDiv);\n        listItem.prepend(button);\n    });\n}\n\n/**\n * Add event listeners to top level buttons enabling shift-tabbing into the previous\n * section.\n *\n * @param {HTMLElement} navigation - The primary navigation element.\n * @param {function} closeAll - A function for closing all menus.\n * @param {HTMLElement} veil - The veiling element.\n */\nfunction setupTabPrevious(navigation, closeAll, veil) {\n    const firstButton = navigation.querySelector(\n            '.navigation--primary__level1:first-of-type > .navigation__button'\n        ),\n        restButtons = Array.from(\n            navigation.querySelectorAll(\n                '.navigation--primary__level1:not(:first-of-type) > .navigation__button'\n            )\n        );\n\n    // If we tab out of the open, first menu into the other header content, close the menu.\n    firstButton.addEventListener('keydown', (e) => {\n        if (\n            toBool(firstButton.getAttribute(aria.expanded)) &&\n            tabKey === e.key &&\n            e.shiftKey\n        ) {\n            closeAll();\n        }\n    });\n\n    restButtons.forEach((thisSectionButton) => {\n        const previousSection =\n                thisSectionButton.parentElement.previousElementSibling,\n            previousSectionButton = previousSection.querySelector('button'),\n            lastNavigationAnchor = previousSection.querySelector(\n                '.navigation__level2 > li:last-of-type > a'\n            )\n                ? previousSection.querySelector(\n                      '.navigation__level2 > li:last-of-type > a'\n                  )\n                : previousSection\n                      .querySelector('.navigation__level2 > li:last-of-type')\n                      .previousElementSibling.querySelector('a'),\n            togglePreviousSection = createSectionToggle(\n                previousSectionButton,\n                closeAll,\n                veil\n            );\n\n        thisSectionButton.addEventListener(\n            'keydown',\n            (e) => {\n                if (\n                    toBool(thisSectionButton.getAttribute(aria.expanded)) &&\n                    tabKey === e.key &&\n                    e.shiftKey\n                ) {\n                    e.preventDefault();\n\n                    togglePreviousSection();\n                    lastNavigationAnchor.focus();\n                }\n            },\n            true\n        );\n    });\n}\n\n/**\n * Add event listeners to the final anchor in each section allowing tabbing into\n * the next navigation section.\n *\n * @param {HTMLElement} navigation - The primary navigation element.\n * @param {function} closeAll - A function to close the entire menu.\n * @param {HTMLElement} veil - The veiling element.\n */\nfunction setupTabNext(navigation, closeAll, veil) {\n    const closeButton = navigation.querySelector(\n            '.navigation--primary__level1:last-of-type .wrapper--navigation--primary__menu__close button'\n        ),\n        restSectionsCloseButtons = Array.from(\n            navigation.querySelectorAll(\n                '.navigation--primary__level1:not(:last-of-type) .wrapper--navigation--primary__menu__close button'\n            )\n        );\n\n    // If we tab out of the open, first menu into the other header content, close the menu.\n    closeButton.addEventListener('keydown', (e) => {\n        if (\n            toBool(\n                closeButton\n                    .closest('.navigation--primary__level1')\n                    .querySelector('button')\n                    .getAttribute(aria.expanded)\n            ) &&\n            tabKey === e.key &&\n            !e.shiftKey\n        ) {\n            closeAll();\n        }\n    });\n\n    restSectionsCloseButtons.forEach((closeButton) => {\n        const nextSectionButton = closeButton\n                .closest('.navigation--primary__level1')\n                .nextElementSibling.querySelector('button'),\n            toggleNextSection = createSectionToggle(\n                nextSectionButton,\n                closeAll,\n                veil\n            );\n\n        closeButton.addEventListener(\n            'keydown',\n            (e) => {\n                if (tabKey === e.key && !e.shiftKey) {\n                    e.preventDefault();\n\n                    toggleNextSection();\n                    nextSectionButton\n                        .closest('.navigation--primary__level1')\n                        .querySelector(`.${headerClassName} a`)\n                        .focus();\n                }\n            },\n            true\n        );\n    });\n}\n\n/**\n * Wrap anchor text in spans for styling.\n *\n * @param {HTMLElement} navigation - The primary navigation element.\n */\nfunction prepareLowerLevels(navigation) {\n    Array.from(navigation.querySelectorAll('.navigation__level2 li')).forEach(\n        (navigationItem) => {\n            const link = navigationItem.querySelector('a'),\n                textWrapper = document.createElement('span');\n\n            textWrapper.appendChild(link.firstChild.cloneNode(true));\n            link.replaceChild(textWrapper, link.firstChild);\n        }\n    );\n}\n\n/**\n * Wrap header text in spans for styling.\n *\n * @param {HTMLElement} navigation - The primary navigation element.\n */\nfunction prepareHeaders(navigation) {\n    Array.from(navigation.querySelectorAll(`.${headerClassName}`)).forEach(\n        (header) => {\n            const link = header.querySelector('a'),\n                textWrapper = document.createElement('span');\n\n            if (!link) {\n                const currentPageWrapper = document.createElement('span'),\n                    linkText = header.firstChild.wholeText.trim() + ' overview';\n\n                textWrapper.appendChild(document.createTextNode(linkText));\n                currentPageWrapper.appendChild(textWrapper);\n                header.replaceChild(currentPageWrapper, header.firstChild);\n            } else {\n                textWrapper.innerText = link.innerText + ' overview';\n                link.replaceChild(textWrapper, link.firstChild);\n            }\n        }\n    );\n}\n\n/**\n * Add close buttons to menu sections.\n *\n * @param {HTMLElement} navigation\n */\nfunction addCloseButtons(navigation, closeAll) {\n    Array.from(\n        navigation.querySelectorAll('.navigation--primary__menu__content')\n    ).forEach((menu) => {\n        const header = menu.querySelector(`.${headerClassName}`),\n            closeButtonWrapper = document.createElement('div'),\n            closeButton = document.createElement('button'),\n            closeButtonDiv = document.createElement('div'),\n            closeButtonText = document.createElement('span'),\n            closeButtonIcon = document.createElement('span'),\n            text = 'Close ' + header.innerText.trim() + ' menu';\n\n        closeButtonText.appendChild(document.createTextNode(text));\n        closeButtonText.className = 'navigation--primary__menu__close__text';\n\n        closeButtonIcon.setAttribute(aria.hidden, 'true');\n        closeButtonIcon.className =\n            'fas fa-fw fa-times navigation--primary__menu__close__icon';\n\n        closeButtonWrapper.className =\n            'wrapper--navigation--primary__menu__close';\n\n        closeButton.className = 'navigation--primary__menu__close';\n\n        appendAll(closeButtonDiv, [closeButtonText, closeButtonIcon]);\n        closeButton.appendChild(closeButtonDiv);\n        closeButton.setAttribute('type', 'button');\n        closeButton.title = text;\n        closeButton.addEventListener('click', () => closeAll(), true);\n\n        closeButtonWrapper.appendChild(closeButton);\n\n        menu.appendChild(closeButtonWrapper);\n    });\n}\n\n/**\n * Transform the Matrix-generated navigation lists into an interactive menu.\n *\n * @param {HTMLElement} navigation - The primary navigation element.\n */\nfunction launchPrimaryNavigation(navigation) {\n    // During testing only: remove 'under construction' indicators globally\n//     navigation.innerHTML = navigation.innerHTML\n//         .replace(/\\(\\( /g, '')\n//         .replace(/ \\)\\)/g, '');\n\n    const veil = document.createElement('div'),\n        closeAll = createCloseAll(navigation, veil);\n\n    veil.className = veilClassName;\n    veil.setAttribute(aria.hidden, 'true');\n    document\n        .querySelector('body')\n        .insertBefore(veil, document.querySelector('main'));\n\n    prepareTopLevel(navigation, veil, closeAll);\n    prepareLowerLevels(navigation, veil);\n    prepareHeaders(navigation);\n    addCloseButtons(navigation, closeAll);\n\n    // Allow tabbing from one section to another,\n    // and close when tabbing out of the navigation\n    setupTabPrevious(navigation, closeAll, veil);\n    setupTabNext(navigation, closeAll, veil);\n\n    // If the navigation is open, close on escape.\n    navigation.addEventListener(\n        'keydown',\n        (e) => {\n            if (\n                navigation.querySelector(\n                    `.${buttonClassName}[aria-expanded='true']`\n                ) &&\n                escapeKey === e.key\n            ) {\n                e.preventDefault();\n                closeAll();\n            }\n        },\n        true\n    );\n\n    // If the navigation is open, close it on click outside it.\n    window.addEventListener(\n        'click',\n        (e) => {\n            if (\n                navigation.querySelector(\n                    `.${buttonClassName}[aria-expanded='true']`\n                ) &&\n                !e.target.closest(`.${classNameSpecific}`)\n            ) {\n                closeAll();\n            }\n        },\n        true\n    );\n}\n\nexport default {\n    launchFn: launchPrimaryNavigation,\n    launchQuery: `.${classNameSpecific}`,\n};\n","import { reduceMotion, toBool, verticallyInWindow } from '../../util';\n\nimport aria from '../../aria-attributes';\n/**\n * Show-more\n *\n * @module patterns/show-more/show-more\n * @author Web Development\n * @copyright City, University of London 2018-2019\n */\nimport scroll from 'zenscroll';\n\nconst className = 'show-more',\n    oneSecond = 1000,\n    scrollDuration = reduceMotion() ? 0 : oneSecond,\n    scrollTo = true;\n\n/**\n * Open or close the show-more element.\n *\n * @param {object} showMore - The show-more element\n */\nfunction toggleShowMore(showMore) {\n    const firstHeadingElement = showMore.querySelector(\n            '.show-more__heading, h2, h3, h4, h5, h6'\n        ),\n        contentElement = showMore.querySelector('.show-more__content'),\n        showMoreAnchorLinkText = showMore.querySelector(\n            '.show-more__link-text'\n        ),\n        hiddenElement = toBool(contentElement.dataset.hidden);\n\n    if (hiddenElement) {\n        showMore.dataset.open = true;\n        contentElement.dataset.hidden = false;\n        showMoreAnchorLinkText.textContent = 'Show less';\n    } else {\n        showMore.dataset.open = false;\n        contentElement.dataset.hidden = true;\n        showMoreAnchorLinkText.textContent = 'Show more';\n    }\n\n    if (firstHeadingElement && !verticallyInWindow(firstHeadingElement)) {\n        scrollTo && scroll.to(firstHeadingElement, scrollDuration);\n    }\n}\n\n/**\n * create 'show-more' button in the following HTML structure then append it to '.show-more' HTML element\n * <div class=\"show-more__button__container\">\n *  <span class=\"show-more__button\">\n *    <a href=\"\">\n *      <span class=\"icon fal fa-plus-circle\" aria-hidden=\"true\"></span>\n *      <span class=\"icon fal fa-minus-circle\" aria-hidden=\"true\"></span>\n *      <span class=\"show-more__link-text\">Show more</span>\n *      <span class=\"sr-only\"> about the {[data]=title} </span>\n *    </a>\n *  </span>\n * </div>\n *\n * @param {HTMLElement} showMoreElement - HTML parent element with classname 'show-more'\n */\nfunction createShowMoreButton(showMoreElement) {\n    const showMoreButtonDiv = document.createElement('div'),\n        showMoreButtonSpan = document.createElement('span'),\n        showMoreButton = document.createElement('button'),\n        icon = document.createElement('span'),\n        showMoreText = document.createElement('span'),\n        dataTitle = showMoreElement.getAttribute('data-title'),\n        srTextElement = document.createElement('span');\n\n    showMoreButtonDiv.classList.add('show-more__button__container');\n    showMoreButtonSpan.classList.add('show-more__button');\n    showMoreButtonDiv.appendChild(showMoreButtonSpan);\n\n    showMoreButton.setAttribute('type', 'button');\n    showMoreButton.addEventListener('click', () =>\n        toggleShowMore(showMoreElement)\n    );\n\n    showMoreButtonSpan.appendChild(showMoreButton);\n\n    icon.classList.add('icon');\n    icon.classList.add('fal');\n    icon.setAttribute(aria.hidden, true);\n\n    showMoreText.classList.add('show-more__link-text');\n    showMoreText.appendChild(document.createTextNode('Show more'));\n\n    srTextElement.appendChild(document.createTextNode('about ' + dataTitle));\n    srTextElement.classList.add('sr-only');\n\n    showMoreButton.appendChild(icon);\n    showMoreButton.appendChild(showMoreText);\n    showMoreButton.appendChild(srTextElement);\n\n    showMoreElement.appendChild(showMoreButtonDiv);\n}\n\n/**\n * Initial function on page load; it hides text container of 'show-more' DOM\n * element, and creates the controlling button.\n *\n * @param {HTMLElement} showMoreElement - HTML parent element with classname 'show-more'\n */\nfunction showMore(showMoreElement) {\n    const showMoreTextElements = showMoreElement.querySelectorAll(\n        '.show-more__content'\n    );\n\n    showMoreTextElements.forEach((element) => {\n        element.dataset.hidden = true;\n    });\n\n    createShowMoreButton(showMoreElement);\n}\n\nexport default {\n    launchFn: showMore,\n    launchQuery: `.${className}`,\n};\n","/**\n * Slider\n *\n * @module patterns/slider/slider\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport { removeClass } from '../../util';\nimport aria from '../../aria-attributes';\nimport { createHTMLElement } from '../../util';\n\nconst className = 'slider',\n    defaultStyle = 'arrows',\n    defaultCardsPerRow = 1,\n    arrowLeft = 'ArrowLeft',\n    arrowRight = 'ArrowRight';\n    \n/**\n * This adds a few swipe related events listeners to the \"ul\" element of sliders\n * \n * @param  {HTMLElement} slider - The slider ul element.\n * @param  {HTMLElement} controlsWrapper - The nav element containing the slider controls\n */\n\n function addSwipeEvents(slider, controlsWrapper){\n    slider.addEventListener('mousedown',function(e){\n        lock(e,slider);\n    });\n    slider.addEventListener('touchstart',function(e){\n        lock(e,slider);\n    });\n    slider.addEventListener('mouseup',function(e){\n        move(e,slider, controlsWrapper);\n    });\n    slider.addEventListener('touchend',function(e){\n        move(e,slider, controlsWrapper);\n    });\n }\n\n /**\n * For arrow responsive slider. Opimises slide elements for responsive slider on \n * bigger screens by creating a new \"ul li\" structure containing the slides\n * \n * @param  {HTMLElement} slider - The slider \"ul\" element.\n * @param  {Array} slides - an array containing the individual slides as li elements.\n * @param  {HTMLElement} controls - The \"nav\" element containing the controls\n * \n */\nfunction responsiveOptimisation(slides,slider,controls,direction){\n    const responsiveNum = 2; // number of items per slide to display\n\n    let i;\n    let d;\n    let currentSlide;\n    // This cycles through all the current slides and re-structure the list by creating a \"new\" which list contains\n    // the number of items per slide, as set above (responsiveNum)\n    //i.e. \n    //  <ul>\n    //      <li> slide 1\n    //          <ul>\n    //              <li>item 1</li>\n    //              <li>item 2</li>\n    //          </ul>\n    //      </li>\n    //\n    //      <li> slide 2...item 3 & 4</li>\n    //      <li> slide 3...item 5 & 6</li>\n    //  </ul>\n    for (i = 0; i < slides.length; i+=responsiveNum) {\n        let liElement = document.createElement('li');\n        let ulElement = document.createElement('ul');\n    \n        liElement.appendChild(ulElement);\n\n        for (d = 0; d < responsiveNum; d++) {\n            \n            if(slides[i+d]){\n                ulElement.appendChild(slides[i+d]);\n                let sliderposition = slides[i+d].getAttribute('data-sliderposition');\n                \n                if(sliderposition =='0'){\n                    currentSlide = i+d;\n                }\n\n                slides[i+d].classList.remove('slide');\n                slides[i+d].removeAttribute('data-sliderposition');\n            }\n        }\n        slider.appendChild(liElement);   \n    }\n    // Re-map slide items after re-structure\n    slides = Array.from(slider.children);\n    // Adds appropriate data attributes to slides\n    prepareSlides(slides, Math.floor((currentSlide+direction)/2)); \n    slider.setAttribute('data-optimised', 'true');\n\n    // Resets pagination during screensize change - not during launch\n    if(controls){\n        slides[Math.floor((currentSlide+direction)/2)].focus();\n        controls.querySelector('.slider__indicator__total').innerText=slides.length;\n//slides.length == 1? controls.querySelector('.slider__indicator__total').innerText=9 : controls.querySelector('.slider__indicator__total').innerText=slides.length;\n        controls.querySelector('.slider__indicator__current').innerText=Math.floor((currentSlide+direction)/2)+1;\n        updateButtonState(slider, controls);\n    }\n\n    slider.setAttribute('data-count', slides.length);\n    \n    return slides\n}\n\n/**\n * For arrow responsive slider.This reverses the optimasation (re-structure) that was done in\n * the function (responsiveOptimisation) above by creating a \"normal\" single structure ul list\n * \n * @param  {HTMLElement} slider - The slider \"ul\" element.\n * @param  {HTMLElement} controls - The \"nav\" element containing the controls\n */\nfunction reverseOptimisation(slider,controls, direction, click){\n    //formula for reverse is working\n    let slides = Array.from(slider.children);\n    let i;\n    let currentSlide;\n    let adjustment = 0;\n\n    for (i = 0; i < slides.length; i++) {\n        let sliderposition = slides[i].getAttribute('data-sliderposition');\n\n        if(sliderposition =='0'){\n            currentSlide = i;\n        }\n        const slidesChildren = Array.from(slides[i].querySelector('ul').children);\n\n        slidesChildren.forEach((slide, n) => {\n            slider.appendChild(slide);\n        });\n        slides[i].remove();\n    }\n    // Re-map slide items after re-structure\n    slides = Array.from(slider.children);\n\n    // Edge case for responsive sliders with only 2 items to avoid 'over scroll' in screen size switch over\n    if ((currentSlide*2)+(Math.round(direction/2)+direction) >= slides.length){\n        adjustment = -1;\n    }\n\n    // Assigns data attributes and positioning to slides\n    prepareSlides(slides, (currentSlide*2)+(Math.round(direction/2))+direction+adjustment); \n    slider.setAttribute('data-optimised','false');\n\n    // Resets pagination and places focus on first slide\n    slides[(currentSlide*2)+(Math.round(direction/2)+direction)+adjustment].focus();\n    controls.querySelector('.slider__indicator__total').innerText=slides.length;\n    controls.querySelector('.slider__indicator__current').innerText=(currentSlide*2)+(Math.round(direction/2)+direction+1) + adjustment;\n    slider.setAttribute('data-count', slides.length);\n    updateButtonState(slider, controls); \n\n    return slides\n}\n\n/**\n * Updates buttons for arrow slider\n * \n * @param  {HTMLElement} slider - The slider element.\n * @param  {HTMLElement} controls - The slider controls element.\n */\nfunction updateButtonState(slider, controls) {\n\n    // Disables \"next\" or \"prev\" buttons if on first or last slide\n    const nextButton = controls.querySelector(`.${className}__controls__next`),\n        prevButton = controls.querySelector(`.${className}__controls__prev`);\n\n    slider.querySelector('[data-sliderposition=\"-1\"]')\n        ? prevButton.removeAttribute('disabled')\n        : prevButton.setAttribute('disabled', true);\n\n    slider.querySelector('[data-sliderposition=\"1\"]')\n        ? nextButton.removeAttribute('disabled')\n        : nextButton.setAttribute('disabled', true);\n\n    slider.removeAttribute('disabled');\n\n    // Responsive slider edge case for when 2 items to allow next arrow to be clicable to allow switch over\n    const responsive = slider.getAttribute('data-style');\n    let slides = Array.from(slider.children);\n    responsive && slides.length == 1 ? nextButton.removeAttribute('disabled'):null;\n}\n\n/**\n * Handle clicks on the next/previous buttons for arrow slider.\n *\n * @param  {HTMLElement} slider - The slider element.\n * @param  {Number} direction - The scroll direction, 1 = next, -1 = previous.\n */\nfunction handleNextPrevClick(slider, controls, direction) {\n    let slides = Array.from(slider.children);\n    const responsive = slider.getAttribute('data-style');\n    const optimised = slider.getAttribute('data-optimised');\n    let screenSize = window.innerWidth;\n\n    // This is for responsive slider only, checking if re-structuring is necesssary in case the viewport size changed.\n    if(responsive === 'responsive' && screenSize < 768 && optimised == 'true'){\n        reverseOptimisation(slider,controls, direction, true);\n        return;\n    }\n    else if(responsive === 'responsive' && screenSize >= 768 && optimised !== 'true'){\n        responsiveOptimisation(slides,slider,controls,direction);\n        return;\n    }\n\n    const current = slider.querySelector('[data-sliderposition=\"0\"]'),\n        currentPage = controls.querySelector(\n            `.${className}__indicator__current`\n        ),\n        nextButton = controls.querySelector(`.${className}__controls__next`),\n        prevButton = controls.querySelector(`.${className}__controls__prev`);\n    \n    // Next arrow clicked\n    if (direction === 1) {\n        const next = current.nextElementSibling;\n\n        if (next) {\n            // Disables buttons during slide animation from current to next\n            nextButton.setAttribute('disabled', true);\n            prevButton.setAttribute('disabled', true);\n\n            // Move focus to next slide, wait for transition to finish\n            next.addEventListener(\n                'transitionend',\n                function focusNext() {\n                    next.removeEventListener('transitionend', focusNext, true);\n                    next.focus();\n                    updateButtonState(slider, controls);\n                },\n                true\n            );\n\n            // Hide current slide once transition has finished\n            current.addEventListener(\n                'transitionend',\n                function hideCurrent() {\n                    current.removeEventListener(\n                        'transitionend',\n                        hideCurrent,\n                        true\n                    );\n                    current.dataset.hidden = true;\n                    current.dataset.smallhidden = true;\n                },\n                true\n            );\n            \n            // Updates position of slides\n            // Moves current slide to back to previous position\n            current.dataset.sliderposition = -1;\n            current.dataset.smallposition = -1;\n            // Sets 'active' current slide\n            next.dataset.hidden = false;\n            next.dataset.smallhidden = false;\n            next.dataset.sliderposition = 0;\n            next.dataset.smallposition = 0;\n            // Updates pagination to current slide position\n            currentPage.innerText = slides.indexOf(next) + 1;\n        }\n    } else {\n        // Previous arrow clicked\n        const previous = current.previousElementSibling;\n\n        if (previous) {\n            nextButton.setAttribute('disabled', true);\n            prevButton.setAttribute('disabled', true);\n\n            previous.addEventListener(\n                'transitionend',\n                function focusPrevious() {\n                    previous.removeEventListener(\n                        'transitionend',\n                        focusPrevious,\n                        true\n                    );\n                    previous.focus();\n                    updateButtonState(slider, controls);\n                },\n                true\n            );\n\n            current.addEventListener(\n                'transitionend',\n                function hideCurrent() {\n                    current.removeEventListener(\n                        'transitionend',\n                        hideCurrent,\n                        true\n                    );\n                    current.dataset.hidden = true;\n                    current.dataset.smallhidden = true;\n                },\n                true\n            );\n            \n            // Updates position of slides\n            // Moves current slide forward to next position\n            current.dataset.sliderposition = 1;\n            current.dataset.smallposition = 1;\n            // Sets current / active slide\n            previous.dataset.hidden = false;\n            previous.dataset.smallhidden = false;\n            previous.dataset.sliderposition = 0;\n            previous.dataset.smallposition = 0;\n            // Updates pagination to current slide\n            currentPage.innerText = slides.indexOf(previous) + 1;\n        }\n    }\n\n    // Set the height of the slider container to be fixed. This fixes the issue of having 'arrow navigation'\n    //slideHeightFix(slider);\n}\n\n/**\n * This is for arrow slider only. It applies the necessary data attribues needed\n *  for the functionality of the slider which positions the slides into their starting positions\n * \n * @param  {Array} slides - an array containing the individual slides as li elements\n */\nfunction prepareSlides (slides, current){\n    slides.forEach((slide, i) => {\n        slide.setAttribute('tabindex', -1);  // Remove inactive\n        slide.setAttribute(aria.label, `Slide ${i + 1} of ${slides.length}`);  // Accesiblity\n        slide.classList.add('slide'); // Add slide class of slide\n\n        // 0 = active / first slide\n        if (i === current) {\n            slide.dataset.sliderposition = 0;\n            slide.dataset.smallposition = 0;\n            slide.dataset.hidden = false;\n        } \n        else if(i > current){\n            // 1 = next slide\n            slide.dataset.sliderposition = 1;\n            slide.dataset.smallposition = 1;\n            slide.dataset.hidden = 'true';\n            slide.dataset.smallhidden = 'true';\n        }\n        else {\n            slide.dataset.sliderposition = -1;\n            slide.dataset.smallposition = -1;\n            slide.dataset.hidden = true;\n            // @ WR review smallhidden - what was intended by it?\n        }\n    });\n    return slides;\n}\n\n/**\n * Transform an element with the slider class name into a slider section controlled by arrows.\n *\n * @param {HTMLElement} slider - An element with the slider class\n * \n */\nfunction launchArrow(slider) {\n    // creates elements for pagination and controls\n    let slides = Array.from(slider.children);\n    const controlsWrapper = document.createElement('nav'),\n        nextButton = document.createElement('button'),\n        nextButtonSpan = document.createElement('span'),\n        prevButton = document.createElement('button'),\n        prevButtonSpan = document.createElement('span'),\n        indicator = document.createElement('div'),\n        currentPage = document.createElement('span'),\n        totalPages = document.createElement('span'),\n        divider = document.createElement('span'),\n        dividerVisible = document.createElement('span'),\n        dividerScreenReader = document.createElement('span');\n\n    // If not enough slides, don't create it.\n    if (1 >= slides.length) {\n        removeClass(slider, className, false);\n        return;\n    }\n\n    // Reconstructs slides for responsive slider\n    const responsive = slider.getAttribute('data-style');\n    let screenSize = window.innerWidth;\n    \n    if(responsive ==='responsive' && screenSize >= 768) {\n        responsiveOptimisation(slides, slider);\n        // Re-map slide items after re-structure\n        slides = Array.from(slider.children);\n    };\n\n    // Sets up the positions of the cards / slides\n    prepareSlides(slides, 0);\n\n    // Build the next button\n    nextButtonSpan.appendChild(document.createTextNode('Next slide'));\n    nextButton.appendChild(nextButtonSpan);\n    nextButton.setAttribute('type', 'button');\n    nextButton.className = className + '__controls__next';\n    // Wait for Click on next button\n    nextButton.addEventListener(\n        'click',\n        () => handleNextPrevClick(slider, controlsWrapper, 1),\n        true\n    );\n\n    // Build the previous button\n    prevButtonSpan.appendChild(document.createTextNode('Previous slide'));\n    prevButton.appendChild(prevButtonSpan);\n    prevButton.setAttribute('type', 'button');\n    prevButton.setAttribute('disabled', 'true');\n    prevButton.className = className + '__controls__prev';\n    // Wait for Click on previous button\n    prevButton.addEventListener(\n        'click',\n        () => handleNextPrevClick(slider, controlsWrapper, -1),\n        true\n    );\n\n    // Accessiblity wait for key press anywhere within slider\n    slider.addEventListener(\n        'keydown',\n        (e) => {\n            switch (e.key) {\n                case arrowLeft:\n                    prevButton.click();\n                    break;\n                case arrowRight:\n                    nextButton.click();\n                    break;\n                default:\n                    break;\n            }\n        },\n        true\n    );\n\n    // apply CSS to card which is currently visible\n    currentPage.appendChild(document.createTextNode(1)); // default is 1 when page loads\n    currentPage.className = className + '__indicator__current';\n\n    // Divider between 1 / 4 etc.\n    dividerVisible.appendChild(document.createTextNode('/'));\n    dividerVisible.className = className + '__indicator__divider--visible';\n    dividerVisible.setAttribute(aria.hidden, 'true');\n    dividerScreenReader.appendChild(document.createTextNode(' of '));\n    dividerScreenReader.className = className + '__indicator__divider--sr';\n    divider.appendChild(dividerVisible);\n    divider.appendChild(dividerScreenReader);\n    divider.className = className + '__indicator__divider';\n\n    // Total pages\n    totalPages.className = className + '__indicator__total';\n    totalPages.appendChild(document.createTextNode(slides.length));\n  \n    // Add to page\n    indicator.appendChild(currentPage);\n    indicator.appendChild(divider);\n    indicator.appendChild(totalPages);\n    indicator.className = className + '__indicator';\n\n    // Wrap element around slider__controls\n    controlsWrapper.appendChild(indicator);\n    controlsWrapper.appendChild(prevButton);\n    controlsWrapper.appendChild(nextButton);\n    controlsWrapper.className = className + '__controls';\n    controlsWrapper.setAttribute(aria.label, 'Slider navigation');\n\n    // Places controls directly after 'ul' containing the slides\n    slider.nextElementSibling\n        ? slider.parentElement.insertBefore(\n              controlsWrapper,\n              slider.nextElementSibling\n          )\n        : slider.parentElement.appendChild(controlsWrapper);\n\n    // Add event listeners\n    addSwipeEvents(slider,controlsWrapper);\n\n    // Set the height of the slider container to be fixed. This fixes the issue of having 'arrow navigation'\n    //slideHeightFix(slider);\n};\n\n/**\n * Transform an element with the slider class name into a slider section controlled by dots.\n * This is to be launched on smaller screens only.\n *\n * @param {HTMLElement} slider - An element with the slider class\n * \n */\nfunction launchDot(slider) {\n    // Creates pagination and control elements\n    const slides = Array.from(slider.children),\n        controlsWrapper = document.createElement('nav');\n\n    // If not enough slides, don't create it.\n    if (1 >= slides.length) {\n        removeClass(slider, className, false);\n        return;\n    }\n\n    slides.forEach((slide, i) => {\n        slide.setAttribute('tabindex', -1);  // Remove inactive\n        slide.setAttribute(aria.label, `Slide ${i + 1} of ${slides.length}`);  // Accesiblity\n        slide.classList.add('slide'); // Add slide class of slide\n\n        // Sets data attributes for slides which controls their position within slide collection\n        if (i === 0) {\n            slide.dataset.sliderposition = 0; // 0 for active slide\n            slide.dataset.smallposition = 0;\n            slide.dataset.hidden = false;\n        } else {\n            slide.dataset.sliderposition = 1; // 1 for 'next' slide\n            slide.dataset.smallposition = 1;\n            slide.dataset.hidden = 'true';\n            slide.dataset.smallhidden = 'true';\n        }\n\n        // Creates dot buttons for each slide\n        let dot = createHTMLElement('button', [\n            { label: 'data-page', val: i },\n            { label: 'aria-label', val: `Open slide ${i + 1}` },\n            { label: 'type', val: 'button' },\n        ]);\n\n        if (i === 0) {\n            // Active slide\n            dot.setAttribute(aria.current, 'slide');\n            dot.setAttribute(aria.expanded, 'true');\n            dot.setAttribute('disabled', 'true');\n        } else {\n            // All other slides\n            dot.setAttribute(aria.expanded, 'false');\n        }\n\n        dot.addEventListener(\n            'click',\n            () => handleDotClick(slider,controlsWrapper, i),\n            true\n        );\n\n        controlsWrapper.appendChild(dot);\n    });\n\n    \n    // Accessiblity wait for key press anywhere within slider\n    slider.addEventListener(\n        'keydown',\n        (e) => {\n            const current = slider.querySelector('[data-sliderposition=\"0\"]');\n            const next = current.nextElementSibling;\n            const previous = current.previousElementSibling;\n            const pos = slides.indexOf(current);\n            const buttons = Array.from(controlsWrapper.children);\n\n            switch (e.key) {\n                case arrowLeft:\n                    if(previous){\n                        buttons[pos-1].click();\n                    }\n                    break;\n                case arrowRight:\n                    if(next){\n                        buttons[pos+1].click();\n                    };\n                    break;\n                default:\n                    break;\n            }\n        },\n        true\n    );\n\n    // Wrap element around slider__controls\n    controlsWrapper.className = className + '__controls';\n    controlsWrapper.setAttribute(aria.label, 'Slider navigation');\n\n    // Places controls directly after 'ul' containing the slides\n    slider.nextElementSibling\n        ? slider.parentElement.insertBefore(\n              controlsWrapper,\n              slider.nextElementSibling\n          )\n        : slider.parentElement.appendChild(controlsWrapper);\n\n    //add event listeners\n    addSwipeEvents(slider,controlsWrapper);\n\n    // Set the height of the slider container to be fixed. This fixes the issue of having 'arrow navigation'\n    //slideHeightFix(slider);\n}\n\n/**\n * Handle clicks for dot slider\n *\n * @param  {HTMLElement} slider - The slider element.\n * @param  {Number} selection - pass the paramaetr of selected slide as a number\n * @param  {HTMLElement} controlsWrapper - Element containing the control buttons\n */\n\nfunction handleDotClick(slider, controlsWrapper, selection) {\n    const slides = Array.from(slider.children),\n    dotButtons = Array.from(controlsWrapper.children);\n\n    // Disables all buttons after click to avoid multiple clicks\n    dotButtons.forEach((dot, i) => {\n        dot.setAttribute('disabled', true);\n    });\n\n    // Re-arranges the positions of the slides\n    slides.forEach((slide, i) => {\n        // Cycles through slides and makes active the one 'selected'\n        if (i === selection) {\n            slide.dataset.sliderposition = 0;\n            slide.dataset.smallposition = 0;\n            slide.dataset.hidden = false;\n            \n            slide.addEventListener(\n                'transitionend',\n                function focusNext() {\n                    slide.removeEventListener('transitionend', focusNext, true);\n                    slide.focus();\n                    updateDotButtonState(i, dotButtons, slider);\n                },\n                true\n            );\n        }\n        // Places slides 'after' current slide in next position\n        else if(i > selection){\n            slide.dataset.sliderposition = 1;\n            slide.dataset.smallposition = 1;\n            slide.dataset.hidden = true;\n            // @ WR review smallhidden - what was intended by it?\n        }\n        // Places slides 'before' current slide in previous position\n        else {\n            slide.dataset.sliderposition = -1;\n            slide.dataset.smallposition = -1;\n            slide.dataset.hidden = true;\n            // @ WR review smallhidden - what was intended by it?\n        }\n    });\n\n    // Set the height of the slider container to be fixed. This fixes the issue of having 'arrow navigation'\n    //slideHeightFix(slider);\n}\n\n/**\n * @param  {number} active - This is the number/index of the 'active' slide.\n * @param  {array} dotButtons - An array of all the dot buttons.\n */\nfunction updateDotButtonState(active, dotButtons, slider) {\n    dotButtons.forEach((dot, i) => {\n        if (i === active) {\n            dot.setAttribute('disabled', true);\n            dot.setAttribute('aria-expanded', true);\n        }\n        else{\n            dot.removeAttribute('disabled');\n            dot.setAttribute('aria-expanded', false);\n        } \n    })\n    \n    slider.removeAttribute('disabled');\n}\n\n/**\n * This function creates a fix height for the slider container so the height don't change depending on each \n * slides individual height which would cause the navigation arrows to move up and down when adjusting to the \n * height of the current slide\n * @param  {HTMLElement} slider - The slider element.\n */\nfunction slideHeightFix(slider){\n    let slides = Array.from(slider.children);\n    let sliderSetHeight = 0;\n    slider.style.minHeight = '0px';\n\n    slides.forEach((slide) => {\n        let slideHeight = slide.offsetHeight;\n        slideHeight > sliderSetHeight ? sliderSetHeight = slideHeight: null; \n    })\n    slider.style.minHeight = sliderSetHeight+'px';\n};\n\n/**\n * 3 Swipe functions below. Unify records touch coordinates to determine left or right swipe.\n * Lock function locks the ul element to prevent too many additional touches interfering with the sliding \n * functionality. I.e. when a slide is in progress it locks it not to register additional touches.\n * Move function monitors the 'end' of the swipe action to determine the direction of the swipe i.e. left / right.\n * The \"dx\" parameter can be used to adjust the sensitivity of the swiping. The larger the number the longer the swipe needs\n * to be to register as an actual swipe.\n *\n * @param {event} e - Touch event\n * @param {HTMLElement} Slider - The ul element containing the \"li\" slides\n * @param {HTMLElement} ControlsWrapper - The nav element containing the slider controls\n */\n\nlet x0;\n\nfunction unify(e) {\n    return e.changedTouches ? e.changedTouches[0] : e;\n}\n\nfunction lock(e,slider){\n    const locked = slider.getAttribute('disabled');\n    if(!locked){\n        x0 = unify(e).clientX; //set mousedown clientX value\n        //e.target.classList.toggle('smooth', !(this.locked = true));\n    }  \n};\n\nfunction move(e,slider, controlsWrapper){\n    const locked = slider.getAttribute('disabled');\n\n    let currentSlide = slider.querySelector(\"li[data-hidden=false]\");\n    const sliderType = slider.getAttribute('data-style');\n\n    function getElementIndex (element) {\n        return [...element.parentNode.children].indexOf(element);\n      };\n    \n    if (!locked) {\n        let dx = unify(e).clientX - x0, //dx is value calculate by using clientX mousedown and after value\n            s = Math.sign(dx), //check if swipe is left or right by checking value is negative or positive\n            tx = getComputedStyle(e.target).getPropertyValue('--tx'),\n            p = parseInt(tx.replace(/\\D/g, '')); // May use the drag length as a condition to move slider\n\n        // Next slide\n        if(s==-1 && currentSlide.nextElementSibling && dx < -25){\n            // Checks which type of slider you are using and handles slide\n            slider.setAttribute('disabled',true);\n            sliderType =='arrows' || sliderType ==='responsive' ? handleNextPrevClick(slider, controlsWrapper, 1) : handleDotClick(slider,controlsWrapper, (getElementIndex(currentSlide)+1)); \n        }\n        // Previous slide \n        else if (s==1 && currentSlide.previousElementSibling && dx > 25){\n            // Checks which type of slider you are using and handles slide\n            slider.setAttribute('disabled',true);\n            sliderType =='arrows' || sliderType ==='responsive' ? handleNextPrevClick(slider, controlsWrapper, -1) : handleDotClick(slider,controlsWrapper, (getElementIndex(currentSlide)-1)); \n        }      \n    }\n}\n// End of swipe functions\n\n/**\n * Transform an element with the slider class name into a slider section.\n * \n * @param {HTMLElement} slider - An element with the slider class\n */\nfunction launchSlider(slider) {\n    const style = slider.dataset.style || defaultStyle,\n    cardsPerRow = parseInt(slider.dataset.cardsperrow) || defaultCardsPerRow; // CardsPerRow not currently in use. Tom's old code. \n    // Might have use case for bigger screen which have capacity to have more than 1 item per slide.\n\n    switch (style) {\n        case 'arrows':\n            launchArrow(slider, cardsPerRow);\n            break;\n        case 'responsive':\n            launchArrow(slider, cardsPerRow);\n            break;\n        case 'dots':\n            launchDot(slider, cardsPerRow);\n            break;\n        default:\n            launchArrow(slider, cardsPerRow);\n    }\n}\n\nexport default {\n    launchFn: launchSlider,\n    launchQuery: `.${className}`,\n};","/**\n * Tabs\n *\n * @module patterns/tabs/tabs\n * @author Web Development\n * @copyright City, University of London 2018-2019\n */\nimport scroll from 'zenscroll';\nimport { reduceMotion, removeClass } from '../../util';\nimport aria from '../../aria-attributes';\n\nconst className = 'tabs',\n    panelClassName = className + '__panel',\n    contentClassName = panelClassName + '__content',\n    linksClassName = className + '__links',\n    endKey = 'End',\n    homeKey = 'Home',\n    arrowLeft = 'ArrowLeft',\n    arrowUp = 'ArrowUp',\n    arrowRight = 'ArrowRight',\n    arrowDown = 'ArrowDown',\n    oneSecond = 1000,\n    scrollDuration = reduceMotion() ? 0 : oneSecond,\n    scrollTo = false;\n\n/**\n * Set the attributes of a tab to be selected or not selected.\n *\n * Unselected tabs are removed from the tab order.\n *\n * @param {HTMLButtonElement} button - The anchor element to toggle.\n * @param {boolean} selected - Set the element to be selected?\n */\nfunction toggleButton(button, selected) {\n    button.setAttribute(aria.selected, selected);\n\n    if (selected) {\n        button.setAttribute(aria.current, true);\n    } else {\n        button.removeAttribute(aria.current);\n    }\n}\n\n/**\n * Change the selection to the requested tab.\n *\n * @param {HTMLAnchorElement} newTab - The selected tab.\n */\nfunction selectTab(newTab) {\n    const tabs = newTab.closest(`.${className}`),\n        controls = tabs.querySelector(`.${linksClassName}`),\n        linkItems = Array.from(controls.querySelectorAll('li')),\n        panels = Array.from(tabs.childNodes).filter(\n            (node) => node.className && node.className === panelClassName\n        );\n\n    /**\n     * Unselect every tab and related panel.\n     */\n    linkItems.forEach((linkItem) => {\n        toggleButton(linkItem.firstElementChild, false);\n    });\n    panels.forEach((panel) => panel.setAttribute('hidden', 'true'));\n\n    /**\n     * Select the requested tab.\n     */\n    toggleButton(newTab, true);\n    tabs.querySelector(newTab.dataset.hash).removeAttribute('hidden');\n\n    /**\n     * Move focus to the section and optionally scroll it into view.\n     */\n    newTab.focus();\n    scrollTo && scroll.to(tabs, scrollDuration);\n}\n\n/**\n * Respond to event changing tab selection.\n *\n * @param {Event} e - The initiating event.\n * @param {HTMLAnchorElement} newTab - The selected tab.\n */\nfunction selectTabEvent(e, newTab) {\n    e.preventDefault();\n    selectTab(newTab);\n}\n\n/**\n * Respond to cursor key events inside the tabbed section.\n *\n * @param {Event} e - The initiating keydown event.\n * @param {HTMLElement} tabs - The controls for the tabbed section.\n */\nfunction keyEvents(e, tabs) {\n    const currentTab = tabs.querySelector(`[${aria.selected}=\"true\"]`),\n        currentTabLI = currentTab.parentNode;\n\n    let newTab = null;\n\n    switch (e.key) {\n        case arrowLeft:\n            /**\n             * Previous tab has been requested - if we're already at the beginning,\n             * we need to wrap around to the last tab.\n             */\n            currentTabLI.previousElementSibling\n                ? (newTab =\n                      currentTabLI.previousElementSibling.firstElementChild)\n                : (newTab = tabs.querySelector('li:last-of-type a'));\n            break;\n        case arrowRight:\n            /**\n             * Next tab has been requested - if we're already at the end, we need\n             * to wrap around to the first tab.\n             */\n            currentTabLI.nextElementSibling\n                ? (newTab = currentTabLI.nextElementSibling.firstElementChild)\n                : (newTab = tabs.querySelector('li:first-of-type a'));\n            break;\n        case arrowDown:\n            /**\n             * Move focus into the tab content.\n             */\n            tabs.querySelector(currentTab.dataset.hash).focus();\n            break;\n        case arrowUp:\n            /**\n             * Move focus to the currently selected tab control.\n             */\n            currentTab.focus();\n\n            break;\n        case homeKey:\n            /**\n             * First tab\n             */\n            newTab = tabs.querySelector('li:first-of-type a');\n            break;\n        case endKey:\n            /**\n             * Last tab\n             */\n            newTab = tabs.querySelector('li:last-of-type a');\n            break;\n        default:\n            break;\n    }\n    newTab && selectTabEvent(e, newTab);\n}\n\n/**\n * Set attributes and listeners for the tabbed section controls.\n *\n * @param {HTMLLIElement[]} linkItems - An array of list items containing the tab anchors.\n */\nfunction prepareLinks(linkItems) {\n    linkItems.forEach((linkItem) => {\n        const link = linkItem.firstElementChild,\n            button = document.createElement('button');\n\n        linkItem.setAttribute('role', 'presentation');\n\n        button.setAttribute('role', 'tab');\n        button.appendChild(link.firstElementChild);\n        button.dataset.hash = link.hash;\n        button.id = link.id;\n\n        linkItem.replaceChild(button, link);\n\n        toggleButton(button, false);\n\n        button.addEventListener(\n            'click',\n            (e) => selectTabEvent(e, button),\n            true\n        );\n    });\n}\n\n/**\n * Set attributes for the tabbed section panels.\n *\n * @param {HTMLElement[]} panels - An array of tab panels.\n */\nfunction preparePanels(panels) {\n    panels.forEach((panel) => {\n        const wrapper = document.createElement('div'),\n            panelElements = Array.from(panel.children);\n        wrapper.className = contentClassName;\n        panelElements.forEach((element) => wrapper.appendChild(element));\n        panel.appendChild(wrapper);\n        panel.setAttribute('role', 'tabpanel');\n        panel.setAttribute('tabindex', -1);\n        panel.setAttribute('hidden', 'true');\n    });\n}\n\n/**\n * Transform an element with the tabs class name into a tabbed section.\n *\n * A tabbed section is expected to contain a list of anchors pointing to each\n * section, followed by the sections themselves.\n *\n * e.g.\n *\n * <div class=\"tabs\">\n * <ul class=\"tabs__links\">\n * <li><a href=\"#tab1\">Tab 1</a></li>\n * <li><a href=\"#tab2\">Tab 2</a></li>\n * </ul>\n * <section class=\"tabs__panel\" id=\"tab1\">Content 1</section>\n * <section class=\"tabs__panel\" id=\"tab2\">Content 2</section>\n * </div>\n *\n * @param {HTMLElement} tabs - An element with the tabs class\n */\nfunction launchTabs(tabs) {\n    const controls = tabs.querySelector(`.${linksClassName}`),\n        linkItems = Array.from(controls.querySelectorAll('li')),\n        panels = Array.from(tabs.childNodes).filter(\n            (node) => node.className && node.className === panelClassName\n        );\n\n    if (linkItems.length === 1) {\n        /**\n         * don't make one tab into a tabbed section, makes no sense\n         */\n        removeClass(tabs, className, false);\n        return;\n    }\n\n    controls.setAttribute('role', 'tablist');\n    preparePanels(panels);\n    prepareLinks(linkItems);\n\n    toggleButton(linkItems[0].firstElementChild, true);\n    panels[0].removeAttribute('hidden');\n\n    /**\n     * Enable keyboard access to tabs with the cursor keys.\n     */\n    tabs.addEventListener('keydown', (e) => keyEvents(e, tabs), true);\n}\n\nexport default {\n    launchFn: launchTabs,\n    launchQuery: `.${className}`,\n};\n","/**\n * Image credit tooltip\n *\n * @module patterns/tooltip/image-credit\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nimport aria from '../../../aria-attributes';\nimport { toBool } from '../../../util';\n\nconst className = 'picture[data-authorname], picture[data-sourcename]',\n    openText = 'Show image credit',\n    closeText = 'Hide image credit';\n\n/**\n * Toggle the image credit open or closed.\n *\n * @param  {HTMLElement} wrapper - The image credit container\n */\nfunction toggleImageCredit(wrapper) {\n    const button = wrapper.querySelector('button'),\n        buttonText = button.querySelector('.sr-only'),\n        label = wrapper.querySelector('.tooltip__label');\n\n    if (toBool(wrapper.dataset.open)) {\n        wrapper.dataset.open = false;\n        button.setAttribute(aria.expanded, 'false');\n        buttonText.innerText = openText;\n        button.focus();\n    } else {\n        wrapper.dataset.open = true;\n        button.setAttribute(aria.expanded, 'true');\n        buttonText.innerText = closeText;\n        label.focus();\n    }\n}\n\n/**\n * Render the credit label.\n *\n * @param  {string} text - The entity to credit\n * @param  {string} url - Optional URL for the entity\n * @returns {HTMLElement} A span or anchor.\n */\nfunction createLabel(text, url) {\n    // If URL; create hyperlink\n    if (url) {\n        const element = document.createElement('a');\n        element.href = url;\n        element.appendChild(document.createTextNode(text));\n        return element;\n        // No URL; create span\n    } else {\n        const element = document.createElement('span');\n        element.appendChild(document.createTextNode(text));\n        return element;\n    }\n}\n\n/**\n * Create an image credit tooltip from the data attributes of an image.\n *\n * @param {HTMLElement} picture - A picture element with credit data attributes.\n */\nfunction launchImageCredit(picture) {\n    const display = toBool(picture.dataset.tooltipdisplay),\n        authorText = picture.dataset.authorname,\n        authorUrl = picture.dataset.authorurl,\n        sourceText = picture.dataset.sourcename,\n        sourceUrl = picture.dataset.sourceurl,\n        licenceText = picture.dataset.licencetype,\n        licenceUrl = picture.dataset.licenceurl;\n\n    // Pattern only launches if set to display and has either an author/source name\n    if (!display || !(authorText || sourceText)) {\n        return;\n    }\n\n    const wrapper = document.createElement('div'),\n        button = document.createElement('button'),\n        spanIcon = document.createElement('span'),\n        spanText = document.createElement('span'),\n        label = document.createElement('div'),\n        author = authorText ? createLabel(authorText, authorUrl) : null,\n        source = sourceText ? createLabel(sourceText, sourceUrl) : null,\n        licence = licenceText ? createLabel(licenceText, licenceUrl) : null;\n\n    wrapper.className = 'wrapper--tooltip__label';\n    wrapper.dataset.open = false;\n\n    button.className = 'tooltip tooltip--image-credit';\n    button.setAttribute('type', 'button');\n    button.setAttribute(aria.expanded, false);\n\n    button.addEventListener('click', () => toggleImageCredit(wrapper), true);\n\n    spanIcon.className = 'tooltip__icon icon fas fa-info-circle';\n    spanIcon.setAttribute(aria.hidden, true);\n\n    spanText.className = 'sr-only';\n    spanText.appendChild(document.createTextNode(openText));\n\n    button.appendChild(spanIcon);\n    button.appendChild(spanText);\n\n    label.className = 'tooltip__label';\n    label.setAttribute('tabindex', -1);\n    author && label.appendChild(author);\n    author && source && label.appendChild(document.createTextNode(' / '));\n    source && label.appendChild(source);\n    licence ? (licence.className = 'tooltip__label__licence') : null;\n    licence && label.appendChild(licence);\n\n    wrapper.appendChild(label);\n    wrapper.appendChild(button);\n\n    (author || source) && picture.appendChild(wrapper);\n}\n\nexport default {\n    launchFn: launchImageCredit,\n    launchQuery: `${className}`,\n};\n","/**\n * Loop autoplayed video a defined number of times.\n *\n * @module patterns/video/video\n * @author Web Development\n * @copyright City, University of London\n */\n\nimport { createHTMLElement } from '../../util';\n\nconst className = 'embedded-video--autoplay';\n\n/**\n * Loop video as et number of times\n *\n * @param {element} video - Figure with the 'embedded-video--autoplay' class.\n * @param {element} videoEl - HTML video element.\n * @param {number} maxPlays - Maximum number of times video should play.\n */\nfunction loopVideo(maxPlays, video, videoEl) {\n    let playInstance = 0;\n\n    // When video finishes autoplaying, switch controller from pause to play\n    videoEl.onended = () => {\n        playInstance += 1;\n\n        if (playInstance === maxPlays) {\n            toggleController(false, video, videoEl);\n        } else {\n            videoEl.play();\n        }\n    };\n}\n\n/**\n * Create video play/pause button.\n *\n * @param {element} video - Figure with the 'embedded-video--autoplay' class.\n * @param {element} videoEl - HTML video element.\n */\nfunction createController(video, videoEl) {\n    const controllerIcon = createHTMLElement('span', [\n        {\n            label: 'class',\n            val: 'embedded-video--autoplay__controller-btn__icon',\n        },\n    ]);\n\n    const controllerBtn = createHTMLElement('button', [\n        { label: 'class', val: 'embedded-video--autoplay__controller-btn' },\n    ]);\n\n    controllerBtn.addEventListener('click', () => {\n        toggleController(videoEl.paused, video, videoEl);\n    });\n\n    controllerBtn.append(controllerIcon);\n    video.append(controllerBtn);\n\n    // checks if browser 'auto play' is enabled\n    var promise = videoEl.play();\n\n    if (promise !== undefined) {\n        promise\n            .then(() => {\n                // autoplay enabled\n                controllerBtn.dataset.status = 'pause';\n                toggleController(true, video, videoEl);\n            })\n            .catch((error) => {\n                // autoplay disabled\n                toggleController(false, video, videoEl);\n            });\n    }\n}\n/**\n* Handles click for pause and play\n*\n* @param {element} video - Figure with the 'embedded-video--autoplay' class.\n* @param {element} videoEl - HTML video element.\n* @param {bolean} status - current status of video true/false = paused/playing  \n*/\n\nfunction toggleController(status, video, videoEl) {\n    const controllerBtn = video.querySelector(\n        '.embedded-video--autoplay__controller-btn'\n    );\n\n    if (status) {\n        controllerBtn.dataset.status = 'pause';\n        controllerBtn.setAttribute('aria-label', 'Pause video');\n        videoEl.play();\n    } else {\n        controllerBtn.dataset.status = 'play';\n        controllerBtn.setAttribute('aria-label', 'Play video');\n        videoEl.pause();\n    }\n}\n\nfunction launchAutoplayVideo(video) {\n    const videoEl = video.querySelector('.embedded-video--autoplay__video'),\n        plays = parseInt(videoEl.dataset.maxPlays);\n\n    loopVideo(plays, video, videoEl);\n    createController(video, videoEl);\n}\n\nexport default {\n    launchFn: launchAutoplayVideo,\n    launchQuery: `.${className}`,\n};\n","/**\n * Devcorate\n *\n * @module patterns/devcorate/devcorate\n * @author Web Development\n * @copyright City, University of London 2018\n */\nimport { parametersToObject, objectToParameters } from '../../util';\n\n/**\n * Persist a query parameter to all same-site anchors inside an element.\n *\n * @param {HTMLElement} elem - An element containing anchors to decorate.\n * @param {string} param - The name of a query parameter.\n * @param {string} value - The value for the query parameter.\n */\nexport function devcorate(elem, param, value) {\n    Array.from(elem.querySelectorAll('a')).forEach((anchor) => {\n        if (anchor.origin === window.location.origin) {\n            const parameters = anchor.search\n                ? parametersToObject(anchor.search)\n                : {};\n\n            parameters[param] = value;\n            anchor.href = `${anchor.origin}${\n                anchor.pathname\n            }${objectToParameters(parameters)}${anchor.hash}`;\n        }\n    });\n}\n","/**\n * Main entry\n *\n * @author Web Development\n * @copyright City, University of London 2018\n */\nimport patterns from './patterns';\nimport { removeClass, parametersToObject, gaEvent, detectIE } from './util';\nimport { devcorate } from './patterns/devcorate/devcorate';\nimport prepareAccordionTabs from './patterns/tabs/prepareAccordionTabs';\n\nconst edgeVersion = 12;\n\n/**\n * try a function, log the error if it throws an exception.\n *\n * @param {Function} f - The function to call.\n */\nexport function tryCatch(f) {\n    try {\n        return f();\n    } catch (e) {\n        // console.log(e);\n        gaEvent(\n            'jsError',\n            'JavaScript error',\n            `Line ${e.lineNumber}  ${e.message}`,\n            `Pattern launch ${e.fileName} (${window.location})`,\n            true\n        );\n    }\n}\n\n/**\n * Runs the function for each pattern against every element that has the\n * matching class, unless the element also has that class with a '-no-js' suffix\n * (for cases where you want to use the CSS for a pattern, but not the\n * functionality).\n *\n * @param {object} pattern - An object containing the class name to trigger the pattern and the launch function to run for those elements.\n */\nfunction launchPattern(pattern) {\n    if (typeof pattern === 'function') {\n        tryCatch(pattern);\n    } else if (pattern.launchQuery) {\n        const { launchFn, launchQuery } = pattern;\n        Array.from(document.querySelectorAll(launchQuery))\n            .filter((elem) => elem.className.indexOf(`${launchQuery}-no-js`))\n            .forEach((elem) => tryCatch(() => launchFn(elem)));\n    }\n}\n\n/**\n * Recursively generate accordion--tabs HTML for tabs.\n *\n * @param {HTMLElement} root\n */\nfunction accordionizeTabs(root) {\n    Array.from(root.querySelectorAll('.tabs'))\n        .filter((elem) => elem.className.indexOf('.tabs-no-js'))\n        .forEach((elem) => {\n            const potential = tryCatch(() => prepareAccordionTabs(elem));\n            potential && accordionizeTabs(potential);\n        });\n}\n\ndocument.addEventListener(\n    'DOMContentLoaded',\n    () => {\n        if (/(Trident|MSIE)/.test(navigator.userAgent)) {\n            return;\n        } else {\n            // disable for now\n            // if ('serviceWorker' in navigator) {\n            //     window.addEventListener('load', function() {\n            //         navigator.serviceWorker\n            //             .register('sw.js')\n            //             .then(function() {}, function() {});\n            //     }, false);\n            // }\n            Array.from(document.getElementsByTagName('html')).forEach(\n                (html) => {\n                    let ie = detectIE();\n                    removeClass(html, 'no-js', false);\n                    if (ie >= edgeVersion) {\n                        html.className = (\n                            html.className +\n                            ' js ' +\n                            'edge'\n                        ).trim();\n                    } else {\n                        html.className = (html.className + ' js').trim();\n                    }\n                }\n            );\n\n            accordionizeTabs(document);\n            patterns.forEach(launchPattern);\n\n            const parameters = parametersToObject(location.search);\n            parameters['dev'] &&\n                devcorate(\n                    document.querySelector('body'),\n                    'dev',\n                    parameters['dev']\n                );\n            parameters['rel'] &&\n                devcorate(\n                    document.querySelector('body'),\n                    'rel',\n                    parameters['rel']\n                );\n        }\n    },\n    false\n);\n","/**\n * Horizontal bar chart with proportional segments.\n *\n * @module patterns/chart/chart\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nconst className = 'chart--bar--horizontal';\n\nlet collectionMaxValue;\n\n/**\n * Find each chart collection's maximum bar value and set as a global variable.\n * This will be used to benchmark the collection's constituent charts' relative width against.\n *\n * Example scenario: Apple yields per year\n * Bar 1 (Year 1) = 100 apples\n * Bar 2 (Year 2) = 200 apples\n * Bar 3 (Year 3) =  50 apples\n *\n * Result: Chart collection maximum = 200.\n *\n * @param {HTMLElement} chartCollection - A collection of horizontal bar charts.\n */\nfunction setCollectionMaxValue(chartCollection) {\n    let charts = chartCollection.querySelectorAll(\n            '.chart--bar--horizontal__collection'\n        ),\n        singleBarTotals = [];\n\n    for (const chart of charts) {\n        let singleBarTotal = chart.querySelector('[data-bar-total]');\n        singleBarTotal = parseInt(singleBarTotal.dataset.barTotal);\n        singleBarTotals.push(singleBarTotal);\n    }\n\n    collectionMaxValue = Math.max(...singleBarTotals);\n}\n\n/**\n * Build bar charts with segment values.\n *\n * @param {HTMLElement} chartCollection - A collection of horizontal bar charts.\n */\nfunction buildBars(chartCollection) {\n    let charts = chartCollection.querySelectorAll(\n            '.chart--bar--horizontal__collection'\n        ),\n        segmentWidths = [],\n        chartCollectionUnits = chartCollection.dataset.units;\n\n    for (const chart of charts) {\n        let singleBarTotalEls = chart.querySelector('[data-bar-total]'),\n            singleBarSegmentEls = chart.querySelector('[data-bar-segment]'),\n            singleBarTotal = parseInt(singleBarTotalEls.dataset.barTotal),\n            singleBarSegment = parseInt(singleBarSegmentEls.dataset.barSegment);\n\n        /**\n         * Set bar widths relative to collection maximum value. Display as\n         * numbers (0-100) to allow CSS to set percentage widths.\n         *\n         * Example: Apple yields per year (maximum 200)\n         * Bar 1 (Year 1) => (100/200 * 100) =  50\n         * Bar 2 (Year 2) => (200/200 * 100) = 100\n         * Bar 3 (Year 3) => ( 50/200 * 100) =  25\n         */\n        let barWidth = Math.round((singleBarTotal / collectionMaxValue) * 100),\n            segmentWidth = Math.round(\n                (singleBarSegment / singleBarTotal) * 100\n            );\n        chart.setAttribute('data-bar-width', `${barWidth}`);\n\n        /**\n         * Create data attributes for:\n         *   1. Segment width proportional to bar\n         *   2. Segment width relative to collection width\n         *\n         * Display as numbers (0-100) to allow CSS to set percentage widths.\n         *\n         * Example: Variety of apples as part of overall yield (max 200).\n         * Bar 1\n         *      Braeburn: 50, total yield: 100\n         *      Segment relative to bar => (50/100) * 100 = 50\n         *      Segment relative to collection => (50/200) * 100 = 25\n         * Bar 2\n         *      Braeburn: 40, total yield: 200\n         *      Segment relative to bar => (40/200) * 100 = 20\n         *      Segment relative to collection => (40/200) * 100 = 20\n         * Bar 3\n         *      Braeburn: 5, total yield: 50\n         *      Segment relative to bar => (5/50) * 100 = 10\n         *      Segment relative to collection => (5/200) * 100 = 2.5\n         */\n\n        let relativeWidth = Math.round((segmentWidth * barWidth) / 100);\n        singleBarSegmentEls.setAttribute(\n            'data-relative-width',\n            `${relativeWidth}`\n        );\n\n        let segments = chart.querySelectorAll('[data-bar-segment]');\n\n        for (const segment of segments) {\n            let segmentRelativeWidths = parseInt(segment.dataset.relativeWidth);\n            segmentWidths.push(segmentRelativeWidths);\n        }\n\n        singleBarSegmentEls.setAttribute(\n            'data-segment-width',\n            `${segmentWidth}`\n        );\n    }\n\n    /**\n     * Apply units label to segment with largest relative width, not just a segment's\n     * absolute value.\n     *\n     * Example:\n     * Bar 1 => Segment width: 50%, chart width: 50%, relative layout width: 25%\n     * Bar 2 => Segment width: 30%, chart width: 90%, relative layout width: 27%\n     *\n     * Result: Units label added to segment in Bar 2.\n     */\n    let largestSegmentWidth = Math.max(...segmentWidths),\n        widestSegment = chartCollection.querySelector(\n            `[data-relative-width=\"${largestSegmentWidth}\"]`\n        ),\n        widestSegmentLabel = widestSegment.querySelectorAll('span');\n\n    // Only append units once, even if segment widths are equal on multiple bars\n    widestSegmentLabel[0].append(` ${chartCollectionUnits}`);\n}\n\nfunction launchChart(chartCollection) {\n    setCollectionMaxValue(chartCollection);\n    buildBars(chartCollection);\n}\n\nexport default {\n    launchFn: launchChart,\n    launchQuery: `.${className}`,\n};\n","import { toArray, detectIE } from '../../util';\n\nconst ie = detectIE();\n\nexport default class Carousel {\n    constructor(elem, options) {\n        this.elem = elem;\n        this.config = options ? options : {};\n        this.i = 0;\n        this.x0 = null;\n        this.locked = false;\n        this.sliderTranslateCoOr = 0;\n    }\n\n    /**\n     * Set the number indicators Number\n     *\n     * @param {number} carousel index - current carousel index\n     * @param {HTMLelement} indicator html - pass HTML containing the indicator\n     */\n\n    numIndicator(index, e) {\n        e.querySelector('.swiper-indicator__active-slider').innerText =\n            index + 1;\n    }\n\n    /**\n     *\n     * Set active slider\n     *\n     * @param {number} carousel index - current carousel index\n     * @param {HTMLelement} sliders html - pass HTML containing the sliders\n     */\n\n    activeSlider(index, sliders) {\n        let a = toArray(sliders.querySelectorAll('.swiper-slide'));\n        a.forEach((e) => {\n            e.classList.remove('active');\n            e.querySelectorAll('a').forEach((a) => (a.tabIndex = -1)); // disable focus on non active slider with hyperlinks\n            e.setAttribute('aria-hidden', 'true');\n        });\n        a[index].classList.toggle('active');\n        a[index].querySelectorAll('a').forEach((a) => (a.tabIndex = 0));\n        a[index].setAttribute('aria-hidden', 'false');\n    }\n\n    /**\n     *\n     * Toggle next button\n     *\n     * @param {number} carousel index - current carousel index\n     * @param {number} length of sliders -\n     * @param {event} user event - interaction event perform by user\n     */\n\n    toogleNextBtn(index, length, e) {\n        let nextBtn = this.checkEventType(e);\n\n        if (index + 1 === length) {\n            nextBtn.querySelector('.swiper-button-next button').disabled = true;\n            nextBtn.querySelector(\n                '.swiper-button-prev button'\n            ).disabled = false;\n        } else if (this.i + 1 < length) {\n            nextBtn.querySelector(\n                '.swiper-button-next button'\n            ).disabled = false;\n            nextBtn.querySelector(\n                '.swiper-button-prev button'\n            ).disabled = false;\n        }\n        this.activeSlider(index, nextBtn);\n        if (!this.config.hidNumInd) {\n            this.numIndicator(index, nextBtn);\n        }\n    }\n\n    /**\n     *\n     * Toggle previous button\n     *\n     * @param {number} carousel index - current carousel index\n     * @param {number} length of sliders -\n     * @param {event} user event - interaction event perform by user\n     */\n\n    tooglePrevBtn(index, length, e) {\n        let prevBtn = this.checkEventType(e);\n\n        if (index + 1 === 1) {\n            prevBtn.querySelector('.swiper-button-prev button').disabled = true;\n            prevBtn.querySelector(\n                '.swiper-button-next button'\n            ).disabled = false;\n        } else if (this.i + 1 > 1) {\n            prevBtn.querySelector(\n                '.swiper-button-prev button'\n            ).disabled = false;\n            prevBtn.querySelector(\n                '.swiper-button-next button'\n            ).disabled = false;\n        }\n        this.activeSlider(index, prevBtn);\n        if (!this.config.hidNumInd) {\n            this.numIndicator(index, prevBtn);\n        }\n    }\n\n    /**\n     *\n     * Move slide either forwards or backwards\n     *\n     * @param {event} user event - interaction event perform by user from onClick on btn or thumbnail\n     * @param {boolean} boolean for either next or pervious - boolean to check if next or previous is called\n     */\n\n    moveSlide(e, t) {\n        const sl = this.checkEventType(e).querySelector('.swiper-wrapper');\n\n        if (sl.classList.contains('smooth')) {\n            sl.classList.toggle('smooth');\n        }\n\n        if (!ie) {\n            if (this.config.defaultCarousel && e.target.tagName === 'INPUT') {\n                sl.style.setProperty('--i', this.i);\n            } else {\n                t\n                    ? sl.style.setProperty(\n                          '--i',\n                          this.i !== 0 ? (this.i += 1) : (this.i = 1)\n                      )\n                    : sl.style.setProperty(\n                          '--i',\n                          this.i !== 0 ? (this.i -= 1) : (this.i = 1)\n                      );\n            }\n\n            sl.classList.toggle('smooth');\n\n            t\n                ? this.toogleNextBtn(this.i, sl.children.length, e)\n                : this.tooglePrevBtn(this.i, sl.children.length, e);\n        } else {\n            let sliderWidthIndex =\n                    (this.totalSliderWidth(e) / sl.children.length) * this.i,\n                sliderWidth = this.totalSliderWidth(e) / sl.children.length;\n\n            t\n                ? (this.sliderTranslateCoOr -= sliderWidth)\n                : (this.sliderTranslateCoOr += sliderWidth);\n\n            sl.classList.toggle('smooth');\n\n            if (this.config.defaultCarousel && e.target.tagName === 'INPUT') {\n                this.sliderTranslateCoOr = -sliderWidthIndex;\n                sl.style.setProperty(\n                    'transform',\n                    'translate(-' + sliderWidthIndex + 'px)'\n                );\n                sl.style.setProperty('--i', this.i);\n            } else {\n                sl.style.setProperty(\n                    'transform',\n                    'translate(' + this.sliderTranslateCoOr + 'px)'\n                );\n                t\n                    ? this.i !== 0\n                        ? (this.i += 1)\n                        : (this.i = 1)\n                    : this.i !== 0\n                    ? (this.i -= 1)\n                    : (this.i = 1);\n            }\n            t\n                ? this.toogleNextBtn(this.i, sl.children.length, e)\n                : this.tooglePrevBtn(this.i, sl.children.length, e);\n        }\n        if (this.config.defaultCarousel) {\n            this.activeThumbnail(this.i, e);\n        }\n    }\n\n    /**\n     *\n     * Next slide\n     *\n     * @param {event} user event - interaction event perform by user from onClick on btn or thumbnail\n     */\n\n    next(e) {\n        e.preventDefault();\n        this.moveSlide(e, true);\n    }\n\n    /**\n     *\n     * Prvious slide\n     *\n     * @param {event} user event - interaction event perform by user from onClick on btn or thumbnail\n     */\n\n    previous(e) {\n        e.preventDefault();\n        this.moveSlide(e, false);\n    }\n\n    /**\n     *\n     * Return touch points of either touch or mouse\n     *\n     * @param {event} user event - event on silder from either mouse or touch events\n     * @returns {event | object} - either return the event back or the object of touch events\n     */\n\n    unify(e) {\n        return e.changedTouches ? e.changedTouches[0] : e;\n    }\n\n    /**\n     *\n     * Start of slider move Set mousedown value to global and toggle smooth class for css transition on mouse down or touch start\n     *\n     * @param {event} user event - user action either mosuedown or touch start\n     */\n\n    lock(e) {\n        this.x0 = this.unify(e).clientX; //set mousedown clientX value\n        e.target.classList.toggle('smooth', !(this.locked = true));\n    }\n\n    /**\n     *\n     * Moving the slider - moving the slider trigger by mouse move or touch move\n     *\n     * @param {event} user event - mousetouch or touchmove\n     */\n\n    drag(e) {\n        if (this.i !== e.target.children.length - 1 && this.i !== 0) {\n            if (this.locked) {\n                e.target.style.setProperty(\n                    '--tx',\n                    `${Math.round(this.unify(e).clientX - this.x0)}px`\n                );\n            }\n        }\n    }\n\n    /**\n     *\n     * Move slider\n     *\n     * @param {event} user event - mouseup or touchend\n     */\n\n    move(e) {\n        if (this.locked) {\n            let dx = this.unify(e).clientX - this.x0, //dx is value calculate by using clientX mousedown and after value\n                s = Math.sign(dx), //check if swipe is left or right by checking value is negative or positive\n                tx = getComputedStyle(e.target).getPropertyValue('--tx'),\n                p = parseInt(tx.replace(/\\D/g, '')); // MAY use the drag length as a condition to move slider\n\n            if (\n                (this.i > 0 || s < 0) &&\n                (this.i < e.target.children.length - 1 || s > 0) &&\n                (p > 100 ||\n                    this.i === 0 ||\n                    this.i === e.target.children.length - 1) //conditions to swip to slider\n            ) {\n                if (!ie) {\n                    e.target.style.setProperty('--i', (this.i -= s)); //increment i (i repersent the slider)\n                    e.target.style.setProperty('--tx', '0px'); //reset touch x value\n                    e.target.classList.toggle('smooth', !(this.locked = false));\n                    this.x0 = null;\n                    if (s === -1) {\n                        this.toogleNextBtn(this.i, e.target.children.length, e);\n                    } else {\n                        this.tooglePrevBtn(this.i, e.target.children.length, e);\n                    }\n                } else {\n                    this.animateSlider(e, s);\n                    s === -1\n                        ? this.toogleNextBtn(\n                              this.i,\n                              e.target.children.length,\n                              e\n                          )\n                        : this.tooglePrevBtn(\n                              this.i,\n                              e.target.children.length,\n                              e\n                          );\n                }\n                if (this.config.defaultCarousel) {\n                    this.activeThumbnail(this.i, e);\n                }\n            }\n        }\n    }\n\n    /**\n     *\n     * Stop drag when mouse or touch move outside the slider element\n     *\n     * @param {event} user event - mouseup or touchend\n     */\n\n    stopDrag(e) {\n        e.target.style.setProperty('--tx', '0px');\n        e.stopPropagation();\n        e.target.classList.toggle('smooth', !(this.locked = false));\n    }\n\n    /**\n     *\n     * Check event type and passing the correct parent node\n     *\n     * @param {event} user event - either mouse, touch, click events and thumbnail click events\n     * @returns {HTMLSliderElement} -\n     */\n\n    checkEventType(e) {\n        if (e.target.parentElement.classList.contains('galleria-thumbnail')) {\n            return e.target.parentElement.parentElement.parentElement\n                .parentElement;\n        } else {\n            switch (e.type) {\n                case 'mouseup':\n                    return e.target.parentElement.parentElement;\n\n                case 'touchend':\n                    return e.target.parentElement.parentElement;\n\n                default:\n                    return e.target.parentElement.parentElement.parentElement;\n            }\n        }\n    }\n\n    /**\n     *\n     * For edge browsers calculate silders total width\n     *\n     * @param {event} user event -\n     * @returns {number} - total width of slider\n     */\n    //edge fall back cannot use CSS var inside a cal()\n    totalSliderWidth(e) {\n        const sliders = toArray(\n            this.checkEventType(e).querySelectorAll('.swiper-slide')\n        );\n        let totalWidth = 0;\n\n        sliders.forEach((s) => {\n            let style = window.getComputedStyle\n                ? getComputedStyle(s, null)\n                : s.currentStyle;\n\n            totalWidth += s.offsetWidth + parseInt(style.marginRight) || 0;\n        });\n\n        return totalWidth;\n    }\n\n    /**\n     *\n     * Animate slider by setting translate value\n     *\n     * @param {event} user event -\n     * @param {number}  - number either negative or a positive number\n     */\n\n    animateSlider(e, lr) {\n        let sliderWidth = this.totalSliderWidth(e) / e.target.children.length;\n\n        lr === -1\n            ? (this.sliderTranslateCoOr -= sliderWidth)\n            : (this.sliderTranslateCoOr += sliderWidth);\n        e.target.style.setProperty(\n            'transform',\n            'translate(' + this.sliderTranslateCoOr + 'px)'\n        );\n        e.target.classList.toggle('smooth');\n        this.i -= lr;\n    }\n\n    /**\n     *\n     * Adds and setups carousel controls\n     * e.g.\n     *\n     *  <div class=\"swiper-viewport\">\n     *      <div class=\"swiper-container\">\n     *\n     *          <ul class=\"swiper-wrapper\">\n     *              <li class=\"swiper-slide\">\n     *                  <div class=\"swiper-slide__image-wrapper\">\n     *                      <picture>\n     *                          <img src=\"https://web2020.city.ac.uk/documentation/patterns/carousel/_DP57645_1920x1080.jpg\" alt=\"Image\">\n     *                      </picture>\n     *                  </div>\n     *                  <div class=\"swiper-slide__text\">\n     *                      <p>We are a leading provider of healthcare .....</p>\n     *                  </div>\n     *              </li>\n     *              <li class=\"swiper-slide\">\n     *                  <div class=\"swiper-slide__image-wrapper\">\n     *                      <img class=\"lazy\" src=\"https://web2020.city.ac.uk/documentation/patterns/carousel/_DP57645_1920x1080.jpg\" alt=\"Image\">\n     *                  </div>\n     *                  <div class=\"swiper-slide__text\">\n     *                      <p>We are a leading provider of healthcare .....</p>\n     *                  </div>\n     *              </li>\n     *          </ul>\n     *\n     *      </div>\n     *  </div>\n     *\n     *@param {HTMLElement} elem - The element to carousel.\n     *@param {Object} object - Object containing setting to setup defualt carousel. if using full width carousel\n     * then do not pass in object unless you want to hide the number indicators.\n     * To intialise the defualt carousel pass this object\n     * {\n     *  defaultCarousel: true,\n     *  hidNumInd: true,\n     *  }\n     *\n     */\n\n    init() {\n        const lazyImages = [].slice.call(\n            this.elem.querySelectorAll('img.lazy')\n        );\n        if (\n            'IntersectionObserver' in window &&\n            'IntersectionObserverEntry' in window &&\n            'intersectionRatio' in window.IntersectionObserverEntry.prototype\n        ) {\n            let lazyImageObserver = new IntersectionObserver(function (\n                entries\n            ) {\n                entries.forEach(function (entry, i) {\n                    if (i === 0) {\n                        entry.target\n                            .querySelector('img')\n                            .classList.remove('lazy');\n                    }\n                    if (entry.isIntersecting) {\n                        let lazyImage = entry.target.parentNode.parentNode.nextSibling.firstElementChild.querySelector(\n                            'img'\n                        );\n                        let sourceSet = entry.target.parentNode.parentNode.nextSibling.firstElementChild.querySelectorAll(\n                            'source'\n                        );\n\n                        sourceSet.forEach((item) => {\n                            item.srcset = item.dataset.srcset;\n                        });\n\n                        lazyImage.src = lazyImage.dataset.src;\n                        lazyImage.classList.remove('lazy');\n                        lazyImageObserver.unobserve(entry.target);\n                    }\n                });\n            });\n\n            lazyImages.forEach(function (lazyImage, i, a) {\n                if (i !== a.length - 1) {\n                    lazyImageObserver.observe(lazyImage.parentNode);\n                } else {\n                    lazyImage.classList.remove('lazy');\n                }\n            });\n        } else {\n            lazyImages.forEach((e) => {\n                if (e.dataset.src) {\n                    e.src = e.dataset.src;\n                }\n                e.classList.remove('lazy');\n            });\n        }\n\n        const _C = this.elem.querySelector('.swiper-wrapper'),\n            numInd = document.createElement('div'),\n            numIndActiveSl = document.createElement('span'),\n            numIndSeparator = document.createElement('span'),\n            numbIndSlLength = document.createElement('span'),\n            buttonsWrap = document.createElement('div'),\n            prevBtnWrap = document.createElement('div'),\n            nextBtnWrap = document.createElement('div'),\n            nextBtn = document.createElement('BUTTON'),\n            prevBtn = document.createElement('BUTTON');\n        //setup carousel buttons\n        buttonsWrap.className = 'swiper-buttons-wrap';\n        prevBtnWrap.className = 'swiper-button-prev';\n        nextBtnWrap.className = 'swiper-button-next';\n        nextBtn.name = 'nextButton';\n        nextBtn.type = 'button';\n        nextBtn.className =\n            'fas fa-arrow-right swiper-slider-arrow arrow-right--btn-next';\n        nextBtn.setAttribute('aria-label', 'Next slider');\n        nextBtn.addEventListener('click', this.next.bind(this), false);\n        prevBtn.name = 'prevButton';\n        prevBtn.type = 'button';\n        prevBtn.className =\n            'fas fa-arrow-left swiper-slider-arrow arrow-left--btn-prev';\n        prevBtn.setAttribute('aria-label', 'Previous slider');\n        prevBtn.addEventListener('click', this.previous.bind(this), false);\n        prevBtn.disabled = true;\n\n        nextBtnWrap.appendChild(nextBtn);\n        prevBtnWrap.appendChild(prevBtn);\n        buttonsWrap.appendChild(prevBtnWrap);\n        buttonsWrap.appendChild(nextBtnWrap);\n\n        if (!this.config.hidNumInd) {\n            //perpare the indicators to append to html\n            numInd.className = 'swiper-indicator';\n            numIndActiveSl.className = 'swiper-indicator__active-slider';\n            numbIndSlLength.className = 'swiper-indicator__slider-length';\n            numIndActiveSl.innerText = this.i + 1;\n            numbIndSlLength.innerText = _C.children.length;\n            numIndSeparator.innerText = ' /';\n\n            numInd.appendChild(numIndActiveSl);\n            numInd.appendChild(numIndSeparator);\n            numInd.appendChild(numbIndSlLength);\n\n            this.elem.appendChild(numInd);\n        }\n\n        this.elem.appendChild(buttonsWrap);\n\n        this.config.sliderLength = _C.children.length;\n\n        if (this.config.defaultCarousel) {\n            this.elem\n                .querySelector('.galleria-thumbnails-list')\n                .style.setProperty('--thumbnails', this.config.sliderLength);\n        }\n\n        _C.style.setProperty('--n', this.config.sliderLength);\n        //add event listeners\n        _C.addEventListener('mousedown', this.lock.bind(this), false);\n        _C.addEventListener('touchstart', this.lock.bind(this), false);\n        _C.addEventListener('mousemove', this.drag.bind(this), false);\n        _C.addEventListener('touchmove', this.drag.bind(this), false);\n        _C.addEventListener('mouseup', this.move.bind(this), false);\n        _C.addEventListener('touchend', this.move.bind(this), false);\n        _C.addEventListener('mouseout', this.stopDrag.bind(this), false);\n\n        _C.firstElementChild.classList.toggle('active');\n\n        this.activeSlider(this.i, _C);\n    }\n}\n","/**\n * WAI-ARIA attributes\n *\n * Quicker to type, intellisensible, documents what they're for, and saves a\n * tiny amount of code by replacing the string 'aria-' with a minifiable\n * variable and dot notation.\n *\n * @module aria-attributes\n * @author Web Development\n * @copyright City, University of London 2018\n */\n\n/**\n * @readonly\n * @enum {string}\n */\nconst aria = {\n    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */\n    activeDescendant: 'aria-activedescendant',\n    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */\n    atomic: 'aria-atomic',\n    /** Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be presented if they are made. */\n    autoComplete: 'aria-autocomplete',\n    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */\n    busy: 'aria-busy',\n    /** Indicates the current \"checked\" state of checkboxes, radio buttons, and other widgets. */\n    checked: 'aria-checked',\n    /** Defines the total number of columns in a table, grid, or treegrid. */\n    colCount: 'aria-colcount',\n    /** Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid. */\n    colIndex: 'aria-colindex',\n    /** Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid. */\n    colSpan: 'aria-colspan',\n    /** Identifies the element (or elements) whose contents or presence are controlled by the current element. */\n    controls: 'aria-controls',\n    /** Indicates the element that represents the current item within a container or set of related elements. */\n    current: 'aria-current',\n    /** Identifies the element (or elements) that describes the object. */\n    describedBy: 'aria-describedby',\n    /** Identifies the element that provides a detailed, extended description for the object. */\n    details: 'aria-details',\n    /** Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable. */\n    disabled: 'aria-disabled',\n    /** [Deprecated in ARIA 1.1] Indicates what functions can be performed when a dragged object is released on the drop target. */\n    dropEffect: 'aria-dropeffect',\n    /** Identifies the element that provides an error message for the object. */\n    errorMessage: 'aria-errormessage',\n    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */\n    expanded: 'aria-expanded',\n    /** Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion, allows assistive technology to override the general default of reading in document source order. */\n    flowTo: 'aria-flowto',\n    /** [Deprecated in ARIA 1.1] Indicates an element's \"grabbed\" state in a drag-and-drop operation. */\n    grabbed: 'aria-grabbed',\n    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */\n    hasPopup: 'aria-haspopup',\n    /** Indicates whether the element is exposed to an accessibility API. */\n    hidden: 'aria-hidden',\n    /** Indicates the entered value does not conform to the format expected by the application. */\n    invalid: 'aria-invalid',\n    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */\n    keyShortcuts: 'aria-keyshortcuts',\n    /** Defines a string value that labels the current element. */\n    label: 'aria-label',\n    /** Identifies the element (or elements) that labels the current element. */\n    labelledBy: 'aria-labelledby',\n    /** Defines the hierarchical level of an element within a structure. */\n    level: 'aria-level',\n    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */\n    live: 'aria-live',\n    /** Indicates whether an element is modal when displayed. */\n    modal: 'aria-modal',\n    /** Indicates whether a text box accepts multiple lines of input or only a single line. */\n    multiLine: 'aria-multiline',\n    /** Indicates that the user may select more than one item from the current selectable descendants. */\n    multiSelectable: 'aria-multiselectable',\n    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */\n    orientation: 'aria-orientation',\n    /** Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship between DOM elements where the DOM hierarchy cannot be used to represent the relationship. */\n    owns: 'aria-owns',\n    /** Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value. A hint could be a sample value or a brief description of the expected format. */\n    placeholder: 'aria-placeholder',\n    /** Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM. */\n    posInset: 'aria-posinset',\n    /** Indicates the current \"pressed\" state of toggle buttons. */\n    pressed: 'aria-pressed',\n    /** Indicates that the element is not editable, but is otherwise operable. */\n    readOnly: 'aria-readonly',\n    /** Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified. */\n    relevant: 'aria-relevant',\n    /** Indicates that user input is required on the element before a form may be submitted. */\n    required: 'aria-required',\n    /** Defines a human-readable, author-localized description for the role of an element. */\n    roleDescription: 'aria-roledescription',\n    /** Defines the total number of rows in a table, grid, or treegrid. */\n    rowCount: 'aria-rowcount',\n    /** Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid. */\n    rowIndex: 'aria-rowindex',\n    /** Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid. */\n    rowSpan: 'aria-rowspan',\n    /** Indicates the current \"selected\" state of various widgets. */\n    selected: 'aria-selected',\n    /** Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM. */\n    setSize: 'aria-setsize',\n    /** Indicates if items in a table or grid are sorted in ascending or descending order. */\n    sort: 'aria-sort',\n    /** Defines the maximum allowed value for a range widget. */\n    valueMax: 'aria-valuemax',\n    /** Defines the minimum allowed value for a range widget. */\n    valueMin: 'aria-valuemin',\n    /** Defines the current value for a range widget. */\n    valueNow: 'aria-valuenow',\n    /** Defines the human readable text alternative of aria-valuenow for a range widget. */\n    valueText: 'aria-valuetext',\n};\n\nexport default Object.freeze(aria);\n","/**\n * Back To Top Link Scroll\n *\n * @module patterns/back-to-top/back-to-top\n * @author Walter Reyneke <walter.reyneke@city.ac.uk>\n * @copyright City, University of London 2019\n */\nimport { createHTMLElement } from '../../util';\nconst className = 'back-to-top',\n    viewPortHeight = window.innerHeight;\n\n/**\n * Back to top anchor anchor only appears on long pages and when you have scrolled down long enough\n * Please change the parameter below to alter the behaviour of the back to top anchor.\n *\n * scrollPos - sets how many viewport heights you need to scroll down for back to top to appear. 1 = 1 viewport height\n */\nconst scrollPos = 4;\n\n/**\n *\n * @param {HTMLElement} - selects back to top parent element, which is used in return to select children elements\n */\nfunction initBacktoTop(backToTop) {\n    const backToTopAnchor = backToTop.querySelectorAll('a')[0];\n\n    window.addEventListener('load', function () {\n        backToTop.querySelector('.back-to-top__button__arrow').appendChild(\n            createHTMLElement('span', [\n                { label: 'content', val: 'top' },\n                { label: 'class', val: 'back-to-top__button__arrow__label' },\n            ])\n        ); // adds inner button label for if javascript enabled\n\n        backToTop.setAttribute('hidden', 'true');\n\n        window.addEventListener(\n            'scroll',\n            () => {\n                updateProgress(backToTopAnchor);\n                showAnchor(backToTop);\n            },\n            false\n        );\n    });\n}\n/**\n *  Anchor fading behaviour\n *\n * @param {HTMLElement} backToTop - back to top element.\n */\nfunction showAnchor(backToTop) {\n    const positionOnScreen = window.pageYOffset;\n\n    if (positionOnScreen > viewPortHeight * scrollPos) {\n        // shows anchor when scrolled down far enough - see parameters\n        backToTop.dataset.docked = 'false';\n        backToTop.removeAttribute('hidden');\n    } else if (positionOnScreen < 200) {\n        // hides anchor when close to top of the page\n        backToTop.setAttribute('hidden', 'true');\n        backToTop.dataset.docked = 'false';\n    }\n}\n\n/**\n *  Progress meter\n *\n * @param {HTMLElement} backToTopAnchor - The anchor of the back to top element.\n */\nfunction updateProgress(backToTopAnchor) {\n    // Setting up SVG animation\n    const progressPath = backToTopAnchor.querySelector('path'),\n        pathLength = progressPath.getTotalLength();\n\n    progressPath.style.strokeDasharray = pathLength + ' ' + pathLength;\n    progressPath.style.strokeDashoffset = pathLength;\n\n    // Calculate values\n    const scroll = window.pageYOffset,\n        height = document.documentElement.scrollHeight - window.innerHeight,\n        progress = pathLength - (scroll * pathLength) / height;\n\n    // Updates progress bar\n    progressPath.style.strokeDashoffset = progress;\n}\n\nexport default {\n    launchFn: initBacktoTop,\n    launchQuery: `.${className}`,\n};\n","import Carousel from './carousel-constructor';\n\nconst className = 'swiper-container';\n\nfunction init(elem) {\n    const c = new Carousel(elem);\n    c.init();\n}\n\nexport default {\n    launchFn: init,\n    launchQuery: `.${className}`,\n};\n","/**\n * Warning removal\n *\n * @module patterns/cms-editor-warning/cms-editor-warning\n * @author Web Development\n * @copyright City, University of London 2018\n */\nimport { removeClass } from '../../util';\n\nconst className = 'cms-editor',\n    warningClass = className + '-warning',\n    buttonClass = warningClass + '-remover',\n    wrapperClass = 'wrapper--' + buttonClass;\n\n/**\n * Create a warning remover button.\n *\n * @returns {HTMLButtonElement} A button element.\n */\nfunction createButton() {\n    const button = document.createElement('button');\n    button.className = buttonClass;\n    button.setAttribute('type', 'button');\n    button.appendChild(document.createTextNode('Remove CMS editor warnings'));\n    return button;\n}\n\n/**\n * The Web 2020 design adds a class .cms-editor to the body tag if the current\n * has write access to the page.\n *\n * If there are any CMS editor warnings inside the launch element, this will\n * append a button to the element that will remove that class, the warnings,\n * and the button itself, leaving the page as it would appear to the user.\n *\n * @param {HTMLElement} elem - An HTML element with the cms-editor class.\n */\nfunction launchRemover(elem) {\n    const warnings = Array.from(elem.querySelectorAll(`.${warningClass}`));\n\n    if (warnings.length) {\n        const button = createButton(),\n            wrapper = document.createElement('div');\n\n        button.addEventListener(\n            'click',\n            () => {\n                warnings.forEach((w) => w.parentNode.removeChild(w));\n                button.parentNode.removeChild(button);\n                removeClass(elem, className, false);\n            },\n            true\n        );\n\n        wrapper.className = wrapperClass;\n        wrapper.appendChild(button);\n\n        document\n            .querySelector('body')\n            .insertBefore(wrapper, document.querySelector('.global-footer'));\n    }\n}\n\nexport default {\n    launchFn: launchRemover,\n    launchQuery: `.${className}`,\n};\n","/**\n *  Animates content section to fade in and upwards on down scroll\n *\n * @module paint-layouts/case-study-transition-effects/content-section\n * @author Walter Reyneke <walter.reyneke@city.ac.uk>\n * @copyright City, University of London 2019!\n */\n\nimport { isMobile } from '../../../util';\n\nconst className = 'content-fade-in';\n\nfunction contentFadeIn(contentFadein) {\n    const viewPortHeight = window.innerHeight; // calculates viewport height\n\n    if (!isMobile()) {\n        contentFadein.classList.add('content-fade-in--start');\n\n        window.addEventListener('scroll', function () {\n            const elemOffset = contentFadein.offsetTop;\n            const screenPos = window.pageYOffset; // calculates scroll position\n\n            if (\n                screenPos > elemOffset - viewPortHeight + 10 &&\n                !contentFadein.className.includes('content-fade-in--complete')\n            ) {\n                contentFadein.classList.add('content-fade-in--complete');\n            }\n        });\n    }\n}\n\nexport default {\n    launchFn: contentFadeIn,\n    launchQuery: `.${className}`,\n};\n","/**\n * Leading separator transition\n *\n * @module paint-layouts/case-study-transition-effects/leading-separator\n * @author Walter Reyneke <walter.reyneke@city.ac.uk>\n * @copyright City, University of London 2019!\n */\n\nimport { isMobile } from '../../../util';\n\nconst className = 'content-separator-container';\n\n/**\n *\n * @param {HTMLElement} contentSeparatorContainer: the separator is the\n * first child of this container\n *\n */\nfunction contentSeparator(contentSeparatorContainer) {\n    const viewPortHeight = window.innerHeight; // calculates viewport height\n\n    let el = insertElement(contentSeparatorContainer);\n\n    if (!isMobile()) {\n        el.classList.add('content-separator--transition-start');\n        window.addEventListener('scroll', function () {\n            const elemOffset = el.offsetTop;\n            const screenPos = window.pageYOffset; // calculates scroll position\n\n            if (\n                screenPos > elemOffset - viewPortHeight + 20 &&\n                !el.className.includes('content-separator--transition-complete')\n            ) {\n                el.classList.add('content-separator--transition-complete');\n            }\n        });\n    }\n}\n\n/**\n *\n * @param {HTMLElement} contentSeparatorContainer: the separator is the\n * first child of this container\n *\n * @returns {HTMLElement} el: the element that has the transition\n *\n */\nfunction insertElement(contentSeparatorContainer) {\n    let el = document.createElement('div');\n    el.setAttribute('class', 'content-separator');\n    contentSeparatorContainer.prepend(el);\n\n    return el;\n}\n\nexport default {\n    launchFn: contentSeparator,\n    launchQuery: `.${className}`,\n};\n","/**\n * Background slideup transition, Animates content to slide up on down scroll\n *\n * @module paint-layouts/case-study-transition-effects/content-slideup\n * @author Walter Reyneke <walter.reyneke@city.ac.uk>\n * @copyright City, University of London 2019!\n */\n\nimport { isMobile } from '../../../util';\n\nconst className = 'content-slide-up';\n\nfunction contentSlideUp(contentSlideup) {\n    const viewPortHeight = window.innerHeight; // calculates viewport height\n\n    if (!isMobile()) {\n        contentSlideup.classList.add('content-slideup--start');\n        window.addEventListener('scroll', function () {\n            const screenPos = window.pageYOffset; // calculates scroll position\n            const elemOffsetTop = contentSlideup.offsetTop; // calculates element offset from top to the page\n            const parentElemHeight =\n                contentSlideup.parentElement.offsetHeight -\n                parseInt(\n                    window\n                        .getComputedStyle(contentSlideup.parentElement, null)\n                        .getPropertyValue('padding-bottom')\n                ) -\n                parseInt(\n                    window\n                        .getComputedStyle(contentSlideup.parentElement, null)\n                        .getPropertyValue('padding-top')\n                );\n\n            if (\n                screenPos >\n                    elemOffsetTop -\n                        viewPortHeight -\n                        (parentElemHeight * 70) / 100 &&\n                !contentSlideup.className.includes('content-slideup--end')\n            ) {\n                contentSlideup.classList.add('content-slideup--end');\n            }\n        });\n    }\n}\n\nexport default {\n    launchFn: contentSlideUp,\n    launchQuery: `.${className}`,\n};\n","/**\n * Find us, campus map page using Google map API\n *\n * @module patterns/find-us/find-us\n * @author Walter Reyneke <walter.reyneke@city.ac.uk>\n * @copyright City, University of London 2020\n */\nimport { createHTMLElement } from '../../util';\nconst className = 'campus-map';\n\nfunction createMap(mapContainer) {\n\n    // == PROPERTIES ==\n\n    let /**\n         * data source - relative to handle production and test environments\n         * @let {String}\n         */\n        dataSrc =\n        '/feed/locations/city-buildings/_nocache',\n        /**\n         * Create a LatLng object containing the coordinate for the center of the map\n         * @let {Object}\n         */\n        latlng = new google.maps.LatLng(51.527761, -0.103283),\n        \n        /**\n         * an object literal containing the properties we want to pass to the map\n         * @let {Object}\n         */\n        mapOptions = {\n            zoom: 17,\n            key: 'AIzaSyBvg6r1x2ZRKPAsceVaKPlg6tO20QiBDpo',\n            center: latlng,\n            mapTypeId: google.maps.MapTypeId.ROADMAP,\n            streetViewControl: true,\n            mapTypeControl: true,\n            mapTypeControlOptions: {\n                style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,\n            },\n            navigationControl: true,\n        },\n        /**\n         * Call the constructor, thereby initializing the map  as soon as possible\n         * @let {Object}: Google maps Map object\n         */\n        map = new google.maps.Map(\n            document.getElementById('map-canvas'),\n            mapOptions\n        ),\n        searchBox = document.getElementById('map-search'),\n        /**\n         * initlaise infoWindow\n         * @let {Object}: Google maps InfoWindow object\n         */\n        infoWindow = new google.maps.InfoWindow({\n            maxWidth: 400,\n            \n        }),\n\n        /**\n         * cityLayers object literal containing skeleton options for City related things - parsing the xml file adds to this\n         * it is where we keep arrays of markers to use when clearing/setting things on the map\n         * @let {Object}:\n         */\n        cityLayers = {\n            // array to hold each google marker object - for each University location\n            bigMarkersArray: [],\n            //arrray to hold building google marker objects - they never got removed from map\n            bigBuildingsArray: [],\n\n            buildingsObj: {},\n\n            buildings: {\n                toggler: null,\n                markersArray: [],\n                zoomLevel: 17,\n                list: '',\n            },\n            libraries: {\n                toggler: document.getElementById('toggle-libraries'),\n                markersArray: [],\n                zoomLevel: 17,\n                list: '',\n            },\n            accommodation: {\n                toggler: null,\n                markersArray: [],\n                zoomLevel: 17,\n                list: '',\n            },\n            lectureTheatres: {\n                toggler: null,\n                markersArray: [],\n                zoomLevel: 17,\n                list: '',\n            },\n            studentCentre: {\n                toggler: document.getElementById('toggle-studentCentre'),\n                markersArray: [],\n                zoomLevel: 17,\n                list: '',\n            },\n            sports: {\n                toggler: null,\n                markersArray: [],\n                zoomLevel: 17,\n                list: '',\n            },\n            computerLabs: {\n                toggler: document.getElementById('toggle-computerLabs'),\n                markersArray: [],\n                zoomLevel: 17,\n                list: '',\n            },\n        };\n        \n        // == METHODS ==\n\n        /**\n         * Removes the overlays from the map, but keeps them in the array\n         * @parameter {Array} markersArray: a collections of markers\n         * @return {Undefined}\n         */\n        function clearOverlays(markersArray) {\n            let i;\n\n            if (markersArray) {\n                for (i in markersArray) {\n                    if (\n                        markersArray.hasOwnProperty(i) &&\n                        typeof markersArray[i] !== 'function'\n                    ) {\n                        markersArray[i].setMap(null);\n                    }\n                }\n            }\n        };\n\n        /**\n         * the hashChange handler - listens for hash changes and then does cool stuff\n         * @parameter {string} id of building: the window hashchange event\n         * @return {Undefined}\n         */\n\n        let marker;\n        function hashChange(id) {\n    \n            // Trigger - to show northampton square campus marker on initial load\n            if(id === '' || id =='498711'){\n                id='498711';\n            };\n\n            if(id != '498711'){\n                // removes northampton square campus map overlay  \n                initialMapOverlay.setMap(null);\n            };\n     \n            //loop over  bigBuildingsArray to find marker\n            for (let building in cityLayers.buildingsObj) {\n                if (id === building) {\n                    let found = cityLayers.buildingsObj[building];\n                    \n                    // clears map from previous markers\n                    if(marker){\n                        marker.setMap(null);\n                    }\n\n                    // allocates new marker info to variable\n                    marker = found;\n                    //open infoWindow for this marker\n                    //clear all overlays first\n                    clearOverlays(cityLayers.bigMarkersArray);\n                    //make marker visible\n                    marker.setVisible(true);\n                    //set infoWindow content\n                    infoWindow.setContent(marker.infoHtml);\n                    //open the infoWindow centered on the marker\n                    infoWindow.open(map, marker);\n                    //pan map to marker position\n                    map.panTo(marker.position);\n                    //add marker to map\n                    marker.setMap(map);\n                }\n            }\n        };\n\n        /**\n         * the updateHash called when a marker, infoWindow or marker link is clicked - updates hash\n         * @parameter {Object || String} caller: the marker, marker link or infoWindow firing the event\n         * @return {Undefined}\n         */\n        function updateHash(caller) {\n            let callerId = '';\n\n            if (!caller) {\n                return;\n            }\n\n            if (typeof caller === 'string') {\n                //a marker link was clicked\n                callerId = caller;\n               // state[callerId] = 1;\n            } else if (caller.hasOwnProperty('id')) {\n                //a marker was clicked\n                callerId = caller.id;\n                //state[callerId] = 1;\n            } else {\n                //an infoWindow was closed\n                callerId = 0;\n            }\n            \n            location.hash = callerId;\n            hashChange(callerId);\n        };\n        /**\n         * Shows any overlays currently in the array\n         * @parameter {Array} markersArray: a collection of markers\n         * @return {Undefined}\n         */\n        function showOverlays(markersArray) {\n            let i;\n\n            if (markersArray) {\n                for (i in markersArray) {\n                    if (\n                        markersArray.hasOwnProperty(i) &&\n                        typeof markersArray[i] !== 'function'\n                    ) {\n                        markersArray[i].setMap(map);\n                    }\n                }\n            }\n        };\n        /**\n         * creates a new category of place in CityLayers object\n         * @parameter {String} name: the new name of the category ?\n         * @return {Undefined}\n         */\n        function newCategory(name) {\n            name.toggler = null; // walter replaced with name - was this\n            name.markersArray = [];\n            name.zoomLevel = 17;\n        }; \n\n        /**\n         *  creates individual markers, builds a corresponding filter item, binds a infoWindow to marker with html\n         * and populates accordions\n         * @parameter {Object} markerConfig: an object containing letious marker configuration options\n         * @return {Object} marker - google maps marker\n         */\n        function createMarker(markerConfig) {\n            let listId = document.getElementById(markerConfig.category), // selects accordion category\n                listItem,\n                marker,\n                anchor,\n                html = '';\n\n            // build html for infoWindow\n\n            // check to see if there's custom URL first\n            if (markerConfig.urlCustom) {\n                html =\n                    '<div id=\"info-window\" style=\"min-height: 60px;\"><h3><a href=\"' +\n                    markerConfig.urlCustom +\n                    '\">' +\n                    markerConfig.name +\n                    '</a></h3>';\n            } \n            \n            else {\n                // if has asset has a link\n                if (markerConfig.linkHref.length !== 0) {\n                    html =\n                        '<div id=\"info-window\" style=\"min-height: 60px;\"><h3><a href=\"' +\n                        markerConfig.linkHref +\n                        '\">' +\n                        markerConfig.name +\n                        '</a></h3>';\n                } else {\n                    html =\n                        '<div id=\"info-window\" style=\"min-height: 60px;\"><h3>' +\n                        markerConfig.name +\n                        '</h3>';\n                }\n            }\n\n            // calculates minutes label as singular or plurar\n            function minutesFormat(mins){\n                if(parseInt(markerConfig.walkingDistance)>1){\n                    return ' minutes';\n                }\n                else {\n                    return ' minute';\n                }\n            }\n\n            // add description and close div element\n            //html += markerConfig.description.replace(/\\<h2/g, '<h4').replace(/\\h2>/g, 'h4>')  + '</div>';\n            \n            markerConfig.buildingPrefix ? html+= '<p>Rooms beginning: ' + markerConfig.buildingPrefix + '</p>' : null;\n            \n            html+= '<p>';\n            markerConfig.roomNumber ? html+= 'Room '+ markerConfig.roomNumber + '</br>' : null;\n            markerConfig.floor ? html+= 'Floor '+ markerConfig.floor + '</br>' : null;\n            markerConfig.building ? html+= markerConfig.building + '</br>' : null;\n            markerConfig.buildingAdditionalInfo ? html+= markerConfig.buildingAdditionalInfo + '</br>' : null;\n            markerConfig.street1 ? html+= markerConfig.street1 + '</br>' : null;\n            markerConfig.street2 ? html+= markerConfig.street2 + '</br>' : null;\n            markerConfig.city ? html+= markerConfig.city + '</br>' : null;\n            markerConfig.postcode ? html+= markerConfig.postcode + '</br>': null;\n            html+= '</p>';\n\n            html+= '<p>';\n            markerConfig.campus ? html+= markerConfig.campus + '</br>' : null;\n            html+= '</p>';\n\n            markerConfig.supports ? html+= '<p>' + markerConfig.supports + '</p>' : null;\n\n            markerConfig.walkingDistance ? html+= '<p>Walking distance to campus: </br>' + markerConfig.walkingDistance + minutesFormat(markerConfig.walkingDistance)+ '</p>' : null;\n            markerConfig.entrance ? html+= '<p>' + markerConfig.entrance + '</p>' : null;\n            markerConfig.accessibility ? html+= '<p>' + markerConfig.accessibility + '</p>' : null;\n\n            // Build opening hours from arrays\n            if(markerConfig.openingHours.length > 0) {\n                let daySlot= []; // array for days which has unique opening hours\n                let timeSlot = []; // array for different time slots\n            \n                markerConfig.openingHours.forEach(function(item){\n                    let string = item.trim();\n                    let day = string.slice(0, 3);\n                    let hours = string.slice(3);\n\n                    let match;\n\n                    for (let i = 0; i < timeSlot.length; i++ ){\n\n                        // checks current days opening hours to see if it matches opening hours of an existing day already\n                        if (hours==timeSlot[i]) {\n                            daySlot[i] += ', '+ day;\n                            // remembers that it found a match\n                            match = 1;\n                        }\n                    }\n\n                    // if no mathes are found then 'hours' are pushed into array\n                    if(match!=1){\n                        daySlot.push(day);\n                        timeSlot.push(hours);\n                    }\n                })\n               \n                // Builds opening hours text\n                html +='<p>Opening hours: </br>';\n                for ( let i = 0; i < timeSlot.length; i++ ) {\n                    html += timeSlot[i] + ' (' + daySlot[i] + ')</br>';\n                }\n                html +='</p>';\n            \n            }\n\n            html+= '<p>';\n            markerConfig.tel ? html+= 'Tel: ' + markerConfig.tel + '</br>': null;\n            markerConfig.email ? html+= 'Email: ' + markerConfig.email + '</br>': null;\n            html+= '</p>';\n\n            // create google maps marker\n            marker = new google.maps.Marker({\n                map: markerConfig.map,\n                position: markerConfig.point,\n                icon: markerConfig.icon,\n                animation: google.maps.Animation.DROP,\n            });\n\n            // add a new property to the google maps marker object so we can id markers\n            marker.set('id', markerConfig.id);\n            //add a new property of inHtml to populate infoWindow\n            marker.set('infoHtml', html);\n\n            // attach event listener for marker click to handle infoWindow\n            google.maps.event.addListener(marker, 'click', function(e) {\n                //closure in a loop shizzle - I find this hard to get my head around - returning a closure seems to help\n                return updateHash(marker);\n            });\n\n            // create list element\n\n            listItem = createHTMLElement('li', [\n                { label: 'id', val: 'building-' + markerConfig.id },\n                { label: 'class', val: 'building' },\n            ]);\n\n            // create a element with click handler to open infoWindow\n\n            anchor = createHTMLElement('a', [\n                {\n                    label: 'html',\n                    val:\n                        '<span>'+markerConfig.name+'</span>',\n                },\n                { label: 'href', val: '#' },\n            ]);\n\n            anchor.addEventListener('click', function(e) {\n                e.preventDefault();\n\n                updateHash(\n                    e.target.parentElement.parentElement\n                        .getAttribute('id')\n                        .replace('building-', '')\n                );\n                // closes locations panel and any open accordions, clears search\n                toggleLocationPanel('true');\n                closeAccordions();\n                clearSearchString();\n\n                return false;\n            });\n\n            //add li item to accordion category ul\n            listId ? listId.appendChild(listItem).appendChild(anchor) : null;\n            return marker;\n        }; //end fn.createMarker\n\n        // Deletes all markers in the array by removing references to them\n        //commented out to keep JSLint happy as this function is not currently used\n        function deleteOverlays(markersArray) {\n            let i;\n\n            if (markersArray) {\n                for (i in markersArray) {\n                    if (typeof markersArray[i] !== 'function') {\n                        markersArray[i].setMap(null);\n                    }\n                }\n                markersArray.length = 0;\n            }\n        };\n\n        function findChildText(node, name) {\n            let value = '';\n\n            let children = node.getElementsByTagName(name);\n            let childrenLength = node.getElementsByTagName(name).length;\n\n            if (childrenLength > 0) {\n                value = children[0].textContent;\n            }\n            return value;\n        };\n        /**\n         * parses locations xml and creates markers\n         * @parameter {Object} xml: xml returned from Ajax request\n         * @parameter {String} textStatus: standard ajax reposnse\n         * @parameter {Object} textStatus: standard ajax reposnse\n         * @return {?}\n         */\n        function parseXml(xml) {\n            let items = xml.getElementsByTagName('item');\n\n            let index = 0,\n                $self,\n                marker,\n                markerConfig = {},\n                searchTags = [],\n                searchIds = {};\n                \n            Array.from(items).forEach(function(item) {\n                $self = item;\n                markerConfig.openingHours = [];\n\n                markerConfig.index = index + 1;\n                markerConfig.id = $self.getElementsByTagName('guid')[0].textContent;\n                markerConfig.name = $self.getElementsByTagName('title')[0].textContent;\n                markerConfig.linkHref = $self.getElementsByTagName('link')[0].textContent;\n                markerConfig.urlCustom = $self.getElementsByTagName('urlCustom')[0].textContent;\n                markerConfig.icon = '/?a=537733';// default city marker  \n                markerConfig.category = $self.getElementsByTagName('category')[0].textContent;\n                markerConfig.buildingPrefix = $self.getElementsByTagName('roomPrefix')[0].textContent;\n                markerConfig.roomNumber = $self.getElementsByTagName('roomNumber')[0].textContent;\n                markerConfig.entrance = $self.getElementsByTagName('entrance')[0].textContent;\n                markerConfig.floor = $self.getElementsByTagName('floor')[0].textContent;\n                markerConfig.building = $self.getElementsByTagName('building')[0].textContent;\n                markerConfig.buildingAdditionalInfo = $self.getElementsByTagName('buildingAdditionalInfo')[0].textContent;\n                markerConfig.campus = $self.getElementsByTagName('campus')[0].textContent;\n                markerConfig.street1 = $self.getElementsByTagName('street1')[0].textContent;\n                markerConfig.street2 = $self.getElementsByTagName('street2')[0].textContent;\n                markerConfig.city = $self.getElementsByTagName('city')[0].textContent;\n                markerConfig.postcode = $self.getElementsByTagName('postcode')[0].textContent;\n                markerConfig.country = $self.getElementsByTagName('country')[0].textContent;\n                markerConfig.tel = $self.getElementsByTagName('tel')[0].textContent;\n                markerConfig.email = $self.getElementsByTagName('email')[0].textContent;\n                markerConfig.accessibility = $self.getElementsByTagName('accessibility')[0].textContent;\n                markerConfig.walkingDistance = $self.getElementsByTagName('walkingDistance')[0].textContent;\n                markerConfig.supports = $self.getElementsByTagName('supports')[0].textContent;\n                markerConfig.geoLat = $self.getElementsByTagName('geoLat')[0].textContent;\n                markerConfig.geoLong = $self.getElementsByTagName('geoLong')[0].textContent;\n\n                $self.getElementsByTagName('ohMon')[0].textContent? markerConfig.openingHours.push('Mon'+$self.getElementsByTagName('ohMon')[0].textContent):null;\n                $self.getElementsByTagName('ohTue')[0].textContent? markerConfig.openingHours.push('Tue'+$self.getElementsByTagName('ohTue')[0].textContent):null;\n                $self.getElementsByTagName('ohWed')[0].textContent? markerConfig.openingHours.push('Wed'+$self.getElementsByTagName('ohWed')[0].textContent):null;\n                $self.getElementsByTagName('ohThu')[0].textContent? markerConfig.openingHours.push('Thu'+$self.getElementsByTagName('ohThu')[0].textContent):null;\n                $self.getElementsByTagName('ohFri')[0].textContent? markerConfig.openingHours.push('Fri'+$self.getElementsByTagName('ohFri')[0].textContent):null;\n                $self.getElementsByTagName('ohSat')[0].textContent? markerConfig.openingHours.push('Sat'+$self.getElementsByTagName('ohSat')[0].textContent):null;\n                $self.getElementsByTagName('ohSun')[0].textContent? markerConfig.openingHours.push('Sun'+$self.getElementsByTagName('ohSun')[0].textContent):null;\n                \n                markerConfig.point = new google.maps.LatLng(\n                    parseFloat(markerConfig.geoLat),\n                    parseFloat(markerConfig.geoLong)\n                );\n\n                //call createmarker fn\n                marker = createMarker(markerConfig);\n\n                if (markerConfig.category !== 'buildings') {\n                    //add returned marker to big array\n                    cityLayers.bigMarkersArray.push(marker);\n                } else {\n                    //add marker to buldings array\n                    cityLayers.bigBuildingsArray.push(marker);\n                }\n                //all markers go in here\n                cityLayers.buildingsObj[marker.id] = marker;\n        \n                searchTags.push(createHTMLElement('a', [\n                    {\n                        label: 'content',\n                        val: markerConfig.name,\n                    },\n                    {\n                        label: 'data-id',\n                        val: markerConfig.id,\n                    }]));\n\n                searchIds[markerConfig.name] = markerConfig.id;\n\n                //add returned marker to category array (if cat exisits)\n                if (cityLayers[markerConfig.category]) {\n                    cityLayers[markerConfig.category].markersArray.push(marker);\n                } else {\n                    //not needed for now\n                }\n            }); //end iteration\n\n            function searchBoxInit(){\n\n                // listens for search queries\n                searchBox.addEventListener('keyup', function(e) {\n\n                    // if key press down arrow\n                    if(e.keyCode== 40){\n                        searchItemFocus(e.keyCode);\n                    }\n\n                    else {\n                        // clears previous suggestions, and 'clear search button' if exists\n                        clearsSearchSuggestions(); \n                        searchSuggestions();\n                    }\n                });\n\n                function searchSuggestions (){\n                    clearsSearchSuggestions();\n                    let searchString = searchBox.value;\n                    // if a query is presesnt and finds a match it creates suggestions\n                    if(searchString.length > 0){\n                    \n                        // creates HTML structure for suggestion list\n                        let createListWrapper = createHTMLElement('div', [\n                            {\n                                label: 'class',\n                                val: 'query__suggestions__wrapper',\n                            }\n                        ]);\n            \n                        let createList = createHTMLElement('ul', [\n                            {\n                                label: 'id',\n                                val: 'query__suggestions',\n                            },\n                            {\n                                label: 'data-show',\n                                val: false,\n                            },\n                            {\n                                label: 'data-focus',\n                                val: -1,\n                            }\n                        ]);\n\n                        searchBox.parentElement.appendChild(createListWrapper).appendChild(createList);\n                        let list = document.getElementById('query__suggestions'); \n\n                        // adds search clear button\n                        let clearSearchButton = createHTMLElement('button', [\n                            {\n                                label: 'class',\n                                val: 'campus-map__controls__search__clear',\n                            },\n                            {\n                                label: 'html',\n                                val: '<span class=\"fad fa-fw fa-times-circle icon \"></span><span class=\"campus-map__controls__search__clear__text\">Clear query</span>',\n                            }\n                        ]);\n\n                        // adds click event to clear search button\n                        clearSearchButton.addEventListener('click', function(){\n                            clearSearchString();\n                        });\n                        \n                        searchBox.parentElement.appendChild(clearSearchButton); \n                        \n                        /**\n                         * creates list of anchors contaning building info below:\n                         * @tag {HTMLelement} anchor containing building name and id\n                         * @maxNumberSuggestions {viarable} to set max number of suggestions to show\n                         */\n\n                        let maxNumberSuggestions = 10;\n                        let counter = 0;\n\n                        // Cycles through all the locations to see if they match with the search string, \n                        // then builds a list containing the matches\n                        Array.from(searchTags).forEach(function(tag){\n                            if(tag.textContent.toLowerCase().indexOf(searchString.toLowerCase()) > -1 ){\n                                if (counter < maxNumberSuggestions){\n                                    let item = createHTMLElement('li', []);\n                                    let anchor = createHTMLElement('a', [\n                                        {\n                                            label: 'tabindex',\n                                            val: -1\n                                        },\n                                        {\n                                            label: 'data-id',\n                                            val: tag.getAttribute('data-id')\n                                        },\n                                        {\n                                            label: 'content',\n                                            val: tag.textContent\n                                        }\n                                    ]);\n\n                                    anchor.addEventListener('click',function(){\n                                        searchQueryIdFind(tag.getAttribute('data-id'), tag.textContent)\n                                        searchBox.value = tag.textContent;\n                                        updateHash(tag.getAttribute('data-id'));\n                                        \n                                    });\n\n                                    anchor.addEventListener('keyup',function(e){\n                                        e.preventDefault();\n                                        searchItemFocus(e.keyCode);\n                                    });\n                \n                                    list.appendChild(item).appendChild(anchor);\n                                    counter += 1;\n                                }\n                                list.setAttribute('data-show', true); \n                            }\n                        });       \n                    }\n\n                    else {\n                        clearSearchString();\n                    }       \n                };\n\n                // Handles searchbox focus behaviour\n                searchBox.addEventListener('focusin',function (){\n                    // closes all accordions and location dropdown\n                    toggleLocationPanel('true');\n                    closeAccordions();\n\n                    // check if there's a search string and then runs suggestions\n                    searchSuggestions();\n                });\n\n                /**\n                 * goes find marker and show on map\n                 * @id {string} string in number which is a unique identifier for each building i.e. 3252\n                 */\n\n                function searchQueryIdFind(id){\n                    document.getElementById('query__suggestions').setAttribute('data-show', false);\n                    hashChange(id);\n                };\n\n                /**\n                 * Handles navigating search suggestions by keyboard\n                 * @keyCode {number} keycode of keyboard key pressed\n                 */\n\n                function searchItemFocus(keyCode){\n\n                    let collectionNum = document.getElementById('query__suggestions').querySelectorAll('li').length;\n\n                    // Down arrow pressed\n                    if(keyCode== 40){\n                        let focusState = parseInt(document.getElementById('query__suggestions').getAttribute('data-focus'));\n                        \n                        if(focusState + 1 !==collectionNum){\n                            document.getElementById('query__suggestions').querySelectorAll('a')[focusState+1].focus();\n                            document.getElementById('query__suggestions').setAttribute('data-focus',focusState+1);\n                        }                \n                    }\n                    // Up arrow pressed\n                    else if (keyCode ==38){\n                        let focusState = parseInt(document.getElementById('query__suggestions').getAttribute('data-focus'));   \n                        \n                        if(focusState - 1 !== -1){\n                            document.getElementById('query__suggestions').querySelectorAll('a')[focusState-1].focus();\n                            document.getElementById('query__suggestions').setAttribute('data-focus',focusState-1);\n                        }\n\n                        else{\n                            searchBox.focus();\n                            document.getElementById('query__suggestions').setAttribute('data-focus',-1);\n                        }\n                    }\n                };\n            };\n\n            searchBoxInit();\n\n            //clear marker when infoWIndow closed\n            google.maps.event.addListener(infoWindow, 'closeclick', function() {\n                updateHash(infoWindow);\n            });\n\n            // map loading icon\n            mapContainer.classList.remove('loading');\n            Array.from(mapContainer.querySelectorAll('.loading-fa-icon')).forEach(function(i) {\n                    i.remove();\n                });\n\n            // Bind an event to window.onhashchange that, when the history state changes,\n            window.addEventListener('hashchange', hashChange);\n\n            // Since the event is only triggered when the hash changes, we need to trigger\n            // the event now, to handle the hash the page may have loaded with.\n   \n            hashChange(location.hash.replace('#', ''));\n        }; //end parse xml,\n        // Loads location data from 'dataSrc' -json containing location info\n        function loadXml() {\n    \n            let xhttp = new XMLHttpRequest();\n\n            xhttp.onreadystatechange = function() {\n                if (xhttp.readyState == 4 && xhttp.status === 200) {\n                    parseXml(xhttp.responseXML);\n                }\n            };\n            xhttp.open('GET', dataSrc, true);\n            xhttp.send(null);\n        };\n\n        /**\n         * Initialises the map, shows loading icon whilst doing so\n         * \n         */\n\n        function init() {\n            mapContainer.classList.add('loading');\n            mapContainer.appendChild(\n                createHTMLElement('i', [\n                    {\n                        label: 'class',\n                        val: 'fa fa-refresh fa-spin loading-fa-icon',\n                    },\n                ])\n            );\n\n            loadXml();\n        };\n\n        /**\n         * Toggles location panel open or close depending on it's status\n         * @status {string} being 'true' or 'false', passed from data-show attribute\n         */\n\n        function toggleLocationPanel(status){\n            if(status==='false'){\n                mapContainer.querySelector('.campus-map__controls__locations__heading').setAttribute('data-show',true);\n                mapContainer.querySelector('.campus-map__controls__locations').setAttribute('data-show',true);\n                mapContainer.querySelector('.campus-map__controls__locations').focus();\n\n                if(document.getElementById('query__suggestions')){\n                    document.getElementById('query__suggestions').setAttribute('data-show', false);  \n                }\n            }\n    \n            else{\n                mapContainer.querySelector('.campus-map__controls__locations__heading').setAttribute('data-show',false);\n                mapContainer.querySelector('.campus-map__controls__locations').setAttribute('data-show',false);\n            }\n        };\n\n        // location panel behaviour\n        mapContainer.querySelector('.campus-map__controls__locations__heading').addEventListener('click', function () {\n            let status = this.getAttribute('data-show');\n            toggleLocationPanel(status);\n        });\n\n        /**\n         * Accordion overrides - this closes location accordions, it also have an optional\n         * parameterater which closes all except the one. This would be when you want to close\n         * all except one being clicked on for example. This override was necessary \n         * as 6 individual accordions were used instead of 1 accordion having 6 sections,\n         * due to layout requirements\n         *\n         * @parameter {id} exception - id of accordion not to close\n         */\n\n        function closeAccordions(exception){\n            Array.from(mapContainer.getElementsByClassName('accordion--location')).forEach((el)=>{\n\n                if(el.getAttribute('id') !==exception){\n                    el.querySelector('.accordion__heading').setAttribute('data-open','false');\n                    el.querySelector('.accordion__heading button').setAttribute('aria-expanded','false');\n                    el.querySelector('.accordion__body').setAttribute('data-closed','true');\n                }\n            });\n        };\n\n        // adds click event to close all accordions apart one from being clicked\n        const locationAccordions = Array.from(mapContainer.getElementsByClassName('accordion--location')).forEach((el)=>{\n            el.addEventListener('click', function(){   \n                // capture which accordion clicked on and closes all others\n                closeAccordions(el.getAttribute('id'));\n            });  \n        });\n\n       /* */\n\n        /**\n         * Closes search suggestions and location dropdowns\n         * when clicking outside of them elements\n         */\n        document.addEventListener(\"click\", function(evt) {\n        \n            var mapControls =  document.getElementById('map-controls'),\n            targetElement = evt.target;  // clicked element\n    \n            do {\n                if (targetElement == mapControls) {\n                    // This is a click inside. Do nothing, just return.\n                    return;\n                }\n                // Go up the DOM\n                targetElement = targetElement.parentNode;\n            } while (targetElement);\n            \n            // This is a click outside\n            // closes location panel and location accorions, then clears / hides search suggestions\n            toggleLocationPanel('true');\n            closeAccordions(); \n            clearsSearchSuggestions();\n\n        });\n      \n        // Clears search string from location search\n        function clearSearchString(){\n            searchBox.value = '';\n            let clearSearch = document.querySelector('.campus-map__controls__search__clear');\n            let hideClearSearchButton = clearSearch? clearSearch.remove(): null;\n        }\n\n        // clears existing search suggestions\n        function clearsSearchSuggestions(){\n            let listWrapper = searchBox.parentElement.querySelector('.query__suggestions__wrapper');\n            let clearSearchButton = document.querySelector('.campus-map__controls__search__clear');\n                        \n            let hideListWrapper = listWrapper? searchBox.parentElement.querySelector('.query__suggestions__wrapper').remove() : null;\n            let hideClearSearchButton = clearSearchButton? clearSearchButton.remove(): null;                  \n        }\n        \n        \n        // On page load the northampton square campus is shown on the map as an overlay\n        // co-ordinates below draws the 'shape' of the campus overlay\n        var cityCampus = [\n            {lat: 51.527261, lng: -0.107649},\n            {lat: 51.527333, lng: -0.106411},\n            {lat: 51.527737, lng: -0.104968},\n            {lat: 51.527824, lng: -0.104421},\n            {lat: 51.528418, lng: -0.101159},\n            {lat: 51.527840, lng: -0.100794},\n            {lat: 51.527840, lng: -0.100794},\n            {lat: 51.527590, lng: -0.101888},\n            {lat: 51.527680, lng: -0.102484},\n            {lat: 51.527624, lng: -0.102693},\n            {lat: 51.527200, lng: -0.103048},\n            {lat: 51.526903, lng: -0.104104},\n            {lat: 51.527710, lng: -0.104635},\n            {lat: 51.526669, lng: -0.105284},\n            {lat: 51.527250, lng: -0.106421},\n            {lat: 51.526689, lng: -0.107671}\n        ];\n\n        // Optional - to show all markers in the buildingsArray on initial load\n        //showOverlays(cityLayers.bigBuildingsArray);\n\n        // loads northampton square campus map overlay on initial load\n        //or can be displayed using: initialMapOverlay.setMap(map);\n        var initialMapOverlay = new google.maps.Polygon({\n            map: map,\n            paths: cityCampus,\n            strokeColor: '#FF0000',\n            strokeOpacity: 0.8,\n            strokeWeight: 0,\n            fillColor: '#FF0000',\n            fillOpacity: 0.2,\n            geodesic: true\n        });\n\n    init();\n};\n\nexport default {\n    launchFn: createMap,\n    launchQuery: `.${className}`,\n};\n","import { checkIntersectionObserver } from '../../../util';\nimport Carousel from '../carousel-constructor';\n\nconst keyCodeTab = 9,\n    keyCodeEnter = 13;\n\nexport default class Defaultcarousel extends Carousel {\n    constructor(elem, options) {\n        super(elem, options);\n    }\n\n    inital() {\n        super.init();\n        let self = this;\n\n        let thumbnails = [].slice.call(\n            this.elem\n                .querySelector('.galleria-thumbnails-list')\n                .querySelectorAll('li')\n        );\n        //edge work around intersectionObserver not triggering using isIntersecting\n        let options = {\n                rootMargin: '0px',\n                threshold: [0, 1],\n            },\n            edge = document.documentElement.classList.contains('edge');\n\n        let edgeThumbnailsObserver = new IntersectionObserver(function (\n            entries\n        ) {\n            entries.forEach(function (entry) {\n                if (entry.intersectionRatio === 1) {\n                    entry.target.setAttribute('aria-hidden', 'false');\n                } else {\n                    entry.target.setAttribute('aria-hidden', 'true');\n                }\n            });\n        },\n        options);\n\n        let thumbnailsObserver = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entry) {\n                if (entry.isIntersecting) {\n                    entry.target.setAttribute('aria-hidden', 'false');\n                } else if (!entry.isIntersecting) {\n                    entry.target.setAttribute('aria-hidden', 'true');\n                }\n            });\n        });\n\n        thumbnails.forEach(function (e, i) {\n            if (i === 0) {\n                e.classList.add('active');\n            }\n            e.addEventListener(\n                'click',\n                function (t) {\n                    self.onClickThunbnail(t, i);\n                },\n                false\n            );\n            e.addEventListener(\n                'keyup',\n                function (e) {\n                    switch (e.keyCode) {\n                        case keyCodeEnter:\n                            self.onClickThunbnail(e, i);\n                            break;\n                        case keyCodeTab:\n                            self.translateThumbnails(i, e);\n                            break;\n                        default:\n                            break;\n                    }\n                },\n                false\n            );\n            e.setAttribute('aria-hidden', 'false');\n            if (checkIntersectionObserver && !edge) {\n                thumbnailsObserver.observe(e);\n            } else if (checkIntersectionObserver && edge) {\n                edgeThumbnailsObserver.observe(e);\n            }\n        });\n    }\n\n    /**\n     *\n     * Exported function for defualt caousel to preform when thumbnail it cliked on\n     * move slider forward or backwards\n     *\n     * @param {event} user event - onlcik event on thumbnail\n     * @param {number} thumbnail index -\n     */\n\n    onClickThunbnail(thumbnail, thumbindex) {\n        if (thumbindex > this.i) {\n            this.i = thumbindex;\n            this.next(thumbnail);\n        } else if (thumbindex < this.i) {\n            this.i = thumbindex;\n            this.previous(thumbnail);\n        }\n\n        this.activeThumbnail(thumbindex, thumbnail);\n    }\n\n    /**\n     *\n     * Set click on thumbnail to be active\n     *\n     * @param {number} thumbnail index -\n     * @param {event} user event - onlcik event on thumbnail\n     */\n\n    activeThumbnail(thumbindex, e) {\n        let thumbnail = this.checkEventType(e),\n            currentThumbnailSpan = document.createElement('span'),\n            listThumbnail = thumbnail\n                .querySelector('.galleria-thumbnails-list')\n                .getElementsByTagName('li');\n        currentThumbnailSpan.innerText = 'Current thumbnail';\n        currentThumbnailSpan.className =\n            'galleria-thumbnail__current-thumbnail';\n        for (const li of listThumbnail) {\n            li.classList.remove('active');\n            if (li.querySelector('.galleria-thumbnail__current-thumbnail')) {\n                li.querySelector(\n                    '.galleria-thumbnail__current-thumbnail'\n                ).remove();\n            }\n        }\n\n        /*slider === 1\n\t        ? listThumbnail[thumbindex + 3].classList.add('fade')\n\t        : slider > lastTwoSlider\n\t        ? null\n\t        : listThumbnail[thumbindex + 2].classList.add('fade');*/\n\n        listThumbnail[thumbindex].classList.add('active');\n        listThumbnail[thumbindex].appendChild(currentThumbnailSpan);\n        this.translateThumbnails(thumbindex, e);\n    }\n\n    /**\n     *\n     * Move thumbnail\n     *\n     * @param {number} thumbnail index -\n     * @param {event} user event - onlcik event on thumbnail\n     */\n\n    translateThumbnails(thumbindex, e) {\n        let thumbnailLi = this.checkEventType(e).querySelector(\n                '.galleria-thumbnails-list'\n            ),\n            thumbnailLength = thumbnailLi.getElementsByTagName('li').length,\n            translate = 0;\n\n        if (thumbindex !== 0 && thumbnailLength > 4) {\n            let galleria = thumbnailLi.getElementsByTagName('li');\n            Array.from(galleria).forEach((e, i) => {\n                if (i < thumbindex - 1) {\n                    let style = window.getComputedStyle\n                        ? getComputedStyle(e, null)\n                        : e.currentStyle;\n                    let width =\n                        parseInt(style.width) + parseInt(style.marginRight);\n                    translate += width;\n                }\n            });\n            if (thumbindex >= 2) {\n                thumbnailLi.style.setProperty(\n                    'transform',\n                    'translate(-' + translate + 'px)'\n                );\n            } else {\n                thumbnailLi.style.setProperty('transform', 'translate(0px)');\n            }\n        }\n    }\n}\n","import Defaultcarousel from './default-carousel-constructor';\n\nconst className = 'carousel-gallery';\n\n/**\n *\n * Init the defualt gallery\n *\n *\n *\n * HTML e.g.\n *\n *  <div class=\"carousel-gallery-default\">\n *      <div class=\"carousel-gallery\">\n *          <h3>Gallery title</h3>\n *          <ul class=\"swiper-wrapper\">\n *              <li class=\"swiper-slide\">\n *                  <div class=\"swiper-slide__image-wrapper\">\n *                      <img src=\"centre-healthcare-innovation-research.jpg\" alt=\"Banner depicting \">\n *                  </div>\n *              </li>\n *              <li class=\"swiper-slide\">\n *                  <div class=\"swiper-slide__image-wrapper\">\n *                      <img class=\"lazy\" src=\"centre-healthcare-innovation-research.jpg\" alt=\"Banner depicting \">\n *                  </div>\n *              </li>\n *              <li class=\"swiper-slide\">\n *                  <div class=\"swiper-slide__image-wrapper\">\n *                      <img class=\"lazy\" src=\"centre-healthcare-innovation-research.jpg\" alt=\"Banner depicting \">\n *                      <noscript>\n *                          <img class=\"lazy\" src=\"https://web2020.city.ac.uk/__data/assets/image/0019/341236/Phonetics-lab.jpg\" alt=\"Woman using the phonetics lab\">\n *                      </noscript>\n *                  </div>\n *              </li>\n *          </ul>\n *          <div class=\"galleria-thumbnails-wrap\">\n *              <ul class=\"galleria-thumbnails-list\">\n *                  <li class=\"galleria-thumbnail\">\n *                      <img src=\"big_thumbnail.jpg\" alt=\"Banner depicting \"/>\n *                  </li>\n *                  <li class=\"galleria-thumbnail\">\n *                      <img src=\"big_thumbnail.jpg\" alt=\"Banner depicting \"/>\n *                  </li>\n *                  <li class=\"galleria-thumbnail\">\n *                      <img src=\"big_thumbnail.jpg\" alt=\"Banner depicting \"/>\n *                  </li>\n *              </ul>\n *          </div>\n *      </div>\n *  </div>\n *\n * @param {HTMLElement} elem - The element to carousel.\n */\n\nfunction carouselGallery(elem) {\n    let dc = new Defaultcarousel(elem, {\n        defaultCarousel: true,\n        hidNumInd: true,\n    });\n    dc.inital();\n}\n\nexport default {\n    launchFn: carouselGallery,\n    launchQuery: `.${className}`,\n};\n","/**\n * Image transition\n *\n * @module paint-layouts/case-study-transition-effects/banner-image\n * @author Walter Reyneke <walter.reyneke@city.ac.uk>\n * @copyright City, University of London 2019!\n */\n\nimport { isMobile } from '../../../util';\n\nconst className = 'image-expand';\n\nfunction imageExpand(image) {\n    if (!isMobile()) {\n        const viewPortHeight = window.innerHeight; // calculates viewport height\n\n        image.classList.add('image-expand--start');\n\n        window.addEventListener('scroll', function () {\n            const elemOffset = image.offsetTop;\n            const screenPos = window.pageYOffset; // calculates scroll position\n\n            if (\n                screenPos > elemOffset - viewPortHeight + 100 &&\n                !image.className.includes('image-expand--complete')\n            ) {\n                image.classList.add('image-expand--complete');\n            }\n        });\n    }\n}\n\nexport default {\n    launchFn: imageExpand,\n    launchQuery: `.${className}`,\n};\n","/**\n *\n * actionOnScroll use the IntersectionObserver API to check if element is intersceting\n *\n * @param {HTMLElement} element - element to observer\n * @param {Action} Function/String - To either excute provided function on element or add the string as a class name\n * @param {Boolean} defualt false - pass true if you want the function to run every time element is Intersecting\n * @param {Object} Object - Pass options to customise IntersectionObserver see docs\n */\nexport function actionOnScroll(\n    element,\n    action,\n    repeat = false,\n    options = { threshold: [0, 0.1, 1] }\n) {\n    if (element && typeof element !== 'undefined' && element !== null) {\n        let actionOnScrollAction = function(entries) {\n            entries.forEach(entry => {\n                //what to do with element depending on action type\n                if (entry.isIntersecting) {\n                    if (typeof action === 'string') {\n                        element.classList.add(action);\n                    } else if (typeof action === 'function') {\n                        action(element);\n                    }\n                    // stop observing if repeat === false\n                    if (repeat === false) {\n                        observer.unobserve(element);\n                    }\n                }\n            });\n        };\n        //intialise observer and observer element\n        let observer = new IntersectionObserver(actionOnScrollAction, options);\n        observer.observe(element);\n    }\n}\n","/**\n * Paginated list\n *\n * @module patterns/paginated-list/paginated-list\n * @author Web Development\n * @copyright City, University of London 2018\n */\nimport { pageClassName, addPagination } from '../pagination/pagination.js';\nimport { removeClass } from '../../util';\nimport aria from '../../aria-attributes.js';\n\nconst className = 'paginated-list',\n    minimumPage = 1,\n    defaultPage = 8,\n    maximumPage = 12;\n\n/**\n * Ensure the page size is within the defined range.\n *\n * @param {number} pageSizeSetting - The user-requested page size.\n * @returns {number} The validated page size.\n */\nfunction setPageSize(pageSizeSetting) {\n    if (pageSizeSetting < minimumPage) {\n        return minimumPage;\n    } else if (pageSizeSetting > maximumPage) {\n        return maximumPage;\n    } else {\n        return pageSizeSetting;\n    }\n}\n\n/**\n * Transform an (un)ordered list into a paginated list, preserving the numbering\n * of the original if set.\n *\n * If the element is not a list or there are too few items to paginate, clean\n * up the DOM and return without paginating.\n *\n * @param {HTMLUListElement|HTMLOListElement} list - An (un)ordered list element with the paginated-list class.\n */\nfunction launchPaginatedList(list) {\n    if (!(list.tagName === 'UL' || list.tagName === 'OL')) {\n        /**\n         * not a list, remove the classname\n         * to avoid conflicting styles then bail\n         */\n        removeClass(list, className, false);\n        return;\n    }\n\n    const pageSizeSetting = Number.parseInt(list.dataset.pagesize)\n            ? Number.parseInt(list.dataset.pagesize)\n            : defaultPage,\n        listItems = Array.from(list.children),\n        pageSize = setPageSize(pageSizeSetting);\n\n    if (listItems.length <= pageSize) {\n        /**\n         * list too short, doesnt need pagination.\n         * remove the classname to avoid conflicting\n         * styles then bail\n         */\n        removeClass(list, className, false);\n        return;\n    }\n\n    const pages = [],\n        /** ordered lists can be reversed.\n         * if the original was reversed,\n         * all our sub-lists must be too\n         */\n        reversed =\n            list.tagName === 'OL' && list.hasAttribute('reversed')\n                ? true\n                : false,\n        /**\n         * the start attribute may be set,\n         * if not the start is either 1\n         * or the list length (if reversed)\n         */\n        start =\n            list.tagName === 'OL' && list.hasAttribute('start')\n                ? Number.parseInt(list.hasAttribute('start'))\n                : reversed\n                ? listItems.length\n                : 1;\n\n    list.setAttribute('role', 'presentation');\n\n    let pageNumber = 0,\n        pageItems = listItems.slice(0, pageSize);\n\n    /* loop through items while we can still make a page */\n    while (pageItems.length > 0) {\n        const page = document.createElement('li'),\n            newList =\n                list.tagName === 'UL'\n                    ? document.createElement('ul')\n                    : document.createElement('ol');\n\n        /**\n         * set start attribute and keep reversed attribute\n         * on ordered lists\n         */\n        if (list.tagName === 'OL') {\n            if (!reversed) {\n                newList.setAttribute('start', pageSize * pageNumber + start);\n            } else {\n                newList.setAttribute('start', start - pageSize * pageNumber);\n                newList.setAttribute('reversed', 'true');\n            }\n        }\n\n        /* move this page of items into the page and inner list */\n        pageItems.forEach((listItem) => newList.appendChild(listItem));\n        page.appendChild(newList);\n        page.className = pageClassName;\n        page.setAttribute('tabindex', -1);\n        page.setAttribute(aria.label, `Page ${pageNumber + 1}`);\n        pages.push(page);\n\n        /* try to fetch another page */\n        ++pageNumber;\n        pageItems = listItems.slice(\n            pageSize * pageNumber,\n            pageSize * pageNumber + pageSize\n        );\n    }\n\n    /* add the pages to the original list in bulk */\n    pages.forEach((page) => list.appendChild(page));\n    addPagination(list, listItems.length);\n}\n\nexport default {\n    launchFn: launchPaginatedList,\n    launchQuery: `.${className}`,\n};\n","/**\n * Back To Top Link Scroll\n *\n * @module patterns/animation/particle\n * @author Walter Reyneke <walter.reyneke@city.ac.uk>\n * @copyright City, University of London 2019\n */\nimport '../../../../node_modules/particles.js/particles.js';\n\n/**\n * This pattern loads the particle.js NMP module. The function below executes the animation with given parameters below.\n * For full documentation please refer to https://github.com/VincentGarreau/particles.js\n * The function applies the particle animation to a div with the ID 'particles-js'.\n */\n\nconst className = 'particle-animation';\n\nfunction initParticles() {\n    particlesJS('particles-js', {\n        particles: {\n            number: {\n                value: 80,\n            },\n            color: {\n                value: '#e5e5e5',\n            },\n            shape: {\n                type: 'circle',\n                stroke: {\n                    width: 0,\n                    color: '#000000',\n                },\n                polygon: {\n                    nb_sides: 5,\n                },\n                image: {\n                    src: 'img/github.svg',\n                    width: 100,\n                    height: 100,\n                },\n            },\n            opacity: {\n                value: 0.8,\n                random: false,\n                anim: {\n                    enable: false,\n                    speed: 1,\n                    opacity_min: 0.4,\n                    sync: false,\n                },\n            },\n            size: {\n                value: 7,\n                random: true,\n                anim: {\n                    enable: false,\n                    speed: 40,\n                    size_min: 3,\n                    sync: false,\n                },\n            },\n            line_linked: {\n                enable: true,\n                distance: 150,\n                color: '#e5e5e5',\n                opacity: 0.9,\n                width: 2,\n            },\n            move: {\n                enable: true,\n                speed: 1,\n                direction: 'none',\n                random: false,\n                straight: false,\n                out_mode: 'out',\n                bounce: false,\n                attract: {\n                    enable: false,\n                    rotateX: 600,\n                    rotateY: 1200,\n                },\n            },\n        },\n        interactivity: {\n            detect_on: 'canvas',\n            events: {\n                onhover: {\n                    enable: true,\n                    mode: 'grab',\n                },\n                onclick: {\n                    enable: true,\n                    mode: 'push',\n                },\n                resize: true,\n            },\n            modes: {\n                grab: {\n                    distance: 140,\n                    line_linked: {\n                        opacity: 1,\n                    },\n                },\n                bubble: {\n                    distance: 400,\n                    size: 40,\n                    duration: 2,\n                    opacity: 8,\n                    speed: 3,\n                },\n                repulse: {\n                    distance: 200,\n                    duration: 0.4,\n                },\n                push: {\n                    particles_nb: 4,\n                },\n                remove: {\n                    particles_nb: 2,\n                },\n            },\n        },\n        retina_detect: true,\n    });\n}\n\nexport default {\n    launchFn: initParticles,\n    launchQuery: `.${className}`,\n};","/**\n * Research apply CTA (no modal)\n *\n * @module patterns/accordion/accordion\n * @author Web Development\n * @copyright City, University of London 2020\n */\n\nconst className = 'cta-block__cta--no-modal';\n\n/**\n * Disables modal behaviour on research degree apply CTA where one date exists\n * for a method of study and modal of multiple start dates is not required. Pass\n * relevant URL path to CTA so it behaves as a standard anchor.\n *\n * @param {HTMLElement} cta - A standard research apply CTA (no modal).\n */\nfunction launchResearchApplyCta(cta) {\n    let applyAnchor = cta.querySelector('.cta-block__cta__path'),\n        applyAnchorHref = applyAnchor.getAttribute('href'),\n        applyCta = cta.querySelector('.research-apply-link');\n\n    applyCta.setAttribute('href', applyAnchorHref);\n\n    // Remove duplicate anchor, as href is now placed on apply CTA\n    applyAnchor.remove();\n}\n\nexport default {\n    launchFn: launchResearchApplyCta,\n    launchQuery: `.${className}`,\n};\n","/**\n * Secondary navigation\n *\n * @module patterns/navigation/navigation-secondary\n * @author Web Development\n * @copyright City, University of London 2019\n */\nimport {\n    prepareNavigation,\n    listenForNavigationToggles,\n} from '../menu/menu-formatters';\n\nconst className = 'navigation',\n    classNameSpecific = className + '--secondary';\n\n/**\n * Transform the Matrix-generated navigation lists into an interactive menu.\n *\n * @param {HTMLElement} navigation - The secondary navigation element.\n */\nfunction launchSecondaryNavigation(navigation) {\n    // During testing only: remove 'under construction' indicators globally\n//     navigation.innerHTML = navigation.innerHTML\n//         .replace(/\\(\\( /g, '')\n//         .replace(/ \\)\\)/g, '');\n\n    prepareNavigation(navigation, className);\n    listenForNavigationToggles(navigation, className);\n}\n\nexport default {\n    launchFn: launchSecondaryNavigation,\n    launchQuery: `.${classNameSpecific}`,\n};\n","/**\n * SVG path animation\n *\n * @module patterns/animation/svg path\n * @author adapted by Walter Reyneke <walter.reyneke@city.ac.uk> from CASS polaris\n * @copyright City, University of London 2019!\n */\n\nconst className = 'animate-svg';\n\n/**\n * This animation targets SVG paths. When in scrolling distance the path will animated from a starting position of zero till the full length of the path is shown.\n *\n * @param {class} animateSvg - Selects a parent class which will contain the paths targetted for animation\n *\n */\n\nfunction initSvgPathAnimation(animateSvg) {\n    const viewPortHeight = window.innerHeight; // calculates viewport height\n\n    window.addEventListener('DOMContentLoaded', () => {\n        var paths = animateSvg.querySelectorAll('.animate--svg-path');\n\n        // prepares the animation\n        paths.forEach((path) => {\n            let length = path.getTotalLength() + 'px';\n            path.classList.add('animate--svg-path--jsinit');\n\n            path.style.strokeDashoffset = length;\n            path.style.strokeDasharray = `${length}, ${length}`;\n        });\n\n        // starts animation when in scrolling view\n        window.addEventListener('scroll', function () {\n            const elemOffset = animateSvg.offsetTop;\n            const screenPos = window.pageYOffset; // calculates scroll position\n\n            if (screenPos > elemOffset - viewPortHeight + 30) {\n                paths.forEach(function (path) {\n                    !path.classList.contains('animate--svg-path--jsrun')\n                        ? path.classList.add('animate--svg-path--jsrun')\n                        : null;\n                    setTimeout(() => {\n                        path.style.strokeDashoffset = 0;\n                    }, 100);\n                });\n            }\n        });\n    });\n}\n\nexport default {\n    launchFn: initSvgPathAnimation,\n    launchQuery: `.${className}`,\n};\n","/**\n * Pattern library\n *\n * Exports an array of patterns to execute on startup.\n *\n * @module patterns\n * @author Web Development\n * @copyright City, University of London 2018\n */\nimport accordion from './patterns/accordion/accordion';\nimport backToTop from './patterns/back-to-top/back-to-top';\nimport carousel from './patterns/image-carousel/image-carousel';\nimport chartBarHorizontal from './patterns/charts/charts';\nimport cmsEditorWarning from './patterns/cms-editor-warning/cms-editor-warning';\nimport contentFadeIn from './patterns/animation/content-fade-in/content-fade-in';\nimport contentSeparator from './patterns/animation/content-separator/content-separator';\nimport contentSlideUp from './patterns/animation/content-slide-up/content-slide-up';\nimport dropdownFilter from './patterns/dropdown-filter/dropdown-filter';\nimport eventForm from './patterns/event-form/event-form';\nimport feedback from './patterns/feedback/feedback';\nimport findUs from './patterns/find-us/find-us';\nimport gallery from './patterns/image-carousel/default-carousel/default-carousel';\nimport imageExpand from './patterns/animation/image-expand/image-expand';\nimport keyInformation from './patterns/key-information/key-information--lifelong-learning';\nimport linkFinder from './patterns/link-finder/link-finder';\nimport menu from './patterns/menu/menu';\nimport modal from './patterns/modal/modal';\nimport numberAnimation from './patterns/animation/number-animation/number-animation';\nimport paginatedList from './patterns/paginated-list/paginated-list';\nimport pagination from './patterns/pagination/pagination';\nimport particle from './patterns/animation/particle/particle';\nimport primaryNavigation from './patterns/navigation/navigation-primary';\nimport researchApplyCta from './how-to-apply--research';\nimport secondaryNavigation from './patterns/navigation/navigation-secondary';\nimport showMore from './patterns/show-more/show-more';\nimport slider from './patterns/slider/slider';\nimport svgPathAnimation from './patterns/animation/svg-path-animation/svg-path-animation';\nimport tabs from './patterns/tabs/tabs';\nimport tooltipImageCredit from './patterns/tooltip/image-credit/image-credit';\nimport tooltipSocialShare from './patterns/tooltip/social-share/social-share';\nimport video from './patterns/video/video';\n\nexport default [\n    accordion,\n    chartBarHorizontal,\n    cmsEditorWarning,\n    feedback,\n    menu,\n    primaryNavigation,\n    secondaryNavigation,\n    paginatedList,\n    pagination,\n    tabs,\n    linkFinder,\n    contentSeparator,\n    imageExpand,\n    contentFadeIn,\n    contentSlideUp,\n    eventForm,\n    modal,\n    slider,\n    carousel,\n    keyInformation,\n    numberAnimation,\n    showMore,\n    gallery,\n    svgPathAnimation,\n    backToTop,\n    dropdownFilter,\n    findUs,\n    tooltipImageCredit,\n    tooltipSocialShare,\n    researchApplyCta,\n    particle,\n    video,\n];\n","const className = 'fa-link';\n\nfunction copyIconToClipboard(elem) {\n    const copy = elem;\n    copy.parentNode.parentNode.style.position = 'relative';\n    copy.addEventListener('mouseover', (e) => {\n        let t = document.createElement('div');\n        let link = document.createElement('span');\n        let url = window.location.href;\n        t.className = 'tooltip';\n        link.className = 'link-copy';\n        let textlink = document.createTextNode(url);\n        let textnode = document.createTextNode('Copy link');\n        t.appendChild(textnode);\n        link.appendChild(textlink);\n        t.appendChild(link);\n        e.target.parentElement.parentElement.appendChild(t);\n        e.target.parentElement.parentElement.classList.add('copyLink');\n    });\n\n    copy.addEventListener('click', (e) => {\n        e.preventDefault();\n        let text = e.target.parentElement.parentElement.querySelector(\n            '.link-copy'\n        );\n        let range = document.createRange();\n        range.selectNode(text);\n        window.getSelection().addRange(range);\n        try {\n            // Now that we've selected the anchor text, execute the copy command\n            let successful = document.execCommand('copy');\n            let msg = successful ? 'successful' : 'unsuccessful';\n            e.target.parentElement.parentElement.querySelector(\n                '.tooltip'\n            ).textContent = 'Link Copied';\n            e.target.parentElement.parentElement\n                .querySelector('.tooltip')\n                .classList.add(msg);\n        } catch (err) {\n            throw new Error(e);\n        }\n\n        // Remove the selections - NOTE: Should use\n        // removeRange(range) when it is supported\n        window.getSelection().removeAllRanges();\n    });\n\n    copy.addEventListener('mouseout', (e) => {\n        //remove element from mouseover\n        e.target.parentElement.parentElement.querySelector('.tooltip').remove();\n    });\n}\n\nexport default {\n    launchFn: copyIconToClipboard,\n    launchQuery: `.${className}`,\n};\n","/**\n * prepareAccordionTabs\n *\n * @module patterns/tabs/prepareAccordionTabs\n * @author Web Development\n * @copyright City, University of London 2019\n */\nimport aria from '../../aria-attributes';\nimport { appendAll } from '../../util';\n\nconst className = 'tabs',\n    panelClassName = className + '__panel',\n    linksClassName = className + '__links';\n\n/**\n * Add accordion functionality for mobile.\n *\n * @param {HTMLElement} tabs - An element transformed into a tabbed section\n */\nfunction accordionize(tabs) {\n    const wrapper = document.createElement('div'),\n        accordion = document.createElement('div');\n\n    wrapper.className = 'tabs--accordion';\n    accordion.className = 'accordion';\n    accordion.id = `accordion${tabs.dataset.assetid}`;\n    accordion.dataset.allowsingle = 'false';\n    accordion.dataset.defaultopen = 'true';\n    accordion.dataset.level = tabs.dataset.level;\n    accordion.dataset.tabs = tabs.dataset.tabs;\n    accordion.dataset.toggleopen = 'true';\n\n    Array.from(\n        tabs.parentNode.querySelectorAll(`#${tabs.id} > .${panelClassName}`)\n    ).forEach((panel) => {\n        const heading = panel.querySelector(`.${panelClassName}__heading`),\n            body = panel.querySelector(`.${panelClassName}__body`),\n            accordionHeading = document.createElement(\n                `h${accordion.dataset.level}`\n            ),\n            accordionSection = document.createElement('div'),\n            accordionWrapper = document.createElement('div');\n\n        accordionHeading.className = 'accordion__heading';\n        accordionHeading.id = `accordion${tabs.dataset.assetid}-header${panel.dataset.assetid}`;\n        accordionHeading.dataset.tabid = panel.getAttribute(aria.labelledBy);\n        accordionHeading.innerText = heading.innerText.trim();\n\n        accordionSection.className = 'accordion__body';\n        accordionSection.id = `accordion${tabs.dataset.assetid}-body${panel.dataset.assetid}`;\n        accordionWrapper.className = 'wrapper--accordion__body__content';\n        accordionWrapper.innerHTML = body.innerHTML;\n        accordionSection.appendChild(accordionWrapper);\n\n        appendAll(accordion, [accordionHeading, accordionSection]);\n    });\n\n    tabs.parentNode.insertBefore(wrapper, tabs);\n    wrapper.appendChild(tabs);\n    wrapper.appendChild(accordion);\n\n    return accordion;\n}\n\nfunction prepareAccordionTabs(tabs) {\n    const controls = tabs.querySelector(`.${linksClassName}`),\n        linkItems = Array.from(controls.querySelectorAll('li')),\n        numberOfTabs = Number.parseInt(tabs.dataset.mobiletabs);\n\n    if (\n        linkItems.length > numberOfTabs &&\n        (!tabs.dataset.neveraccordion ||\n            !tabs.dataset.neveraccordion === 'true')\n    ) {\n        return accordionize(tabs);\n    } else {\n        return null;\n    }\n}\n\nexport default prepareAccordionTabs;\n"],"sourceRoot":""}