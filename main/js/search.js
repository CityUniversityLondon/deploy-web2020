!function(e){function t(t){for(var n,r,l=t[0],i=t[1],o=t[2],d=0,m=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&m.push(c[r][0]),c[r]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(u&&u(t);m.length;)m.shift()();return s.push.apply(s,o||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a,r=s[t],l=!0,i=1;i<r.length;i++)a=r[i],0!==c[a]&&(l=!1);l&&(s.splice(t--,1),e=n(n.s=r[0]))}return e}function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var r={},c={8:0},s=[];n.m=e,n.c=r,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var l=window.webpackJsonp=window.webpackJsonp||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var o=0;o<l.length;o++)t(l[o]);var u=i;s.push([217,1,0,3,2,4]),a()}({121:function(){},122:function(){},14:function(e,t,a){"use strict";function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t,a=1;a<arguments.length;a++)t=null==arguments[a]?{}:arguments[a],a%2?n(Object(t),!0).forEach((function(a){c(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}));return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t,a,n,c,s,l){const i={};t.forEach(e=>{i["meta_".concat(e.meta,"_sand")]=e.value});const o={};Object.keys(l).forEach(e=>o["meta_".concat(e,"_sand")]=l[e]);const u=d.a.CancelToken.source(),m={baseURL:h,cancelToken:u.token,httpsAgent:new f.a.Agent({keepAlive:!0}),url:_,timeout:g,params:r(r(r({},i),o),{},{collection:e,num_ranks:s,query:a,sort:n||"",start_rank:c})};return[Object(p.b)(m),u]}function l(e,t){const a=d.a.CancelToken.source(),n={baseURL:h,cancelToken:a.token,url:b,timeout:g,params:{collection:e,partial_query:t,show:y}};return[Object(p.b)(n),a]}function i(e){return Object(p.b)({timeout:g,url:e})}a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return i}));var o=a(3),u=(a.n(o),a(8)),d=a.n(u),m=a(56),f=a.n(m),p=a(2);const h="https://web2020.city.ac.uk/web-services",_="/funnelback-find",b="/funnelback-suggest",y=100,g=3e4},2:function(e,t,a){"use strict";function n(e){return!("true"!==e)}function r(e,t,a){const n=a?x(t):T(t);e.className=e.className.split(/\s+/).filter(e=>n(e)).join(" ")}function c(){return!!window.matchMedia("(prefers-reduced-motion: reduce)").matches}function s(e){return!(0===e.offsetHeight||0===e.offsetWidth)}function l(e){return!!(0<=e.getBoundingClientRect().top&&e.getBoundingClientRect().top<=window.innerHeight)}function i(e){const t={};return e.substr(1).split("&").forEach(e=>{const[a,n]=e.split("=");t[a]=n}),t}function o(e){if(0<Object.keys(e).length){let t="?";for(const a in e)1!==t.length&&(t+="&"),t+=a+"="+e[a];return t}return""}function u(e,t,a,n,r,c){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:e,eventCategory:t,eventAction:a,eventLabel:n,eventValue:r,nonInteractionHit:c})}function d(e,t){t.forEach(t=>e.appendChild(t))}function m(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:432;const t=window.innerWidth;if(t<e)return!0}function f(e){let t=[];for(let a=e.length>>>0;a--;)t[a]=e[a];return t}function p(){const e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){let t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}const a=e.indexOf("Edge/");return!!(0<a)&&parseInt(e.substring(a+5,e.indexOf(".",a)),10)}function h(){return!!("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)}function _(e,t){let a=document.createElement(e);return t.map((function(e){"content"===e.label?a.appendChild(document.createTextNode(e.val)):a.setAttribute(e.label,e.val)})),a}function b(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function y(e){return S()(e).then(e=>{if(200===e.status)return e.data;throw"Bad response: ".concat(e.status)}).catch(e=>{S.a.isCancel(e)||u("jsError","JavaScript error","Line ".concat(e.lineNumber," â€“ ").concat(e.message),"axiosRequest ".concat(e.fileName," (").concat(window.location,")"),!0)})}function g(e){return C.a.createElement("time",{dateTime:e.toISOString().split("T")[0]},["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getUTCDay()],", ",e.getUTCDate(),C.a.createElement("sup",null,function(e){const t=e.toString().slice(-1);return e>=11||e<=13?"th":"1"===t?"st":"2"===t?"nd":"3"===t?"rd":"th"}(e.getUTCDate()))," ",["January","February","March","April","May","June","July","August","September","October","November","December"][e.getUTCMonth()]," ",e.getUTCFullYear())}a.d(t,"o",(function(){return n})),a.d(t,"m",(function(){return r})),a.d(t,"l",(function(){return c})),a.d(t,"i",(function(){return s})),a.d(t,"q",(function(){return l})),a.d(t,"k",(function(){return i})),a.d(t,"j",(function(){return o})),a.d(t,"g",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"n",(function(){return f})),a.d(t,"e",(function(){return p})),a.d(t,"c",(function(){return h})),a.d(t,"d",(function(){return _})),a.d(t,"p",(function(){return b})),a.d(t,"b",(function(){return y})),a.d(t,"f",(function(){return g}));var E=a(7),v=(a.n(E),a(17)),w=(a.n(v),a(24)),O=(a.n(w),a(11)),j=(a.n(O),a(3)),N=(a.n(j),a(12)),q=(a.n(N),a(8)),S=a.n(q),k=a(0),C=a.n(k);const x=e=>t=>0>t.indexOf(e),T=e=>t=>t!==e},217:function(e,t,a){e.exports=a(221)},221:function(e,t,a){"use strict";function n(){return d.a.createElement("form",{className:"search-form",onSubmit:e=>{e.preventDefault()}},d.a.createElement("fieldset",{className:"search-form__query"},d.a.createElement("div",null,d.a.createElement("div",{className:"search__query__input"},d.a.createElement("div",{className:"search__query__icon--wrapper"},d.a.createElement("span",{className:"search__icon fal fa-search icon","aria-hidden":"true"})),d.a.createElement("label",{className:"sr-only",htmlFor:"search__query"},"Search courses"),d.a.createElement("input",{autoComplete:"off",id:"search__query",name:"query",placeholder:"e.g. economics",type:"text",value:""})),d.a.createElement("button",{type:"submit",className:"search__query__submit"},d.a.createElement("span",{className:"fal fa-search search__query__submit__icon","aria-hidden":"true"})," ",d.a.createElement("span",{className:"search__query__submit__text"},"Search")))))}function r(e){return d.a.createElement("button",{className:"search--inline__clear",type:"button",onClick:()=>{e.clear()}},d.a.createElement("span",{className:"fad fa-fw fa-times-circle icon "}),d.a.createElement("span",{className:"search--inline__clear__text"},"Clear query"))}function c(e){const[t,a]=Object(u.useState)(e.query.query),[n]=Object(u.useState)("search--inline--"+e.query.collection+"--"+Math.random().toString(16).slice(-4));Object(u.useEffect)(()=>{a(e.query.query)},[e.query.query,e.updating]);let r=null;const c=()=>{a(""),r.focus();const t=e.query;t.query="",t.startRank=1,e.update.query(t),e.update.results(!e.update.updateState)},s=t=>{const a=e.query;a.query=t,a.startRank=1,e.update.query(a),e.update.results(!e.update.updateState)},l=t&&d.a.createElement(y,{clear:()=>{c()}}),i=d.a.createElement("div",{className:"search--inline__query__input"},d.a.createElement("div",{className:"search--inline__query__icon--wrapper"},d.a.createElement("span",{className:"search--inline__icon fal fa-search icon","aria-hidden":"true"})),d.a.createElement("label",{className:"sr-only",htmlFor:n},"Search"),d.a.createElement("input",{autoComplete:"off",id:n,name:"query",placeholder:e.config.placeholder,ref:e=>{r=e},type:"text",required:!0,value:t,onKeyDown:e=>{switch(e.key){case g:c()}},onChange:e=>{a(e.target.value),s(e.target.value)}}),l);return d.a.createElement("fieldset",{className:"search--inline__query"},d.a.createElement("div",null,i,d.a.createElement("button",{type:"submit",className:"search--inline__query__submit"},d.a.createElement("span",{className:"search--inline__query__submit__content"},d.a.createElement("span",{className:"fas fa-search search--inline__query__submit__icon","aria-hidden":"true"})," ",d.a.createElement("span",{className:"search--inline__query__submit__text"},"Search")))))}function s(e){return d.a.createElement("div",{className:"search--inline__suggestions"},d.a.createElement("h3",null,"Suggestions"),d.a.createElement("ul",null,e.suggestions.map((t,a)=>{const n=t.replace(/\s+/g,"+"),r=function(e,t){return d.a.createElement(d.a.Fragment,null,d.a.createElement("span",null,d.a.createElement("span",{className:"sr-only"},e),d.a.createElement("span",{"aria-hidden":"true"},d.a.createElement("span",{className:"search--inline__suggestion"},e.slice(e.indexOf(t.toLowerCase()),t.length)),e.slice(e.indexOf(t.toLowerCase())+t.length))))}(t,e.query.query);return d.a.createElement("li",{key:a},d.a.createElement("a",{href:"/search?query=".concat(n)},r))})))}function l(e,t){const a=e.metaData.thumbnail&&d.a.createElement("div",{className:"card__thumbnail"},d.a.createElement("picture",null,d.a.createElement("img",{src:e.metaData.thumbnail,alt:""}))),n=t&&d.a.createElement("p",{className:"card__label"},t);return d.a.createElement("li",{className:"card--search",key:e.docNum},d.a.createElement("a",{href:e.clickTrackingUrl,className:"card__details card__anchor"},a,d.a.createElement("div",{className:"card__details__text"},n,d.a.createElement("h4",{className:"card__heading"},e.title),d.a.createElement("p",{className:"card__description"},e.metaData.c))))}function i(e){return d.a.createElement("div",{className:"search--inline__topresults"},d.a.createElement("h3",null,"Top results"),d.a.createElement("ul",null,e.results.map(e=>{switch(e.collection){case"web2020-residentialhalls":return l(e,"Residential hall");case"web2020-business-impact":case"web2020-research":return l(e,"Case study");case"web2020-centres":return l(e,"Research centre");case"web2020-courses":return l(e,"Course");case"web2020-events":return l(e,"Event");case"web2020-facilities":return l(e,"Facility");case"web2020-locations":return l(e,"Location");case"web2020-pathways":return l(e,"Career pathway");case"web2020-funding":return l(e,"Funding");case"web2020-news":return l(e,"News");case"web2020-profiles":return l(e,"Profile");default:return l(e,null)}})))}function o(e){const[t,a]=Object(u.useState)(!1),[n,r]=Object(u.useState)({}),c={collection:e.config.collection,misspelling:null,numRanks:e.config.numRanks,query:"",startRank:1,facets:[],fixedFacets:[]},s=Object.freeze({bestBets:[],facets:[],results:[],spell:null,summary:{currEnd:0,currStart:0,numRanks:0,totalMatching:0}}),l=[],[i,o]=Object(u.useState)(c),[m,f]=Object(u.useState)(s),[p,_]=Object(u.useState)(l),[y,g]=Object(u.useState)(!1),[N,q]=Object(u.useState)(!1),[S,k]=Object(u.useState)({cancel:()=>{}}),[C,x]=Object(u.useState)(!1),[T,P]=Object(u.useState)({cancel:()=>{}});Object(u.useEffect)(()=>{g(!0),q(!0),S.cancel(),T.cancel();const[e,t]=Object(h.a)(i.collection,i.fixedFacets,i.query,i.sortType,i.startRank,i.numRanks,i.facets),[a,n]=Object(h.c)(i.collection,i.query);k({cancel:()=>{t.cancel()}}),P({cancel:()=>{n.cancel()}}),e.then(e=>{f(e),g(!1)}).catch(()=>{f(s)}),a.then(e=>{e&&(_(e),q(!1))}).catch(()=>{_(l)})},[C]);const D=e=>d.a.createElement("p",{className:"search--inline__results__updating search--inline__results__updating--".concat(e.replace(/ /g,"")),"aria-live":"polite"},d.a.createElement("span",{className:"fas fa-spinner fa-pulse icon","aria-hidden":"true"})," ",d.a.createElement("span",null,"Updating ",e,"â€¦"));Object(u.useEffect)(()=>{n.activate||r(b()(j(),{initialFocus:j().querySelector("input"),onDeactivate:()=>a(!1),clickOutsideDeactivates:!0})),t?n.activate&&n.activate():n.deactivate&&n.deactivate()},[t,n]);const R="global-header__search__icon far fa-fw ".concat(t?"fa-times":"fa-search"),L=t&&d.a.createElement("div",{className:"veil--search","data-on":"true"}),M=d.a.createElement("button",{className:"global-header__search__button",type:"button",id:"search","aria-expanded":t,onClick:()=>{a(!t)}},d.a.createElement("div",{className:"global-header__search__wrapper"},d.a.createElement("span",{className:"global-header__search__text"},t?"Close":"Search"),d.a.createElement("span",{className:R,"aria-hidden":"true"}))),F=d.a.createElement(E,{config:e.config,query:i,update:{query:e=>o(e),results:e=>x(e),updateState:C},updating:y}),U=N?D("suggestions"):p&&0<p.length?d.a.createElement(v,{query:i,suggestions:p.slice(0,10)}):null,A=y?D("top results"):m&&0<m.results.length?d.a.createElement(w,{query:i,results:m.results}):null;return d.a.createElement(d.a.Fragment,null,M,d.a.createElement("div",{className:"global-header__search__modal",ref:e=>O=e},d.a.createElement("div",{className:"global-header__search__modal__header"},d.a.createElement("div",{className:"header-logo header-logo--city"},d.a.createElement("div",{className:"header-logo__responsive"},d.a.createElement("a",{href:"https://web2020.city.ac.uk",rel:"home"},d.a.createElement("img",{className:"logo",src:"https://www.city.ac.uk/__data/assets/file/0006/442248/city-university-london-responsive-white.svg",width:"180",alt:"City, University of London"})))),M),d.a.createElement("div",{className:"global-header__search__modal__body"},d.a.createElement("h2",null,"What are you looking for?"),d.a.createElement("form",{action:"/search",method:"get"},F),d.a.createElement("div",{className:"global-header__search__modal__body__results"},U,A))),L)}a.r(t);var u=a(0),d=a.n(u),m=a(32),f=a(1),p=a.n(f);n.propTypes={config:p.a.object,element:p.a.object};a(7),a(24),a(12);var h=a(14),_=a(19),b=a.n(_);a(17);r.propTypes={clear:p.a.func};var y=r;const g="Escape";c.propTypes={config:p.a.object,query:p.a.object,update:p.a.object,updating:p.a.bool};var E=c;s.propTypes={query:p.a.object,suggestions:p.a.arrayOf(p.a.string)};var v=s;i.propTypes={query:p.a.object,results:p.a.arrayOf(p.a.object)};var w=i;let O=null;const j=()=>O;o.propTypes={config:p.a.object,element:p.a.object},document.addEventListener("DOMContentLoaded",()=>{if(!/(Trident|MSIE)/.test(navigator.userAgent)){const e=document.querySelector(".wrapper--search--disable"),t=document.querySelector(".global-header__search");t&&Object(h.b)(t.dataset.config).then(e=>{Object(m.render)(d.a.createElement(o,{config:e,element:t}),t)}),e&&Object(h.b)(e.dataset.config).then(t=>{Object(m.render)(d.a.createElement(n,{config:t,element:e}),e)})}})}});