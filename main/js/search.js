!function(e){function t(t){for(var a,r,l=t[0],o=t[1],i=t[2],d=0,f=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&f.push(c[r][0]),c[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);for(u&&u(t);f.length;)f.shift()();return s.push.apply(s,i||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n,r=s[t],l=!0,o=1;o<r.length;o++)n=r[o],0!==c[n]&&(l=!1);l&&(s.splice(t--,1),e=a(a.s=r[0]))}return e}function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}var r={},c={8:0},s=[];a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var l=window.webpackJsonp=window.webpackJsonp||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var u=o;s.push([217,1,0,3,2,4]),n()}({1:function(e,t,n){"use strict";function a(e){return!("true"!==e)}function r(e,t,n){const a=n?T(t):C(t);e.className=e.className.split(/\s+/).filter(e=>a(e)).join(" ")}function c(){return!!window.matchMedia("(prefers-reduced-motion: reduce)").matches}function s(e){return!(0===e.offsetHeight||0===e.offsetWidth)}function l(e){return!!(0<=e.getBoundingClientRect().top&&e.getBoundingClientRect().top<=window.innerHeight)}function o(e){const t={};return e.substr(1).split("&").forEach(e=>{const[n,a]=e.split("=");t[n]=a}),t}function i(e){if(0<Object.keys(e).length){let t="?";for(const n in e)1!==t.length&&(t+="&"),t+=n+"="+e[n];return t}return""}function u(e,t,n,a,r,c){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:e,eventCategory:t,eventAction:n,eventLabel:a,eventValue:r,nonInteractionHit:c})}function d(e,t){t.forEach(t=>e.appendChild(t))}function f(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:432;const t=window.innerWidth;if(t<e)return!0}function m(e){let t=[];for(let n=e.length>>>0;n--;)t[n]=e[n];return t}function p(){const e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){let t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}const n=e.indexOf("Edge/");return!!(0<n)&&parseInt(e.substring(n+5,e.indexOf(".",n)),10)}function h(){return!!("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)}function b(e,t){let n=document.createElement(e);return t.map((function(e){"content"===e.label?n.appendChild(document.createTextNode(e.val)):n.setAttribute(e.label,e.val)})),n}function _(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function y(e){return S()(e).then(e=>{if(200===e.status)return e.data;throw"Bad response: ".concat(e.status)}).catch(e=>{S.a.isCancel(e)||u("jsError","JavaScript error","Line ".concat(e.lineNumber," – ").concat(e.message),"axiosRequest ".concat(e.fileName," (").concat(window.location,")"),!0)})}function g(e){return x.a.createElement("time",{dateTime:e.toISOString().split("T")[0]},["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getUTCDay()],", ",e.getUTCDate(),x.a.createElement("sup",null,function(e){const t=e.toString().slice(-1);return e>=11||e<=13?"th":"1"===t?"st":"2"===t?"nd":"3"===t?"rd":"th"}(e.getUTCDate()))," ",["January","February","March","April","May","June","July","August","September","October","November","December"][e.getUTCMonth()]," ",e.getUTCFullYear())}n.d(t,"o",(function(){return a})),n.d(t,"m",(function(){return r})),n.d(t,"l",(function(){return c})),n.d(t,"i",(function(){return s})),n.d(t,"q",(function(){return l})),n.d(t,"k",(function(){return o})),n.d(t,"j",(function(){return i})),n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return f})),n.d(t,"n",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"p",(function(){return _})),n.d(t,"b",(function(){return y})),n.d(t,"f",(function(){return g}));var E=n(7),v=(n.n(E),n(17)),O=(n.n(v),n(24)),w=(n.n(O),n(11)),j=(n.n(w),n(3)),q=(n.n(j),n(12)),N=(n.n(q),n(8)),S=n.n(N),k=n(0),x=n.n(k);const T=e=>t=>0>t.indexOf(e),C=e=>t=>t!==e},121:function(){},122:function(){},16:function(e,t,n){"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?a(Object(t),!0).forEach((function(n){c(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n,a,c,s,l){const o={};t.forEach(e=>{o["meta_".concat(e.meta,"_sand")]=e.value});const i={};Object.keys(l).forEach(e=>i["meta_".concat(e,"_sand")]=l[e]);const u=d.a.CancelToken.source(),f={baseURL:h,cancelToken:u.token,httpsAgent:new m.a.Agent({keepAlive:!0}),url:b,timeout:g,params:r(r(r({},o),i),{},{collection:e,num_ranks:s,query:n,sort:a||"",start_rank:c})};return[Object(p.b)(f),u]}function l(e,t){const n=d.a.CancelToken.source(),a={baseURL:h,cancelToken:n.token,url:_,timeout:g,params:{collection:e,partial_query:t,show:y}};return[Object(p.b)(a),n]}function o(e){return Object(p.b)({timeout:g,url:e})}n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return o}));var i=n(3),u=(n.n(i),n(8)),d=n.n(u),f=n(56),m=n.n(f),p=n(1);const h="https://web2020.city.ac.uk/web-services",b="/funnelback-find",_="/funnelback-suggest",y=100,g=3e4},217:function(e,t,n){e.exports=n(221)},221:function(e,t,n){"use strict";function a(e){return i.a.createElement("button",{className:"search--inline__clear",type:"button",onClick:()=>{e.clear()}},i.a.createElement("span",{className:"fad fa-fw fa-times-circle icon "}),i.a.createElement("span",{className:"search--inline__clear__text"},"Clear query"))}function r(e){const[t,n]=Object(o.useState)(e.query.query),[a]=Object(o.useState)("search--inline--"+e.query.collection+"--"+Math.random().toString(16).slice(-4));Object(o.useEffect)(()=>{n(e.query.query)},[e.query.query,e.updating]);let r=null;const c=()=>{n(""),r.focus();const t=e.query;t.query="",t.startRank=1,e.update.query(t),e.update.results(!e.update.updateState)},s=t=>{const n=e.query;n.query=t,n.startRank=1,e.update.query(n),e.update.results(!e.update.updateState)},l=t&&i.a.createElement(b,{clear:()=>{c()}}),u=i.a.createElement("div",{className:"search--inline__query__input"},i.a.createElement("div",{className:"search--inline__query__icon--wrapper"},i.a.createElement("span",{className:"search--inline__icon fal fa-search icon","aria-hidden":"true"})),i.a.createElement("label",{className:"sr-only",htmlFor:a},"Search"),i.a.createElement("input",{autoComplete:"off",id:a,name:"query",placeholder:e.config.placeholder,ref:e=>{r=e},type:"text",required:!0,value:t,onKeyDown:e=>{switch(e.key){case _:c()}},onChange:e=>{n(e.target.value),s(e.target.value)}}),l);return i.a.createElement("fieldset",{className:"search--inline__query"},i.a.createElement("div",null,u,i.a.createElement("button",{type:"submit",className:"search--inline__query__submit"},i.a.createElement("span",{className:"search--inline__query__submit__content"},i.a.createElement("span",{className:"fas fa-search search--inline__query__submit__icon","aria-hidden":"true"})," ",i.a.createElement("span",{className:"search--inline__query__submit__text"},"Search")))))}function c(e){return i.a.createElement("div",{className:"search--inline__suggestions"},i.a.createElement("h3",null,"Suggestions"),i.a.createElement("ul",null,e.suggestions.map((t,n)=>{const a=t.replace(/\s+/g,"+"),r=function(e,t){return i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,i.a.createElement("span",{className:"sr-only"},e),i.a.createElement("span",{"aria-hidden":"true"},i.a.createElement("span",{className:"search--inline__suggestion"},e.slice(e.indexOf(t.toLowerCase()),t.length)),e.slice(e.indexOf(t.toLowerCase())+t.length))))}(t,e.query.query);return i.a.createElement("li",{key:n},i.a.createElement("a",{href:"/search?query=".concat(a)},r))})))}function s(e){return i.a.createElement("div",{className:"search--inline__topresults"},i.a.createElement("h3",null,"Top results"),i.a.createElement("ul",null,e.results.map((e,t)=>{const n=e.metaData.thumbnail?i.a.createElement("div",{className:"card__thumbnail"},i.a.createElement("picture",null,i.a.createElement("img",{src:e.metaData.thumbnail,alt:""}))):null;return i.a.createElement("li",{key:t,className:"card card--generic"},i.a.createElement("a",{href:e.clickTrackingUrl,className:"card__anchor card__details"},n,i.a.createElement("div",{className:"card__details__text"},i.a.createElement("h4",{className:"card__heading"},e.title),i.a.createElement("p",{className:"card__description"},e.metaData.c))))})))}function l(e){const[t,n]=Object(o.useState)(!1),[a,r]=Object(o.useState)({}),c={collection:e.config.collection,misspelling:null,numRanks:e.config.numRanks,query:"",startRank:1,facets:[],fixedFacets:[]},s=Object.freeze({bestBets:[],facets:[],results:[],spell:null,summary:{currEnd:0,currStart:0,numRanks:0,totalMatching:0}}),l=[],[u,d]=Object(o.useState)(c),[f,p]=Object(o.useState)(s),[b,_]=Object(o.useState)(l),[w,j]=Object(o.useState)(!1),[q,N]=Object(o.useState)(!1),[S,k]=Object(o.useState)({cancel:()=>{}}),[x,T]=Object(o.useState)(!1),[C,P]=Object(o.useState)({cancel:()=>{}});Object(o.useEffect)(()=>{j(!0),N(!0),S.cancel(),C.cancel();const[e,t]=Object(m.a)(u.collection,u.fixedFacets,u.query,u.sortType,u.startRank,u.numRanks,u.facets),[n,a]=Object(m.c)(u.collection,u.query);k({cancel:()=>{t.cancel()}}),P({cancel:()=>{a.cancel()}}),e.then(e=>{p(e),j(!1)}).catch(()=>{p(s),j(!1)}),n.then(e=>{_(e),N(!1)}).catch(()=>{_(l),N(!1)})},[x]);const D=e=>i.a.createElement("p",{className:"search--inline__results__updating search--inline__results__updating--".concat(e.replace(/ /g,"")),"aria-live":"polite"},i.a.createElement("span",{className:"fas fa-spinner fa-pulse icon","aria-hidden":"true"})," ",i.a.createElement("span",null,"Updating ",e,"…"));Object(o.useEffect)(()=>{a.activate||r(h()(O(),{initialFocus:O().querySelector("input"),onDeactivate:()=>n(!1),clickOutsideDeactivates:!0})),t?a.activate&&a.activate():a.deactivate&&a.deactivate()},[t,a]);const M="global-header__search__icon far fa-fw ".concat(t?"fa-times":"fa-search"),R=t&&i.a.createElement("div",{className:"veil--search","data-on":"true"}),L=i.a.createElement("button",{className:"global-header__search__button",type:"button",id:"search","aria-expanded":t,onClick:()=>{n(!t)}},i.a.createElement("div",{className:"global-header__search__wrapper"},i.a.createElement("span",{className:"global-header__search__text"},t?"Close":"Search"),i.a.createElement("span",{className:M,"aria-hidden":"true"}))),U=i.a.createElement(y,{config:e.config,query:u,update:{query:e=>d(e),results:e=>T(e),updateState:x},updating:w}),A=q?D("suggestions"):b&&0<b.length?i.a.createElement(g,{query:u,suggestions:b.slice(0,10)}):null,I=w?D("top results"):f&&0<f.results.length?i.a.createElement(E,{query:u,results:f.results}):null;return i.a.createElement(i.a.Fragment,null,L,i.a.createElement("div",{className:"global-header__search__modal",ref:e=>v=e},i.a.createElement("div",{className:"global-header__search__modal__header"},i.a.createElement("div",{className:"header-logo header-logo--city"},i.a.createElement("div",{className:"header-logo__responsive"},i.a.createElement("a",{href:"https://web2020.city.ac.uk",rel:"home"},i.a.createElement("img",{className:"logo",src:"https://www.city.ac.uk/__data/assets/file/0006/442248/city-university-london-responsive-white.svg",width:"180",alt:"City, University of London"})))),L),i.a.createElement("div",{className:"global-header__search__modal__body"},i.a.createElement("h2",null,"Search"),i.a.createElement("form",{action:"/search",method:"get"},U),i.a.createElement("div",{className:"global-header__search__modal__body__results"},A,I))),R)}n.r(t);var o=n(0),i=n.n(o),u=n(38),d=(n(7),n(24),n(12),n(2)),f=n.n(d),m=n(16),p=n(19),h=n.n(p);n(17);a.propTypes={clear:f.a.func};var b=a;const _="Escape";r.propTypes={config:f.a.object,query:f.a.object,update:f.a.object,updating:f.a.bool};var y=r;c.propTypes={query:f.a.object,suggestions:f.a.arrayOf(f.a.string)};var g=c;s.propTypes={query:f.a.object,results:f.a.arrayOf(f.a.object)};var E=s;let v=null;const O=()=>v;l.propTypes={config:f.a.object,element:f.a.object},document.addEventListener("DOMContentLoaded",()=>{if(!/(Trident|MSIE)/.test(navigator.userAgent)){const e=document.querySelector(".global-header__search");e&&Object(m.b)(e.dataset.config).then(t=>{Object(u.render)(i.a.createElement(l,{config:t,element:e}),e)})}})}});