!function(e){function t(t){for(var r,a,u=t[0],i=t[1],l=t[2],f=0,d=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(s&&s(t);d.length;)d.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n,a=c[t],u=!0,i=1;i<a.length;i++)n=a[i],0!==o[n]&&(u=!1);u&&(c.splice(t--,1),e=r(r.s=a[0]))}return e}function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}var a={},o={6:0},c=[];r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var u=window.webpackJsonp=window.webpackJsonp||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var s=i;c.push([230,1,0,3,2]),n()}({18:function(e,t,n){"use strict";function r(e){return o.a.createElement("button",{className:"finder__clear",type:"button",onClick:()=>{e.clear()}},o.a.createElement("span",{className:"far fa-fw fa-times icon"}),o.a.createElement("span",{className:"finder__clear__text"},"Reset"))}var a=n(0),o=n.n(a),c=n(1),u=n.n(c);r.propTypes={clear:u.a.func},t.a=r},2:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e){return!("true"!==e)}function o(e,t,n){var r=n?C(t):D(t);e.className=e.className.split(/\s+/).filter(e=>r(e)).join(" ")}function c(){return!!window.matchMedia("(prefers-reduced-motion: reduce)").matches}function u(e){return!(0===e.offsetHeight||0===e.offsetWidth)}function i(e){return!!(0<=e.getBoundingClientRect().top&&e.getBoundingClientRect().top<=window.innerHeight)}function l(e){var t={};return e.substr(1).split("&").forEach(e=>{var n=r(e.split("="),2),a=n[0],o=n[1];t[a]=o}),t}function s(e){if(0<Object.keys(e).length){var t="?";for(var n in e)1!==t.length&&(t+="&"),t+=n+"="+e[n];return t}return""}function f(e,t,n,r,a,o){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:e,eventCategory:t,eventAction:n,eventLabel:r,eventValue:a,nonInteractionHit:o})}function d(e,t){t.forEach(t=>e.appendChild(t))}function p(e){return e.replace(/\D/g,"")}function b(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:432,t=window.innerWidth;if(t<e)return!0}function y(e){for(var t=[],n=e.length>>>0;n--;)t[n]=e[n];return t}function m(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var r=e.indexOf("Edge/");return!!(0<r)&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}function g(){return!!("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)}function v(e,t){var n=document.createElement(e);return t.map((function(e){"content"===e.label?n.appendChild(document.createTextNode(e.val)):n.setAttribute(e.label,e.val)})),n}function h(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function w(e){return A()(e).then(e=>{if(200===e.status)return e.data;throw"Bad response: ".concat(e.status)}).catch(e=>{A.a.isCancel(e)||f("jsError","JavaScript error","Line ".concat(e.lineNumber," â€“ ").concat(e.message),"axiosRequest ".concat(e.fileName," (").concat(window.location,")"),!0)})}n.d(t,"o",(function(){return a})),n.d(t,"m",(function(){return o})),n.d(t,"l",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"q",(function(){return i})),n.d(t,"k",(function(){return l})),n.d(t,"j",(function(){return s})),n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"g",(function(){return b})),n.d(t,"n",(function(){return y})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"p",(function(){return h})),n.d(t,"b",(function(){return w}));var _=n(16),O=(n.n(_),n(4)),j=(n.n(O),n(5)),S=(n.n(j),n(14)),E=(n.n(S),n(35)),q=(n.n(E),n(9)),k=(n.n(q),n(3)),N=(n.n(k),n(6)),x=(n.n(N),n(11)),A=n.n(x),C=e=>t=>0>t.indexOf(e),D=e=>t=>t!==e},230:function(e,t,n){e.exports=n(231)},231:function(e,t,n){"use strict";n.r(t);var r=n(17),a=(n.n(r),n(3)),o=(n.n(a),n(0)),c=n.n(o),u=n(46),i=(n.n(u),n(57)),l=n(7);document.addEventListener("DOMContentLoaded",()=>{/(Trident|MSIE)/.test(navigator.userAgent)||Array.from(document.querySelectorAll(".finder__mini")).forEach(e=>{Object(l.b)(e.dataset.config).then(t=>{Object(u.render)(c.a.createElement(i.a,{config:t}),e)})})})},57:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e){function t(){S.focus()}var n=r(Object(i.useState)(e.query.query),2),a=n[0],o=n[1],c=r(Object(i.useState)([]),2),u=c[0],s=c[1],f=r(Object(i.useState)({cancel:()=>{}}),2),v=f[0],h=f[1],w=r(Object(i.useState)("finder--"+e.query.collection+"--"+Math.random().toString(16).slice(-4)),1)[0],_=r(Object(i.useState)(!1),2),O=_[0],j=_[1];Object(i.useEffect)(()=>{o(e.query.query)},[e.updating]);var S=null,E=()=>{v.cancel(),o(""),s([]),t();var n=e.query;n.query="",n.sortBy=e.config.sort,e.update.query(n),e.update.results(!e.update.updateState)},q=t=>{v.cancel();var n=e.query;n.query=t,e.update.query(n),e.update.results(!e.update.updateState)},k=a&&l.a.createElement(p.a,{clear:()=>{E()}}),N=u&&0<u.length&&l.a.createElement("ul",{className:O?"finder__query__suggestions show":"finder__query__suggestions hide"},[...new Set(u)].slice(0,b).map(e=>l.a.createElement("li",{key:e},l.a.createElement("button",{type:"button",onBlur:()=>j(!1),onFocus:()=>j(!0),onMouseDown:()=>{j(!0),o(e),s([]),t(),q(e)},onClick:()=>{j(!0),o(e),s([]),t(),q(e)},onKeyDown:e=>{switch(e.keyCode){case y:e.target.parentNode.parentNode.parentNode.querySelector("input").focus(),s([]);break;case m:e.target.parentNode.previousElementSibling&&e.target.parentNode.previousElementSibling.querySelector("button")?(e.preventDefault(),e.target.parentNode.previousElementSibling.querySelector("button").focus()):(e.preventDefault(),e.target.parentNode.parentNode.parentNode.querySelector("input").focus());break;case g:e.preventDefault(),e.target.parentNode.nextElementSibling&&e.target.parentNode.nextElementSibling.querySelector("button")&&(e.preventDefault(),e.target.parentNode.nextElementSibling.querySelector("button").focus())}}},function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,l.a.createElement("span",{className:"sr-only"},e),l.a.createElement("span",{"aria-hidden":"true"},l.a.createElement("span",{className:"finder__suggestion"},e.slice(e.indexOf(t.toLowerCase()),t.length)),e.slice(e.indexOf(t.toLowerCase())+t.length))))}(e,a))))),x=l.a.createElement("div",{className:"finder__query__input"},l.a.createElement("div",{className:"finder__query__icon--wrapper"},l.a.createElement("span",{className:"finder__icon fal fa-search"})),l.a.createElement("label",{className:"sr-only",htmlFor:w},"Search ".concat(e.config.summariseAs.plural)),l.a.createElement("input",{autoComplete:"off",id:w,name:"query",placeholder:e.config.placeholder,ref:e=>{S=e},type:"text",value:a,onKeyDown:e=>{switch(e.keyCode){case y:E();break;case g:u&&0<u.length&&(e.preventDefault(),e.target.parentNode.querySelector(".finder__query__suggestions button").focus())}},onFocus:()=>j(!0),onBlur:()=>j(!1),onChange:t=>{if(s([]),o(t.target.value),v.cancel(),t.target.value){var n=r(Object(d.c)(e.query.collection,t.target.value),2),a=n[0],c=n[1];h({cancel:()=>{c.cancel()}}),a.then(e=>s(e)).catch(()=>s([]))}else s([])}}),N,k);return l.a.createElement("fieldset",{className:"finder__query"},l.a.createElement("div",null,x,l.a.createElement("button",{type:"submit",className:"finder__query__submit",onClick:()=>{window.location.replace("https://web2020.city.ac.uk/prospective-students/courses?query=".concat(a))}},l.a.createElement("span",{className:"fal fa-search finder__query__submit__icon","aria-hidden":"true"})," ",l.a.createElement("span",{className:"finder__query__submit__text"},"Find"))))}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e,t){return e.map(e=>{var n={};return t.get("meta_".concat(e.meta,"_orsand"))&&(n[e.meta]=t.get("meta_".concat(e.meta,"_orsand"))),n}).reduce((e,t)=>Object.assign(e,t))}function u(e){var t=new URLSearchParams(window.location.search),n={collection:e.config.collection,fixedFacets:e.config.fixedFacets,query:t.get("query")||"",sortBy:t.get("query")?null:t.get("sort")||e.config.sort,sortDirection:t.get("sortdirection")||e.config.sortDirection,startRank:t.get("start_rank")||1,numRanks:t.get("num_ranks")||e.config.numRanks,facets:c(e.config.facetLabels,t)},r=o(Object(i.useState)(n),2),a=r[0],u=r[1],s=o(Object(i.useState)(!0),2),f=s[0],p=s[1],b=o(Object(i.useState)({cancel:()=>{}}),2),y=b[0],m=b[1],g=o(Object(i.useState)(!1),2),h=g[0],w=g[1];return Object(i.useEffect)(()=>{(function(e,t,n,r){var a=new URLSearchParams(window.location.search);""===e?a.delete("query"):a.set("query",e),1===t?a.delete("start_rank"):a.set("start_rank",t),r.forEach(e=>{n[e.meta]?a.set("meta_".concat(e.meta,"_orsand"),n[e.meta]):a.delete("meta_".concat(e.meta,"_orsand"))});var o=a.toString().length?"?":"";window.history.replaceState({},"","".concat(window.location.pathname).concat(o).concat(a.toString()))})(a.query,a.startRank,a.facets,e.config.facetLabels),p(!0),y.cancel();var t=o(Object(d.a)(a.collection,a.fixedFacets,a.query,a.sortBy,a.sortDirection,a.startRank,a.numRanks,a.facets),2),n=t[0],r=t[1];m({cancel:()=>{r.cancel()}}),n.then(()=>{p(!1)}).catch(()=>{p(!1)})},[h]),l.a.createElement("form",{onSubmit:e=>{e.preventDefault()}},l.a.createElement(v,{config:e.config,query:a,update:{query:e=>u(e),results:e=>w(e),updateState:h},updating:f}))}n(4),n(25),n(65),n(14),n(42),n(3),n(6),n(66);var i=n(0),l=n.n(i),s=n(1),f=n.n(s),d=n(7),p=(n(16),n(5),n(69),n(35),n(18)),b=5,y=27,m=38,g=40;a.propTypes={config:f.a.object,query:f.a.object,update:f.a.object,updating:f.a.bool};var v=a;u.propTypes={config:f.a.object},t.a=u},7:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n,r,o,c,u,i){var l={};t.forEach(e=>{l["meta_".concat(e.meta,"_sand")]=e.value});var s={};Object.keys(i).forEach(e=>s["meta_".concat(e,"_sand")]=i[e]);var d=f.a.CancelToken.source(),g={baseURL:y,cancelToken:d.token,httpsAgent:new p.a.Agent({keepAlive:!0}),url:m,timeout:v,params:a({},l,{},s,{collection:e,num_ranks:u,query:n,sort:r?"".concat("desc"===o?"d":"").concat(r):null,start_rank:c})};return[Object(b.b)(g),d]}function u(e,t){var n=f.a.CancelToken.source(),r={baseURL:y,cancelToken:n.token,url:g,timeout:v,params:{collection:e,partial_query:t}};return[Object(b.b)(r),n]}function i(e){return Object(b.b)({timeout:v,url:e})}n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return i}));var l=n(3),s=(n.n(l),n(11)),f=n.n(s),d=n(45),p=n.n(d),b=n(2),y="https://web2020.city.ac.uk/web-services",m="/funnelback-find",g="/funnelback-suggest",v=3e4},87:function(){},88:function(){}});