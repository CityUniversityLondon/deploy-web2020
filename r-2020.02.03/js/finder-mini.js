!function(e){function t(t){for(var r,a,u=t[0],i=t[1],s=t[2],f=0,d=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&d.push(c[a][0]),c[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(l&&l(t);d.length;)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n,a=o[t],u=!0,i=1;i<a.length;i++)n=a[i],0!==c[n]&&(u=!1);u&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}var a={},c={3:0},o=[];r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var u=window.webpackJsonp=window.webpackJsonp||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var l=i;o.push([220,0,1]),n()}({11:function(e,t,n){"use strict";function r(e){return c.a.createElement("button",{className:"finder__clear",type:"button",onClick:()=>{e.clear()}},c.a.createElement("span",{className:"far fa-fw fa-times icon","aria-label":"Clear input"}),c.a.createElement("span",{className:"finder__clear__text"},"Reset"))}var a=n(0),c=n.n(a),o=n(1),u=n.n(o);r.propTypes={clear:u.a.func},t.a=r},2:function(e,t,n){"use strict";function r(e){return!("true"!==e)}function a(e,t,n){const r=n?E(t):S(t);e.className=e.className.split(/\s+/).filter(e=>r(e)).join(" ")}function c(){return!!window.matchMedia("(prefers-reduced-motion: reduce)").matches}function o(e){return!(0===e.offsetHeight||0===e.offsetWidth)}function u(e){return!!(0<=e.getBoundingClientRect().top&&e.getBoundingClientRect().top<=window.innerHeight)}function i(e){const t={};return e.substr(1).split("&").forEach(e=>{const[n,r]=e.split("=");t[n]=r}),t}function s(e){if(0<Object.keys(e).length){let t="?";for(const n in e)1!==t.length&&(t+="&"),t+=n+"="+e[n];return t}return""}function l(e,t,n,r,a,c){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:e,eventCategory:t,eventAction:n,eventLabel:r,eventValue:a,nonInteractionHit:c})}function f(e,t){t.forEach(t=>e.appendChild(t))}function d(e){return e.replace(/\D/g,"")}function p(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:432;const t=window.innerWidth;if(t<e)return!0}function m(e){let t=[];for(let n=e.length>>>0;n--;)t[n]=e[n];return t}function g(){let e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){let t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}let n=e.indexOf("Edge/");return!!(0<n)&&parseInt(e.substring(n+5,e.indexOf(".",n)),10)}function b(){return!!("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)}function y(e,t){let n=document.createElement(e);return t.map((function(e){"content"===e.label?n.appendChild(document.createTextNode(e.val)):n.setAttribute(e.label,e.val)})),n}n.d(t,"n",(function(){return r})),n.d(t,"l",(function(){return a})),n.d(t,"k",(function(){return c})),n.d(t,"g",(function(){return o})),n.d(t,"o",(function(){return u})),n.d(t,"j",(function(){return i})),n.d(t,"i",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"m",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return y}));var _=n(4),h=(n.n(_),n(18)),w=(n.n(h),n(20)),O=(n.n(w),n(3)),v=(n.n(O),n(5));n.n(v);const E=e=>t=>0>t.indexOf(e),S=e=>t=>t!==e},220:function(e,t,n){e.exports=n(221)},221:function(e,t,n){"use strict";n.r(t);var r=n(3),a=(n.n(r),n(0)),c=n.n(a),o=n(62),u=(n.n(o),n(51)),i=n(6);document.addEventListener("DOMContentLoaded",()=>{/(Trident|MSIE)/.test(navigator.userAgent)||Array.from(document.querySelectorAll(".wrapper--finder__mini")).forEach(e=>{Object(i.b)(e.dataset.config).then(t=>{Object(o.render)(c.a.createElement(u.a,{config:t}),e)})})})},51:function(e,t,n){"use strict";function r(e,t){return e.map(e=>{const n={};return t.get("meta_".concat(e.meta,"_orsand"))&&(n[e.meta]=t.get("meta_".concat(e.meta,"_orsand"))),n}).reduce((e,t)=>Object.assign(e,t))}function a(e){const t=new URLSearchParams(window.location.search),n={collection:e.config.collection,fixedFacets:e.config.fixedFacets,query:t.get("query")||"",sortBy:t.get("query")?null:t.get("sort")||e.config.sort,sortDirection:t.get("sortdirection")||e.config.sortDirection,startRank:t.get("start_rank")||1,numRanks:t.get("num_ranks")||e.config.numRanks,facets:r(e.config.facetLabels,t)},[a,u]=Object(c.useState)(n),[i,l]=Object(c.useState)(!0),[f,d]=Object(c.useState)({cancel:()=>{}}),[p,g]=Object(c.useState)(!1);return Object(c.useEffect)(()=>{(function(e,t,n,r){const a=new URLSearchParams(window.location.search);""===e?a.delete("query"):a.set("query",e),1===t?a.delete("start_rank"):a.set("start_rank",t),r.forEach(e=>{n[e.meta]?a.set("meta_".concat(e.meta,"_orsand"),n[e.meta]):a.delete("meta_".concat(e.meta,"_orsand"))});const c=a.toString().length?"?":"";window.history.replaceState({},"","".concat(window.location.pathname).concat(c).concat(a.toString()))})(a.query,a.startRank,a.facets,e.config.facetLabels),l(!0),f.cancel();const[t,n]=Object(s.a)(a.collection,a.fixedFacets,a.query,a.sortBy,a.sortDirection,a.startRank,a.numRanks,a.facets);d({cancel:()=>{n.cancel()}}),t.then(()=>{l(!1)}).catch(()=>{l(!1)})},[p]),o.a.createElement("form",{onSubmit:e=>{e.preventDefault()}},o.a.createElement(m,{config:e.config,query:a,update:{query:e=>u(e),results:e=>g(e),updateState:p},updating:i}))}n(4),n(21),n(57),n(14),n(29),n(3),n(5),n(58);var c=n(0),o=n.n(c),u=n(1),i=n.n(u),s=n(6),l=(n(18),n(11));const[f,d,p]=[27,38,40];var m=function(e){function t(){_.focus()}const[n,r]=Object(c.useState)(e.query.query),[a,u]=Object(c.useState)([]),[i,m]=Object(c.useState)({cancel:()=>{}}),[g]=Object(c.useState)("finder--"+e.query.collection+"--"+Math.random().toString(16).slice(-4)),[b,y]=Object(c.useState)(!1);Object(c.useEffect)(()=>{r(e.query.query)},[e.updating]);let _=null;const h=()=>{i.cancel(),r(""),u([]),t();const n=e.query;n.query="",n.sortBy=e.config.sort,e.update.query(n),e.update.results(!e.update.updateState)},w=t=>{i.cancel();const n=e.query;n.query=t,e.update.query(n),e.update.results(!e.update.updateState)},O=n&&o.a.createElement(l.a,{clear:()=>{h()}}),v=a&&0<a.length&&o.a.createElement("ul",{className:b?"finder__query__suggestions show":"finder__query__suggestions hide"},[...new Set(a)].slice(0,5).map(e=>o.a.createElement("li",{key:e},o.a.createElement("button",{type:"button",onBlur:()=>y(!1),onFocus:()=>y(!0),onMouseDown:()=>{y(!0),r(e),u([]),t(),w(e)},onClick:()=>{y(!0),r(e),u([]),t(),w(e)},onKeyDown:e=>{switch(e.keyCode){case f:e.target.parentNode.parentNode.parentNode.querySelector("input").focus(),u([]);break;case d:e.target.parentNode.previousElementSibling&&e.target.parentNode.previousElementSibling.querySelector("button")?(e.preventDefault(),e.target.parentNode.previousElementSibling.querySelector("button").focus()):(e.preventDefault(),e.target.parentNode.parentNode.parentNode.querySelector("input").focus());break;case p:e.preventDefault(),e.target.parentNode.nextElementSibling&&e.target.parentNode.nextElementSibling.querySelector("button")&&(e.preventDefault(),e.target.parentNode.nextElementSibling.querySelector("button").focus())}}},function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("span",null,o.a.createElement("span",{className:"sr-only"},e),o.a.createElement("span",{"aria-hidden":"true"},o.a.createElement("span",{className:"finder__suggestion"},e.slice(e.indexOf(t.toLowerCase()),t.length)),e.slice(e.indexOf(t.toLowerCase())+t.length))))}(e,n))))),E=o.a.createElement("div",{className:"finder__query__input"},o.a.createElement("div",{className:"finder__query__icon--wrapper"},o.a.createElement("span",{className:"finder__icon fal fa-search"})),o.a.createElement("label",{className:"sr-only",htmlFor:g},"Search ".concat(e.config.summariseAs.plural)),o.a.createElement("input",{autoComplete:"off",id:g,name:"query",placeholder:e.config.placeholder,ref:e=>{_=e},type:"text",value:n,onKeyDown:e=>{switch(e.keyCode){case f:h();break;case p:a&&0<a.length&&(e.preventDefault(),e.target.parentNode.querySelector(".finder__query__suggestions button").focus())}},onFocus:()=>y(!0),onBlur:()=>y(!1),onChange:t=>{if(u([]),r(t.target.value),i.cancel(),t.target.value){const[n,r]=Object(s.c)(e.query.collection,t.target.value);m({cancel:()=>{r.cancel()}}),n.then(e=>u(e)).catch(()=>u([]))}else u([])}}),v,O);return o.a.createElement("fieldset",{className:"finder__query"},o.a.createElement("div",null,E,o.a.createElement("button",{type:"submit",className:"finder__query__submit",onClick:()=>{window.location.replace("https://web2020.city.ac.uk/prospective-students/courses?query=".concat(n))}},o.a.createElement("span",{className:"fal fa-search finder__query__submit__icon","aria-hidden":"true"})," ",o.a.createElement("span",{className:"finder__query__submit__text"},"Find"))))};a.propTypes={config:i.a.object},t.a=a},6:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?r(Object(t),!0).forEach((function(n){c(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return d()(e).then(e=>{if(h===e.status)return e.data;throw"Bad response: ".concat(e.status)}).catch(e=>{d.a.isCancel(e)||Object(g.e)("jsError","JavaScript error","Line ".concat(e.lineNumber," – ").concat(e.message),"axiosRequest ".concat(e.fileName," (").concat(window.location,")"),!0)})}function u(e,t,n,r,c,u,i,s){const l={};t.forEach(e=>{l["meta_".concat(e.meta,"_sand")]=e.value});const f={};Object.keys(s).forEach(e=>f["meta_".concat(e,"_sand")]=s[e]);const p=d.a.CancelToken.source();return[o({baseURL:b,cancelToken:p.token,httpsAgent:new m.a.Agent({keepAlive:!0}),url:y,timeout:w,params:a({},l,{},f,{collection:e,num_ranks:i,query:n,sort:r?"".concat("desc"===c?"d":"").concat(r):null,start_rank:u})}),p]}function i(e,t){const n=d.a.CancelToken.source();return[o({baseURL:b,cancelToken:n.token,url:_,timeout:w,params:{collection:e,partial_query:t}}),n]}function s(e){return o({timeout:w,url:e})}n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s}));var l=n(3),f=(n.n(l),n(13)),d=n.n(f),p=n(39),m=n.n(p),g=n(2);const b="https://web2020.city.ac.uk/web-services",y="/funnelback-find",_="/funnelback-suggest",h=200,w=3e4},76:function(){},77:function(){}});